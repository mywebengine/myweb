/*!
 * myweb v0.9.01
 * (c) 2019-2021 Aleksey Zobnev
 * Released under the MIT License.
 * https://github.com/mywebengine/myweb
 */
await Promise.all(self.__import__=new Map([["/cmd/attr.js", import('data:text/javascript;text,let type_animation,type_cacheAttrSyncCurI,lazyRenderName,pushModName,replaceModName,srcBy$src,setAttribute,setAttributeValue,removeAttribute,eval2,q_eval2,setLoc,check;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/cache.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/dom.js"),self.__import__.get("/eval2.js"),self.__import__.get("/loc.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];type_animation=m.type_animation;m=arr[1];type_cacheAttrSyncCurI=m.type_cacheAttrSyncCurI;m=arr[2];lazyRenderName=m.lazyRenderName;pushModName=m.pushModName;replaceModName=m.replaceModName;m=arr[3];srcBy$src=m.srcBy$src;m=arr[4];setAttribute=m.setAttribute;setAttributeValue=m.setAttributeValue;removeAttribute=m.removeAttribute;m=arr[5];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[6];setLoc=m.setLoc;m=arr[7];check=m.check;});export default{render(r){return eval2(r,r.$src,true).then(e=>{attr_render(r,r.$src,getName(r),e);return null})},q_render(s,a,c){return q_eval2(s,a,c).then(r=>{const t=a.length,n=getName(s);for(let e=0;e<t;e++){if(!c.has(e)){attr_render(s,a[e].$src,n,r[e])}}return null})}};function attr_render(e,r,t,n){const s=e.reqCmd.args[1],a=srcBy$src.get(r).cache,c=a.isInits.has(e.str);if(!c){a.isInits.add(e.str);setClick(e,r,t)}if(e.sync.renderParam.isLinking){a.current.set(e.str,r.getAttribute(t));return}const i=a.current.has(e.str)?a.current.get(e.str):r.getAttribute(t),o=a.attrSyncCur.get(t),u=o!==undefined&&o.syncId===e.sync.syncId?o.value:i;if(s&&s!==pushModName&&s!==replaceModName){if(u){const f=u.indexOf(s),l=s.length;if(f!==-1&&(u[f-1]===" "||f===0)&&(u[f+l]===" "||f+l===u.length)){n=n?u:u.substr(0,f)+u.substr(f+l+1)}else if(n){n=u[u.length-1]===" "?u+s:u+" "+s}else{n=u}}else if(n){n=s}else{n=u}}if(n===true){n=t}if(o!==undefined){o.syncId=e.sync.syncId;o.value=n}else{a.attrSyncCur.set(t,type_cacheAttrSyncCurI(e.sync.syncId,n))}const d=!!(n||n==="");if(t===lazyRenderName){e.sync.renderParam.isLazyRender=d}if(c&&i===n){setAttributeValue(r,t,n);return}e.sync.animations.add(type_animation(()=>{a.current.set(e.str,n);if(d){setAttribute(r,t,n);return}removeAttribute(r,t)},e.sync.local,srcBy$src.get(r).id))}function setClick(t,n,e){if(n.tagName!=="A"||e.toLowerCase()!=="href"||n.target){return}n.addEventListener("click",async e=>{if(!n.href||e.ctrlKey||e.metaKey){return}e.preventDefault();const r=t.reqCmd.args[1];if(r===pushModName){history.pushState(undefined,undefined,n.href)}else if(r===replaceModName){history.replaceState(undefined,undefined,n.href)}else{location.href=n.href;return}setLoc(location.href)})}function getName(e){const r=e.reqCmd.args[0];if(r){return r}throw check(new Error(">>>mw attr:render:01: Need set attribute name"),e.$src,e)}')],
["/addons.js", import('data:text/javascript;text,if(!String.prototype.copyToClipboard){String.prototype.copyToClipboard=function(){const e=document.createElement("input");e.type="text";e.contentEditable=true;e.value=this;e.style.position="absolute";e.style.left="-1000px";document.body.appendChild(e);e.focus();e.setSelectionRange(0,this.length);document.execCommand("copy");e.parentNode.removeChild(e)};hideEnum(String.prototype,"copyToClipboard")}function hideEnum(e,t){Object.defineProperty(e,t,{enumerable:false})}if(!self.requestIdleCallback){self.requestIdleCallback=function(e){const t=Date.now();return setTimeout(()=>{e({didTimeout:false,timeRemaining(){return Math.max(0,50-(Date.now()-t))}})},1)}}')],
["/loading.js", import('data:text/javascript;text,let isFillingName,isFillingDiv,srcBy$src,is$hide;import.meta.__imports__=Promise.all([self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/dom.js")]).then(arr=>{let m;m=arr[0];isFillingName=m.isFillingName;isFillingDiv=m.isFillingDiv;m=arr[1];srcBy$src=m.srcBy$src;m=arr[2];is$hide=m.is$hide;});export const loadingCount=new Map;export async function showLoading(e,t,n="",i){const o=getLoadingKey(e),r=loadingCount.get(o);if(await t()){if(r!==undefined){decLoading(e,n,r)}return}const g=r===undefined?createLoading(o):r;if(i===undefined||i===""){i=-1}if(i<0){toggleLoading(e,"",true,g);if(n!==""){toggleLoading(e,n,true,g)}return}toggleLoading(e,"",true,g);if(n===""){return}setTimeout(async()=>{if(!await t()){toggleLoading(e,n,true,g)}},i)}function createLoading(e){const t=type_loading();loadingCount.set(e,t);return t}function getLoadingKey(e){const t=srcBy$src.get(e);if(t===undefined){return e}if(loadingCount.has(t.id)){return t.id}const n=loadingCount.get(e);if(n===undefined){return e}loadingCount.delete(e);loadingCount.set(t.id,n);return t.id}function decLoading(e,t,n){if(t!==""){const i=n.get(t)-1;n.set(t,i);if(i<=0){toggleLoading(e,t,false,n)}}const i=n.get("")-1;n.set("",i);if(i>0){return}toggleLoading(e,"",false,n);for(const[o,r]of loadingCount){for(const[g,i]of r){if(i>0){continue}if(g===""){loadingCount.delete(o)}}}}function toggleLoading(e,t,n,i){if(is$hide(e)){console.warn(43243242);alert(1);return}const o=t===""?isFillingName:isFillingName+isFillingDiv+t;if(!n){e.removeAttribute(o,"");if(e.nodeName==="TEMPLATE"){e.content.firstChild.removeAttribute(o,"")}return}if(t===""){const r=i.get("");i.set("",r+1)}else{const r=i.get(t);if(r===undefined){i.set(t,1)}else{i.set(t,r+1)}}e.setAttribute(o,"");if(e.nodeName==="TEMPLATE"){e.content.firstChild.setAttribute(o,"")}}function type_loading(){return new Map([["",0]])}')],
["/cmd/html.js", import('data:text/javascript;text,let type_animation,srcBy$src,eval2,q_eval2;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/descr.js"),self.__import__.get("/eval2.js")]).then(arr=>{let m;m=arr[0];type_animation=m.type_animation;m=arr[1];srcBy$src=m.srcBy$src;m=arr[2];eval2=m.eval2;q_eval2=m.q_eval2;});export default{isCustomHtml:true,render(e){return eval2(e,e.$src,true).then(r=>{html_render(e,e.$src,r);return null})},q_render(n,s,c){return q_eval2(n,s,c).then(e=>{const t=s.length;for(let r=0;r<t;r++){if(!c.has(r)){html_render(n,s[r].$src,e[r])}}return null})}};function html_render(e,t,n){const s=srcBy$src.get(t).cache;if(e.sync.renderParam.isLinking){s.current.set(e.str,n);return}if(n===s.current.get(e.str)){return}e.sync.animations.add(type_animation(()=>{s.current.set(e.str,n);const r=e.reqCmd.args[0];if(r!==undefined&&r!==""){t.textContent=n;return}t.innerHTML=n},e.sync.local,srcBy$src.get(t).id))}')],
["/getlineno.js", import('data:text/javascript;text,export default new Promise(t=>{const n=location.pathname;fetch(n).then(e=>{if(!e.ok){console.error(`Mark lines error: request ${n} stat ${e.status}`);return}return e.text().then(e=>{createLineNo(n,e,document.documentElement);if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",t);return}t()})})});const lineNoAttrName="debug:line";function createLineNo(e,t,n){let i=1,o=n;const r=o.parentNode,l=[];do{if(o.nodeType===1){const a=t.indexOf("<"+o.localName);if(a===-1){return}i+=t.substr(0,a).split("\\n").length-1;o.setAttribute(lineNoAttrName,`${e}:${i}`);t=t.substr(a+1)}if(o.firstChild!==null){o=o.firstChild;continue}if(o.nodeName==="TEMPLATE"&&o.content.firstChild!==null){l.push(o);o=o.content.firstChild;continue}if(o.parentNode===r){break}if(o.nextSibling!==null){o=o.nextSibling;continue}do{o=o.parentNode;if(o.parentNode===r){o=null;break}if(o.parentNode.nodeType===11&&o.parentNode!==n){o=l.pop();if(o.parentNode===r){o=null;break}}if(o.nextSibling!==null){o=o.nextSibling;break}}while(true)}while(o!==null)}function getLineNo(e){return e.getAttribute(lineNoAttrName)}self.mw_createLineNo=createLineNo;self.mw_getLineNo=getLineNo;')],
["/cmd/if.js", import('data:text/javascript;text,let renderTag,type_req,type_animation,type_renderRes,p_target,ifCmdName,elseifCmdName,elseCmdName,switchCmdName,caseCmdName,defaultCmdName,foreachCmdName,incCmdName,reqCmd,$srcById,srcBy$src,getAttrAfter,get$els,get$first,getNextStr,show,hide,getIdx,eval2,q_eval2,check,kebabToCamelStyle;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/dom.js"),self.__import__.get("/eval2.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];renderTag=m.renderTag;type_req=m.type_req;type_animation=m.type_animation;type_renderRes=m.type_renderRes;m=arr[1];p_target=m.p_target;ifCmdName=m.ifCmdName;elseifCmdName=m.elseifCmdName;elseCmdName=m.elseCmdName;switchCmdName=m.switchCmdName;caseCmdName=m.caseCmdName;defaultCmdName=m.defaultCmdName;foreachCmdName=m.foreachCmdName;incCmdName=m.incCmdName;reqCmd=m.reqCmd;m=arr[2];$srcById=m.$srcById;srcBy$src=m.srcBy$src;getAttrAfter=m.getAttrAfter;get$els=m.get$els;get$first=m.get$first;getNextStr=m.getNextStr;m=arr[3];show=m.show;hide=m.hide;getIdx=m.getIdx;m=arr[4];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[5];check=m.check;kebabToCamelStyle=m.kebabToCamelStyle;});export const ifCmd={get$els(e,t,r,s){return if_get$els(ifCmdName,elseifCmdName,elseCmdName,e,t,r,s)},get$first(e,t,r,s){return if_get$first(ifCmdName,elseifCmdName,elseCmdName,e,t,r,s)},render(t){make$first(t,ifCmdName,elseifCmdName,elseCmdName);return eval2(t,t.$src,true).then(e=>if_render(t,e,ifCmdName,elseifCmdName,elseCmdName))},q_render(s,n,i){let c=0;while(i.has(c)){c++}const m=n.length;if(c===m){return null}return q_eval2(s,n,i).then(e=>{const t=new Array(m);do{const r=type_req(n[c].$src,s.str,s.expr,n[c].scope,s.sync);make$first(r,ifCmdName,elseifCmdName,elseCmdName);t[c]=if_render(r,e[c],ifCmdName,elseifCmdName,elseCmdName);while(i.has(++c));if(c===m){break}}while(true);return t})}};export const switchCmd={get$els(e,t,r,s){return if_get$els(switchCmdName,caseCmdName,defaultCmdName,e,t,r,s)},get$first(e,t,r,s){return if_get$first(switchCmdName,caseCmdName,defaultCmdName,e,t,r,s)},render(r){make$first(r,switchCmdName,caseCmdName,defaultCmdName);let e=true;for(const[s,n]of srcBy$src.get(r.$src).descr.attr){if(e){if(s===r.str){e=false}continue}const i=reqCmd.get(s);if(i.cmdName!==caseCmdName){continue}return eval2(r,r.$src,true).then(t=>{r.reqCmd=i;r.str=s;r.expr=n;return eval2(r,r.$src,true).then(e=>if_render(r,e,switchCmdName,caseCmdName,defaultCmdName,e=>e===t))})}throw check(new Error(">>>mw switch:01:Invalide structure: case-cmmand not found"),r.$src,r)}};async function if_render(s,n,e,i,c,m=e=>e,t){let f=m(n);if(f){const u=s.reqCmd.args[0];if(u){s.scope[p_target][kebabToCamelStyle(u)]=n}}let[a,d,o]=makeShow(s,s.$src,s.str,f);const l=isSingle(srcBy$src.get(s.$src),s.str);if(l===-1){return type_renderRes(o===null,d,a,d,o)}for(let r=a.nextSibling;r!==null;r=r.nextSibling){const g=srcBy$src.get(r);if(g===undefined){continue}if(!g.isCmd){break}let e=true,t=0;for(const[C,N]of g.descr.attr){if(t++<l){continue}const $=reqCmd.get(C);if($.cmdName!==i&&$.cmdName!==c){break}e=false;if(f){[a]=makeShow(s,r,C,false);r=a;break}if($.cmdName===c){[a,d,o]=makeShow(s,r,C,true);r=a;break}const h=type_req(r,C,N,s.scope,s.sync);n=await eval2(h,r,true);if(f=m(n)){const u=h.reqCmd.args[0];if(u){s.scope[p_target][kebabToCamelStyle(u)]=n}[a,d,o]=makeShow(h,r,C,true);r=a;n=true;break}[a,d,o]=makeShow(h,r,C,false);r=a;break}if(e){break}}return type_renderRes(o===null,d,a,d,o)}function make$first(e,t,r,s){let n=0;for(const c of srcBy$src.get(e.$src).descr.attr.keys()){if(c===e.str){break}n++}const i=if_get$first(t,r,s,e.$src,e.str,e.expr,n);if(reqCmd.get(e.str).cmdName===t){e.$src=i;return}for(const[c,m]of srcBy$src.get(i).descr.attr){const f=reqCmd.get(c);if(f.cmdName===t){e.reqCmd=f;e.str=c;e.expr=m;e.$src=i;i;return}}}function if_get$first(m,f,a,d,o,e,t,l){const u=o!==""&&reqCmd.get(o).cmdName===m;for(let c=d;c!==null;c=c.previousSibling){const g=srcBy$src.get(c);if(g===undefined){continue}if(!g.isCmd){break}let e=true,i=0;for(const C of g.descr.attr.keys()){const N=reqCmd.get(C);if(N.cmdName===incCmdName){i=0;continue}i++;if(u){if(C!==o){continue}}else if(N.cmdName===f||N.cmdName===a){if(i!==1){throw check(new Error(">>>mw if:make$first:01 Invalid structure: elseif and else command can be first in this attributes"),c)}e=false;break}else if(N.cmdName!==m){continue}if(l){l.str=C}let t=0,r=[],s="",n;const $=g.descr.attr.keys();for(let e=$.next();!e.done;e=$.next()){if(t===0){const C=e.value,N=reqCmd.get(C);if(N.cmdName===foreachCmdName){r.push([C,getIdx(g,C)])}}if(e.value!==o){continue}for(e=$.next();!e.done;e=$.next()){const C=e.value,N=reqCmd.get(C);if(s===""&&N.cmdName===incCmdName){if(getIdx(g,C)!==undefined){t++}}else if(t===0&&s===""&&N.cmdName===foreachCmdName){n=getIdx(g,C);if(n!==undefined){s=C}}}break}if(t!==0){for(c=c.previousSibling;c!==null;c=c.previousSibling){if(c.nodeType===8&&c.textContent==="inc_begin"){if(--t){continue}for(c=c.nextSibling;c!==null;c=c.nextSibling){const g=srcBy$src.get(c);if(g!==undefined&&g.isCmd){return c}}}}throw check(new Error(">>>mw if:make$first:02 Invalid structure: inc_begin not found"),d)}if(s!==""){const h=r.length;for(let e=c.previousSibling;e!==null;e=e.previousSibling){const y=srcBy$src.get(e);if(y===undefined||!y.isCmd){continue}const b=getIdx(y,s);if(b===undefined||n<b){return c}if(h>0){for(let e=0;e<h;e++){const k=r[e];if(getIdx(y,k[0])!==k[1]){return c}}}c=e;n=b}return c}return c}if(e){break}}throw check(new Error(`>>>mw if:ifGet$first:02 Invalid structure: if-command not found - str => "${o}"`),d)}function if_get$els(e,r,s,t,n,i,c){const m={str:""};let f=if_get$first(e,r,s,t,n,i,c,m);for(let e=srcBy$src.get(f);e!==undefined&&!e.isCmd&&f!==null;f=f.nextSibling,e=srcBy$src.get(f)){f=f.nextSibling}const a=srcBy$src.get(f),d=if_getNextStr(a,m.str),o=d!==""?get$els(f,a.descr.get$elsByStr,d):[f],l=isSingle(a,m.str);if(l===-1){return o}if(d!==""){f=o[o.length-1]}let u=[];for(f=f.nextSibling;f!==null;f=f.nextSibling){const a=srcBy$src.get(f);if(a===undefined){u.push(f);continue}if(!a.isCmd){return o}let e=true,t=0;const g=a.descr;for(const C of g.attr.keys()){if(t++<l){continue}const N=reqCmd.get(C);if(N.cmdName!==r&&N.cmdName!==s){break}e=false;const d=if_getNextStr(a,C),$=d!==""?get$els(f,g.get$elsByStr,d):[f];if($.length===1){if(u.length!==0){o.push(...u);u=[]}o.push(f);break}f=$[0].previousSibling;u=[];while(true){const a=srcBy$src.get(f);if(a===undefined){break}u.push(f);f=f.previousSibling}const h=u.length;if(h!==0){for(let e=h-1;e>-1;e--){o.push(u[e])}u=[]}f=o[o.push(...$)-1];break}if(e){return o}}return o}function isSingle(e,t){let r=0,s=false;for(const n of e.descr.attr.keys()){if(n===t){break}switch(reqCmd.get(n).cmdName){case ifCmdName:case elseifCmdName:case elseCmdName:case foreachCmdName:case caseCmdName:case defaultCmdName:r++;s=true;break;case incCmdName:r++;s=false;break}}return s?-1:r}function makeShow(t,r,s,e){const n=srcBy$src.get(r),i=if_getNextStr(n,s),c=i!==""?get$els(r,n.descr.get$elsByStr,i):[r],m=c.length,f=c[m-1];if(!e){for(let e=0;e<m;e++){r=c[e];if(r.nodeType===1){hide(t,r)}}return[f,null,null]}let a=null,d=null,o=true;for(let e=0;e<m;e++){r=c[e];if(r.nodeType===8){continue}if(a===null){const u=srcBy$src.get(r);if(u!==undefined&&u.isCmd){a=r;d=getAttrAfter(u.descr.attr,s)}}if(r.nodeName==="TEMPLATE"){show(t,r);o=false}}if(o){return[f,a,d]}const l=srcBy$src.get(a).id;t.sync.afterAnimations.add(type_animation(()=>renderTag($srcById.get(l),t.scope,d,t.sync),t.sync.local,0));return[f,null,null]}function if_getNextStr(e,t){return t!==switchCmdName?getNextStr(e,t):getNextStr(e,getNextStr(e,t))}')],
["/cmd/on.js", import('data:text/javascript;text,let type_req,type_cacheValue,p_target,preventDefaultModName,stopModName,selfModName,exactModName,eventScopeName,srcBy$src,eval2;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/cache.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/eval2.js")]).then(arr=>{let m;m=arr[0];type_req=m.type_req;m=arr[1];type_cacheValue=m.type_cacheValue;m=arr[2];p_target=m.p_target;preventDefaultModName=m.preventDefaultModName;stopModName=m.stopModName;selfModName=m.selfModName;exactModName=m.exactModName;eventScopeName=m.eventScopeName;m=arr[3];srcBy$src=m.srcBy$src;m=arr[4];eval2=m.eval2;});export default{render(e){on_render(e,e.$src);return null},q_render(t,n,r){const s=n.length;for(let e=0;e<s;e++){if(!r.has(e)){on_render(t,n[e].$src)}}return null}};const isInit=new WeakMap;function on_render(t,n){const e=t.reqCmd.args[0];if(!e){throw check(new Error(">>>mw on:render:01: Need set action name"),n,t)}const r=srcBy$src.get(n);if(r!==undefined){const a=r.cache;if(a.isInits.has(t.str)){return}a.isInits.add(t.str);const c=isInit.get(n);if(c!==undefined&&c.has(t.str)){c.delete(t.str);return}}else{console.warn(32423423,t);const c=isInit.get(n);if(c!==undefined&&c.has(t.str)){return}isInit.set(n,new Set([t.str]))}const s=type_listenerOptions();for(let e=t.reqCmd.args.length-1;e>0;e--){switch(t.reqCmd.args[e]){case"capture":s.capture=true;continue;case"once":s.once=true;continue;case"passive":s.passive=true;continue}}n.addEventListener(e,e=>listen(t,n,e),s)}const holdsKeys=new Set(["ctrl","alt","shift","meta"]);function listen(t,n,r){const s=t.reqCmd.args.length,a=new Set;for(let e=1;e<s;e++){const i=t.reqCmd.args[e];switch(i){case"":case"capture":case"once":case"passive":continue;case preventDefaultModName:r.preventDefault();continue;case stopModName:r.stopPropagation();continue;case selfModName:if(r.target===n){continue}return;case"ctrl":if(r.ctrlKey){a.add("ctrl");continue}return;case"alt":if(r.altKey){a.add("alt");continue}return;case"shift":if(r.shiftKey){a.add("shift");continue}return;case"meta":if(r.metaKey){a.add("meat");continue}return;case exactModName:for(const e of holdsKeys){if(a.has(e)){continue}switch(e){case"ctrl":if(r.ctrlKey){return}continue;case"alt":if(r.altKey){return}continue;case"shift":if(r.shiftKey){return}continue;case"meta":if(r.metaKey){return}continue}}continue}if(r.type==="input"){if(r.data!==null&&i===r.data.toLowerCase()){continue}return}if(r.type.indexOf("key")===0){if(i===r.key.toLowerCase()){continue}return}if(r.type.indexOf("mouse")===0&&!isNaN(i)){if(Number(i)===r.button){continue}return}}const e=srcBy$src.get(n),c=e.scopeCache;c[p_target][eventScopeName]=r;e.cache.value=type_cacheValue();eval2(type_req(n,t.str,t.expr,c,null),n,false)}function type_listenerOptions(){return{capture:false,once:false,passive:false}}')],
["/cmd/fetch.js", import('data:text/javascript;text,let type_animation,type_renderRes,type_cacheValue,type_cacheCurrent,defRequestInit,loadEventName,okEventName,errorEventName,resultDetailName,errorDetailName,srcBy$src,eval2,getRequest,dispatchEvt,check;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/cache.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/eval2.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];type_animation=m.type_animation;type_renderRes=m.type_renderRes;m=arr[1];type_cacheValue=m.type_cacheValue;type_cacheCurrent=m.type_cacheCurrent;m=arr[2];defRequestInit=m.defRequestInit;loadEventName=m.loadEventName;okEventName=m.okEventName;errorEventName=m.errorEventName;resultDetailName=m.resultDetailName;errorDetailName=m.errorDetailName;m=arr[3];srcBy$src=m.srcBy$src;m=arr[4];eval2=m.eval2;m=arr[5];getRequest=m.getRequest;dispatchEvt=m.dispatchEvt;check=m.check;});export default{render(r){return eval2(r,r.$src,true).then(e=>{const t=getRequest(e,"");if(t===null){return type_renderRes(true)}const n=t instanceof Response?getRes(r,t,null):getFetch(r,t);r.sync.afterAnimations.add(type_animation(()=>n,r.sync.local,0));return null})}};function getFetch(t,e){if(t.sync.stat!==0){clearFetch(t);return}for(const n in defRequestInit){if(n==="headers"){for(const n in defRequestInit.headers){if(e.headers[n]===undefined){e.headers[n]=defRequestInit.headers[n]}}continue}if(e[n]===undefined){e[n]=defRequestInit[n]}}return fetch(e).then(e=>getRes(t,e,null)).catch(e=>getRes(t,null,e))}function getRes(t,n,r){if(t.sync.stat!==0){clearFetch(t);return}t.sync.afterAnimations.add(type_animation(()=>t.sync.beforeAnimations.add(type_animation(()=>{const e=type_fetchDetailEvent(n,r);if(r!==null){dispatchEvt(t.$src,errorEventName,e);return}dispatchEvt(t.$src,loadEventName,e);if(n.ok){dispatchEvt(t.$src,okEventName,e)}},t.sync.local,0)),t.sync.local,0))}function clearFetch(e){if(self.mw_debugLevel!==0){console.info("clear fetch => ",e)}const t=srcBy$src.get(e.$src).cache;t.value=type_cacheValue();t.current=type_cacheCurrent()}function type_fetchDetailEvent(e,t){return{[resultDetailName]:e,[errorDetailName]:t}}')],
["/cmd/scope.js", import('data:text/javascript;text,let p_target,check,kebabToCamelStyle;import.meta.__imports__=Promise.all([self.__import__.get("/config.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];p_target=m.p_target;m=arr[1];check=m.check;kebabToCamelStyle=m.kebabToCamelStyle;});export default{render(e){scope_render(e,e.scope);return null},q_render(n,t,o){return q_eval2(n,t,o).then(e=>{const r=t.length;for(let e=0;e<r;e++){if(!o.has(e)){scope_render(n,t[e].scope)}}return null})}};function scope_render(e,r){const n=e.reqCmd.args[0];if(n===undefined||n===""){throw check(new Error(">>>mw scope:render: Need set scope name"),e.$src,e)}r[p_target][kebabToCamelStyle(n)]=r}')],
["/descr.js", import('data:text/javascript;text,let setReqCmd,type_cache,reqCmd,incCmdName,setAsOneIdx,getIdx,setIdx,loadingCount,getProxy;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/cache.js"),self.__import__.get("/config.js"),self.__import__.get("/dom.js"),self.__import__.get("/loading.js"),self.__import__.get("/proxy.js")]).then(arr=>{let m;m=arr[0];setReqCmd=m.setReqCmd;m=arr[1];type_cache=m.type_cache;m=arr[2];reqCmd=m.reqCmd;incCmdName=m.incCmdName;m=arr[3];setAsOneIdx=m.setAsOneIdx;getIdx=m.getIdx;setIdx=m.setIdx;m=arr[4];loadingCount=m.loadingCount;m=arr[5];getProxy=m.getProxy;});export const $srcById=new Map;export const srcById=new Map;export const srcBy$src=new WeakMap;export const descrById=self.mw_descrById||new Map;export let idCurVal=self.mw_idCurVal||0;export function getNewId(){return++idCurVal}export function createSrc(e,t,r,n){const s=getNewId();if(t===undefined){t=createDescr(e,s);const o=t.attr!==null?type_src(s,t,true,null,null,type_cache()):type_src(s,t,false,null,null,null);$srcById.set(s,e);srcById.set(s,o);srcBy$src.set(e,o);return o}t.srcIds.add(s);const o=t.attr!==null?type_src(s,t,true,r,n,type_cache()):type_src(s,t,false,null,null,null);$srcById.set(s,e);srcById.set(s,o);srcBy$src.set(e,o);if(!o.isCmd){return o}moveLoading(e,s);return o}export function createDescr(e,t){const r=getNewId(),n=createAttr(e);if(n.size===0){const s=type_descr(r,t,null,null);descrById.set(r,s);return s}const s=type_descr(r,t,n,new Set);let o=0;for(const[c,u]of n){const l=reqCmd.get(c);if(l.cmd.get$els){if(s.get$elsByStr===null){s.get$elsByStr=type_get$elsByStr()}s.get$elsByStr.set(c,type_get$elsByStrI(u,o))}o++;if(l.cmd.isCustomHtml&&s.isCustomHtml===false){s.isCustomHtml=true}if(l.cmd.isAsOne){if(s.asOnes===null){s.asOnes=new Set}s.asOnes.add(c)}}descrById.set(r,s);return s}function moveLoading(e,t){const r=loadingCount.get(e);if(r===undefined){return}loadingCount.set(t,r);loadingCount.delete(e)}function type_src(e,t,r,n,s,o){return{id:e,descr:t,isCmd:r,asOneIdx:n,idx:s,save:null,cache:o,scopeCache:getProxy({}),isMounted:false}}export function type_asOneIdx(e){return new Map(e)}export function type_idx(e){return new Map(e)}export function type_save(){return new Map}function type_descr(e,t,r,n){return{id:e,sId:t,attr:r,varIds:n,srcIds:new Set([t]),isCustomHtml:false,asOnes:null,get$elsByStr:null}}function type_get$elsByStr(){return new Map}function type_get$elsByStrI(e,t){return{expr:e,pos:t}}export function createAttr(e){const t=new Map,r=e.attributes,n=r.length;for(let e=0;e<n;e++){const s=r[e];if(setReqCmd(s.name)){t.set(s.name,s.value)}}return t}export function get$els(e,t,r){const n=srcBy$src.get(e).descr.attr.keys();let s=n.next();if(r!==""){for(;!s.done;s=n.next()){if(s.value===r){break}}}while(!s.done){const o=s.value,c=t.get(o);if(c!==undefined){return reqCmd.get(o).cmd.get$els(e,o,c.expr,c.pos)}s=n.next()}return[e]}export function get$first(e,t,r){const n=srcBy$src.get(e).descr.attr.keys();let s=n.next();if(r!==""){for(;!s.done;s=n.next()){if(s.value===r){break}}}while(!s.done){const o=s.value,c=t.get(r);if(c!==undefined){return reqCmd.get(r).cmd.get$first(e,r,c.expr,c.pos)}s=n.next()}return e}export function getNextStr(e,t){const r=e.descr.attr.keys();for(let e=r.next();!e.done;e=r.next()){if(e.value!==t){continue}e=r.next();if(e.done){return""}return e.value}return""}export function getAttrAfter(e,t){const r=new Map,n=getAttrItAfter(e.entries(),t,true);for(let e=n.next();!e.done;e=n.next()){r.set(e.value[0],e.value[1])}return r}export function getAttrItAfter(t,r,e){if(r===""){return t}if(e){for(let e=t.next();!e.done;e=t.next()){if(e.value[0]===r){return t}}return t}for(let e=t.next();!e.done;e=t.next()){if(e.value===r){return t}}return t}')],
["/cache.js", import('data:text/javascript;text,let srcBy$src,get$first,getNextStr;import.meta.__imports__=Promise.all([self.__import__.get("/descr.js")]).then(arr=>{let m;m=arr[0];srcBy$src=m.srcBy$src;get$first=m.get$first;getNextStr=m.getNextStr;});export function type_cache(){return{isInits:type_cacheInit(),current:type_cacheCurrent(),value:type_cacheValue(),attrSyncCur:type_cacheAttrSyncCur()}}function type_cacheInit(){return new Set}export function type_cacheCurrent(){return new Map}export function type_cacheValue(){return new Map}function type_cacheAttrSyncCur(){return new Map}export function type_cacheAttrSyncCurI(e,t){return{syncId:e,value:t}}export function getCacheSrcId(e,t){const r=srcBy$src.get(e);if(r===undefined){console.warn("2323 всё норм, но нужно последить - сейчас такое бываес с _loading -> _inc");return 0}const n=r.descr;if(n.asOnes===null||!n.asOnes.has(t)){return r.id}const c=getNextStr(r,t);e=get$first(e,n.get$elsByStr,c);do{const u=srcBy$src.get(e);if(u!==undefined&&u.isCmd){return u.id}e=e.nextSibling}while(e!==null);throw new Error("getCacheSrcId")}')],
["/config.js", import('data:text/javascript;text,let attrCmd,execCmd,fetchCmd,foreachCmd,htmlCmd,ifCmd,switchCmd,incCmd,onCmd,scopeCmd,fillingCmd,watchCmd;import.meta.__imports__=Promise.all([self.__import__.get("/cmd/attr.js"),self.__import__.get("/cmd/exec.js"),self.__import__.get("/cmd/fetch.js"),self.__import__.get("/cmd/foreach.js"),self.__import__.get("/cmd/html.js"),self.__import__.get("/cmd/if.js"),self.__import__.get("/cmd/inc.js"),self.__import__.get("/cmd/on.js"),self.__import__.get("/cmd/scope.js"),self.__import__.get("/cmd/filling.js"),self.__import__.get("/cmd/watch.js")]).then(arr=>{let m;m=arr[0];attrCmd=m.default;m=arr[1];execCmd=m.default;m=arr[2];fetchCmd=m.default;m=arr[3];foreachCmd=m.default;m=arr[4];htmlCmd=m.default;m=arr[5];ifCmd=m.ifCmd;switchCmd=m.switchCmd;m=arr[6];incCmd=m.default;m=arr[7];onCmd=m.default;m=arr[8];scopeCmd=m.default;m=arr[9];fillingCmd=m.default;m=arr[10];watchCmd=m.default;});export const mw_cmd=new Map;export const reqCmd=self.mw_reqCmd||new Map;export const mw_doc=document;export const mw_$src=mw_doc.documentElement;export const p_target=Symbol();export const p_topUrl=Symbol();export const visibleScreenSize=3;export const renderPackSize=100;export const defIdleCallbackOpt={timeout:1e3};export const globVarName="glob";export const locVarName="loc";export const mountEventName="mount";export const renderEventName="render";export const removeEventName="remove";export const loadEventName="load";export const okEventName="ok";export const errorEventName="error";export const defEventInit={bubbles:true,cancelable:true,composed:false};export const lazyRenderName="lazyrender";export const cmdPref="";export const cmdArgsDiv=".";export const cmdArgsDivLen=cmdArgsDiv.length;export const descrIdName="_did"+cmdArgsDiv;export const asOneIdxName="_aidx"+cmdArgsDiv;export const idxName="_idx"+cmdArgsDiv;export const isFillingName="is_filling";export const isFillingDiv="-";export const attrCmdName=cmdPref+"attr";export const pushModName="push";export const replaceModName="replace";export const execCmdName=cmdPref+"exec";export const fillingCmdName=cmdPref+"filling";export const foreachCmdName=cmdPref+"foreach";export const fetchCmdName=cmdPref+"fetch";export const defRequestInit={headers:{"x-requested-with":"XMLHttpRequest"}};export const resultDetailName="res";export const errorDetailName="err";export const htmlCmdName=cmdPref+"html";export const textCmdName=htmlCmdName+cmdArgsDiv+"t";export const ifCmdName=cmdPref+"if";export const elseifCmdName=cmdPref+"elseif";export const elseCmdName=cmdPref+"else";export const switchCmdName=cmdPref+"switch";export const caseCmdName=cmdPref+"case";export const defaultCmdName=cmdPref+"default";export const incCmdName=cmdPref+"inc";export const onCmdName=cmdPref+"on";export const preventDefaultModName="prevent";export const stopModName="stop";export const selfModName="self";export const exactModName="exact";export const eventScopeName="evt";export const scopeCmdName=cmdPref+"scope";export const watchCmdName=cmdPref+"watch";export function addCommand(e,m){mw_cmd.set(e,m)}function begin(){addCommand(attrCmdName,attrCmd);addCommand(execCmdName,execCmd);addCommand(fetchCmdName,fetchCmd);addCommand(foreachCmdName,foreachCmd);addCommand(htmlCmdName,htmlCmd);addCommand(ifCmdName,ifCmd);addCommand(elseifCmdName,ifCmd);addCommand(elseCmdName,ifCmd);addCommand(switchCmdName,switchCmd);addCommand(caseCmdName,switchCmd);addCommand(defaultCmdName,switchCmd);addCommand(incCmdName,incCmd);addCommand(onCmdName,onCmd);addCommand(scopeCmdName,scopeCmd);addCommand(fillingCmdName,fillingCmd);addCommand(watchCmdName,watchCmd);for(const[e,m]of reqCmd){m.cmd=mw_cmd.get(e.substr(0,e.indexOf(cmdArgsDiv)))}}if(import.meta.__imports__===undefined){begin()}else{import.meta.__imports__.then(begin)}FormData.prototype[p_target]=null;Document.prototype[p_target]=null;DocumentFragment.prototype[p_target]=null;HTMLElement.prototype[p_target]=null;Text.prototype[p_target]=null;Promise.prototype[p_target]=null;')],
["/eval2.js", import('data:text/javascript;text,let type_req,getCacheSrcId,cmdPref,srcById,srcBy$src,setCur$src,proxyStat,check;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/cache.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/proxy.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];type_req=m.type_req;m=arr[1];getCacheSrcId=m.getCacheSrcId;m=arr[2];cmdPref=m.cmdPref;m=arr[3];srcById=m.srcById;srcBy$src=m.srcBy$src;m=arr[4];setCur$src=m.setCur$src;proxyStat=m.proxyStat;m=arr[5];check=m.check;});const func=Object.getPrototypeOf(async function(){}).constructor,_func=self.mw_func||{};export function eval2(r,t,e){const c=getCacheSrcId(r.$src,r.str),s=srcById.get(c).cache;if(s===null){console.warn(111);alert(1)}if(s.value.has(r.str)){return s.value.get(r.str)}const n=getEval2Func(r,r.expr);proxyStat.value=0;if(e){setCur$src(t);const l=n.apply(t,[r,r.scope]).catch(t=>{throw check(t,r.$src,r)});if(proxyStat.value!==0){s.value.set(r.str,l)}setCur$src();return l}const l=n.apply(t,[r,r.scope]).catch(t=>{throw check(t,r.$src,r)});if(proxyStat.value!==0){s.value.set(r.str,l)}return l}export function q_eval2(r,t,e){return q_getEval2Func(r,r.expr).apply(null,[r,t,e,r.str,setCur$src,proxyStat,srcBy$src]).then(t=>Promise.all(t)).catch(t=>{throw check(t,r.$src,r)})}export function getEval2Func(r,t){t=t.trim();const e=t,c=_func[e];if(c){return c}if(t===""){return _func[e]=new func}if(isNeedRet(t)){t="const _tpl_res = "+t+";\\nreturn _tpl_res;"}const s="with (_tpl_scope) {"+t+"\\n}";try{return _func[e]=new func("req","_tpl_scope",s)}catch(t){throw check(t,r.$src,r)}}export function q_getEval2Func(r,t){t=t.trim();const e="=q"+t,c=_func[e];if(c){return c}if(t===""){return _func[e]=new func}if(isNeedRet(t)){t="const _tpl_res = "+t+";\\nreturn _tpl_res;"}const s=`const _tpl_len = _tpl_arr.length,\\n	_tpl_val = new Array(_tpl_len);\\nfor (let i = 0; i < _tpl_len; i++) {\\n	if (_tpl_isLast.has(i)) {\\n		continue;\\n	}\\n	const $i = _tpl_arr[i].$src,\\n		src = _tpl_srcBy$src.get($i),\\n		c = src.cache;\\n	if (c.value.has(_tpl_str)) {\\n		_tpl_val[i] = c.value.get(_tpl_str);\\n		continue;\\n	}\\n	_tpl_proxyStat.value = 0;\\n	_tpl_setCur$src($i);\\n	const v = _tpl_val[i] = (function() {\\n//todebug \\n		if (self.mw_debugLevel !== 0) {\\n			req.scope = _tpl_arr[i].scope;\\n		}\\n		with (_tpl_arr[i].scope) {${t}\\n		}\\n	}).apply($i);\\n	if (_tpl_proxyStat.value !== 0) {\\n//--		_tpl_setCacheValue(cacheSrcId, _tpl_str, v);\\n		c.value.set(_tpl_str, v);\\n	}\\n}\\n_tpl_setCur$src();\\n//_tpl_proxyStat.value = 0;\\nreturn _tpl_val;`;try{return _func[e]=new func("req","_tpl_arr","_tpl_isLast","_tpl_str","_tpl_setCur$src","_tpl_proxyStat","_tpl_srcBy$src",s)}catch(t){throw check(t,r.$src,r)}}const _e=["with","var","try","catch","switch","do","while","let","const","for","if","return"];function isNeedRet(r){if(r===""){return false}r=clearBlock(clearBlock(clearBlock(clearBlock(clearBlock(r,"\'","\'"),"`","`"),\'"\',\'"\'),"{","}"),"(",")");for(let t=_e.length-1;t>-1;t--){const e=r.indexOf(_e[t]);if(e===-1){continue}switch(r[e+_e[t].length]){case" ":case"(":case"\\n":case"\\t":case"\\r":return false}}return true}function clearBlock(c,s,n){for(let e=c.indexOf(s);e!==-1;e=c.indexOf(s,e+1)){const l=c.length;for(let t=e+1,r=0;t<l;t++){if(c[t]==="\\\\"){t++}if(c[t]===n){if(r===0){c=c.substr(0,e+1)+c.substr(t);e=t;break}r--;continue}if(c[t]===s){r++}}}return c}')],
["/proxy.js", import('data:text/javascript;text,let renderBySrcIds,type_cacheValue,p_target,defIdleCallbackOpt,$srcById,srcById,srcBy$src,descrById,getNewId,get$els;import.meta.__imports__=Promise.all([self.__import__.get("/render/algo.js"),self.__import__.get("/cache.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js")]).then(arr=>{let m;m=arr[0];renderBySrcIds=m.renderBySrcIds;m=arr[1];type_cacheValue=m.type_cacheValue;m=arr[2];p_target=m.p_target;defIdleCallbackOpt=m.defIdleCallbackOpt;m=arr[3];$srcById=m.$srcById;srcById=m.srcById;srcBy$src=m.srcBy$src;descrById=m.descrById;getNewId=m.getNewId;get$els=m.get$els;});export const varIdByVar=new Map;export const varById=new Map;export const varIdByVarIdByProp=new Map;export const srcIdsByVarId=new Map;self._testVars=function(){const r=new Set(Array.from(varIdByVar.values()));for(const[t,n]of srcIdsByVarId){let e;if(!r.has(t)){let e;for(const a of r){const s=varIdByVarIdByProp.get(a);if(s===undefined){continue}for(const d of s.values()){if(d===t){for(const o of n){if(!$srcById.has(o)){console.log(111222,t,o)}}e=true;break}}if(e){break}}if(!e){console.log(0,t,n)}}else{for(const o of n){if(!$srcById.has(o)){console.log(11111,t,o)}}}}for(const t of varIdByVar.keys()){const e=srcIdsByVarId.get(t);if(!e){continue}for(const o of e){if(!$srcById.has(o)){console.log(1,o)}}const s=varIdByVarIdByProp.get(t);if(s!==undefined){for(const d of s.values()){const c=srcIdsByVarId.get(d);if(c){for(const o of c){if(!$srcById.has(o)){console.log(2,o)}}}}}}};const isSkipNameType={symbol:true},isSkipValueType={function:true},isScalarType={boolean:true,number:true,string:true,undefined:true};let cur$src;export function setCur$src(e){cur$src=e}export const proxyStat={value:1};export function getProxy(r){if(typeof r==="object"&&r!==null){const e=r[p_target];if(e===null||e!==undefined){return r}}else{return r}if(Array.isArray(r)){const t=r.length;for(let e=0;e<t;e++){r[e]=getProxy(r[e])}r.push=new Proxy(r.push,changeArrFuncHandler);r.unshift=new Proxy(r.unshift,changeArrFuncHandler);r.shift=new Proxy(r.shift,changeArrFuncHandler);r.pop=new Proxy(r.pop,changeArrFuncHandler);r.splice=new Proxy(r.splice,changeArrFuncHandler);r.sort=new Proxy(r.sort,changeArrFuncHandler);r.reverse=new Proxy(r.reverse,changeArrFuncHandler);return new Proxy(r,proxyHandler)}if(r instanceof Set){const n=new Set(r);r.clear();for(const a of n){r.add(getProxy(a))}r.entries=new Proxy(r.entries,entriesFuncHandler);r.values=new Proxy(r.values,entriesFuncHandler);r.keys=new Proxy(r.keys,entriesFuncHandler);r.add=new Proxy(r.add,addFuncHandler);r.has=new Proxy(r.has,hasFuncHandler);r.clear=new Proxy(r.clear,clearFuncHandler);return new Proxy(r,proxyHandler)}if(r instanceof Map){const n=new Map(r);r.clear();for(const[s,a]of n){r.set(getProxy(s),getProxy(a))}r.entries=new Proxy(r.entries,entriesFuncHandler);r.values=new Proxy(r.values,entriesFuncHandler);r.keys=new Proxy(r.keys,entriesFuncHandler);r.get=new Proxy(r.get,getFuncHandler);r.set=new Proxy(r.set,setFuncHandler);r.delete=new Proxy(r.delete,deleteFuncHandler);r.has=new Proxy(r.has,hasFuncHandler);r.clear=new Proxy(r.clear,clearFuncHandler);return new Proxy(r,proxyHandler)}for(const d in r){const o=r[d];if(typeof o!=="object"||o===null||o===r){continue}const c=Object.getOwnPropertyDescriptor(r,d);if(c!==undefined&&c.writable){r[d]=getProxy(o)}}return new Proxy(r,proxyHandler)}const proxyHandler={get(e,r){if(proxyStat.value===0){proxyStat.value=1}if(r===p_target){return e}const t=e[r],n=typeof t;if(cur$src&&!isSkipNameType[typeof r]&&!isSkipValueType[n]){addVar(e,r,getTarget(t),cur$src);return t}return r!==Symbol.iterator?t:e.entries},set(e,r,t){if(Array.isArray(e)&&r==="length"){const a=e[r];e[r]=t;setVal(e,r,t,a);return true}const n=getTarget(t);if(r in e){const s=getTarget(e[r]);if(n===s){return true}e[r]=getProxy(t);setVal(e,r,n,s);return true}e[r]=getProxy(t);setVal(e,r,n,undefined);return true},deleteProperty(e,r){if(r in e){const t=getTarget(e[r]);delete e[r];setVal(e,r,undefined,t);return true}return true}};const changeArrFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=n.length,s=e.apply(n,t);setVal(n,"length",n.length,a);return s}};const entriesFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=e.apply(n,t);if(cur$src){a.next=new Proxy(a.next,iteratorFuncHandler);a[p_target]=r}return a}};const iteratorFuncHandler={apply(e,r,t){const n=e.apply(r,t);const a=r[p_target][p_target];if(n.value.length!==undefined){const[o,s]=n.value;addVar(a,getTarget(o),getTarget(s),cur$src);return n}const s=n.value,d=getTarget(s);addVar(a,d,d,cur$src);return n}};const getFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=e.apply(n,t);if(cur$src){addVar(n,getTarget(t[0]),getTarget(a),cur$src)}return a}};const setFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const[a,s]=t,d=getTarget(s);if(n.has(a)){const c=getTarget(n.get(a));if(d===c){return r}e.apply(n,[a,getProxy(s)]);setVal(n,getTarget(a),d,c);return r}const o=getProxy(a);e.apply(n,[o,getProxy(s)]);setVal(n,getTarget(a),d,undefined);return r}};const addFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=t[0],s=getTarget(a);if(n.has(a)){const d=getTarget(n.get(a));if(s===d){return r}}e.apply(n,[getProxy(a)]);setVal(n,s,s,undefined);return r}};const deleteFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=t[0];if(!n.has(a)||!e.apply(n,t)){return false}const s=getTarget(n.get(a));setVal(n,getTarget(a),undefined,s);return true}};const hasFuncHandler={apply(e,r,t){return e.apply(r[p_target]||r,t)}};const clearFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=n.size;e.apply(n,t);setVal(n,"size",0,a)}};function getTarget(e){return typeof e==="object"&&e!==null?e[p_target]:e}function addVar(e,r,t,n){const a=varIdByVar.get(e),s=srcBy$src.get(n),d=s.id,o=s.descr;if(isScalarType[typeof t]||t===null){if(Array.isArray(e)&&!isNaN(r)){r=Number(r)}if(a){const u=srcIdsByVarId.get(a);if(u){u.add(d)}else{srcIdsByVarId.set(a,new Set([d]))}o.varIds.add(a);const f=varIdByVarIdByProp.get(a);if(f!==undefined){const p=f.get(r);if(p){o.varIds.add(p);const u=srcIdsByVarId.get(p);if(u){u.add(d);return}srcIdsByVarId.set(p,new Set([d]));return}const y=getNewId();f.set(r,y);srcIdsByVarId.set(y,new Set([d]));o.varIds.add(y);return}const y=getNewId();varIdByVarIdByProp.set(a,new Map([[r,y]]));srcIdsByVarId.set(y,new Set([d]));o.varIds.add(y);return}const i=getNewId();varIdByVar.set(e,i);varById.set(i,e);srcIdsByVarId.set(i,new Set([d]));o.varIds.add(i);const y=getNewId();varIdByVarIdByProp.set(i,new Map([[r,y]]));srcIdsByVarId.set(y,new Set([d]));o.varIds.add(y);return}if(a){const u=srcIdsByVarId.get(a);if(u){u.add(d)}else{srcIdsByVarId.set(a,new Set([d]))}o.varIds.add(a)}else{const i=getNewId();varIdByVar.set(e,i);varById.set(i,e);srcIdsByVarId.set(i,new Set([d]));o.varIds.add(i)}const c=varIdByVar.get(t);if(c){const u=srcIdsByVarId.get(c);if(u){u.add(d)}else{srcIdsByVarId.set(c,new Set([d]))}o.varIds.add(c);return}const l=getNewId();varIdByVar.set(t,l);varById.set(l,t);srcIdsByVarId.set(l,new Set([d]));o.varIds.add(l)}function setVal(e,r,t,n){const a=varIdByVar.get(e);if(!a){return}if(Array.isArray(e)&&!isNaN(r)){r=Number(r)}const s=varIdByVarIdByProp.get(a),d=s!==undefined?s.get(r):0,o=d?varIdByVar.get(n):0;if(self.mw_debugLevel===2){console.info("mw_proxy => setVar","\\n\\tname=>",r,"\\n\\tvalue=>",t,"\\n\\toldVal=>",n,"\\n\\ttId=>",a,"\\n\\ttarget=>",e,"\\n\\toldId=>",o,"\\n\\toldScalarId=>",d)}if(cur$src){addVar(e,r,t,cur$src)}if(d&&!isScalarType[typeof t]&&t!==null){s.delete(r);if(s.size===0){varIdByVarIdByProp.delete(a)}}_setVal(e,r,n,srcIdsByVarId.get(o||a),o)}function _setVal(e,r,t,n,a){if(!n){return}const s=new Set(n),d=new Set;for(const o of n){const c=$srcById.get(o);if(!c||d.has(o)){continue}const l=srcBy$src.get(c).descr;if(l.asOnes===null){d.add(o);setInnerSrcIdSetBy$src(d,c);continue}const i=get$els(c,l.get$elsByStr,"");for(let e=i.length-1;e>-1;e--){const y=i[e],u=srcBy$src.get(y);if(u===undefined){continue}d.add(u.id);setInnerSrcIdSetBy$src(d,y)}}if(a!==0){const f=new Set;for(const o of d){const p=srcById.get(o).cache;p.value=type_cacheValue();decVar(e,r,t,o,a,f)}if(f.size!==0){requestIdleCallback(()=>{for(const e of descrById.values()){if(e.varIds===null){continue}for(const r of f){e.varIds.delete(r)}}},defIdleCallbackOpt)}}else{for(const o of d){const p=srcById.get(o).cache;p.value=type_cacheValue()}}renderBySrcIds(s)}function setInnerSrcIdSetBy$src(e,r){const t=r.parentNode;do{const n=srcBy$src.get(r);if(n!==undefined&&n.isCmd){e.add(n.id)}if(r.firstChild!==null){r=r.firstChild;continue}if(r.parentNode===t){break}if(r.nextSibling!==null){r=r.nextSibling;continue}do{r=r.parentNode;if(r.parentNode===t){r=null;break}if(r.nextSibling!==null){r=r.nextSibling;break}}while(true)}while(r!==null)}function decVar(e,r,t,n,a,s){if(a===0){if(isScalarType[typeof t]||t===null){const d=varIdByVarIdByProp.get(varIdByVar.get(e));if(d!==undefined){a=d.get(r);if(a===undefined){a=0}}}else{a=varIdByVar.get(t);if(a===undefined){a=0}}}if(a!==0){const o=srcIdsByVarId.get(a);if(!o||!o.has(n)){delVar(a,t,e,r,s);return}o.delete(n);if(o.size===0){delVar(a,t,e,r,s)}}if(Array.isArray(t)){const c=t.length;for(let e=0;e<c;e++){decVar(t,e,getTarget(t[e]),n,0,s)}return}if(typeof t!=="object"||t===null){return}for(const l in t){decVar(t,l,getTarget(t[l]),n,0,s)}}function delVar(e,r,t,n,a){a.add(e);srcIdsByVarId.delete(e);if(isScalarType[typeof r]||r===null){const s=varIdByVarIdByProp.get(e=varIdByVar.get(t));if(s===undefined){return}s.delete(n);if(s.size===0){varIdByVarIdByProp.delete(e)}return}varIdByVar.delete(r);varById.delete(e);const s=varIdByVarIdByProp.get(e);if(s!==undefined){varIdByVarIdByProp.delete(e);for(const d of s.values()){srcIdsByVarId.delete(d)}}}')],
["/cmd/inc.js", import('data:text/javascript;text,let renderTag,type_req,setReqCmd,type_localCounter,type_animation,type_renderRes,mw_doc,p_target,cmdPref,cmdArgsDiv,cmdArgsDivLen,incCmdName,fetchCmdName,foreachCmdName,elseCmdName,defaultCmdName,onCmdName,isFillingName,isFillingDiv,asOneIdxName,idxName,defRequestInit,reqCmd,srcById,srcBy$src,getAttrAfter,getAttrItAfter,get$els,type_asOneIdx,type_idx,type_save,preRender,joinText,removeChild,cloneNode,getIdx,setIdx,getTopUrl,eval2,q_eval2,loadingCount,showLoading,getUrl,srcIdsByVarId,getRequest,check,ocopy;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/dom.js"),self.__import__.get("/eval2.js"),self.__import__.get("/loading.js"),self.__import__.get("/loc.js"),self.__import__.get("/proxy.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];renderTag=m.renderTag;type_req=m.type_req;setReqCmd=m.setReqCmd;type_localCounter=m.type_localCounter;type_animation=m.type_animation;type_renderRes=m.type_renderRes;m=arr[1];mw_doc=m.mw_doc;p_target=m.p_target;cmdPref=m.cmdPref;cmdArgsDiv=m.cmdArgsDiv;cmdArgsDivLen=m.cmdArgsDivLen;incCmdName=m.incCmdName;fetchCmdName=m.fetchCmdName;foreachCmdName=m.foreachCmdName;elseCmdName=m.elseCmdName;defaultCmdName=m.defaultCmdName;onCmdName=m.onCmdName;isFillingName=m.isFillingName;isFillingDiv=m.isFillingDiv;asOneIdxName=m.asOneIdxName;idxName=m.idxName;defRequestInit=m.defRequestInit;reqCmd=m.reqCmd;m=arr[2];srcById=m.srcById;srcBy$src=m.srcBy$src;getAttrAfter=m.getAttrAfter;getAttrItAfter=m.getAttrItAfter;get$els=m.get$els;type_asOneIdx=m.type_asOneIdx;type_idx=m.type_idx;type_save=m.type_save;m=arr[3];preRender=m.preRender;joinText=m.joinText;removeChild=m.removeChild;cloneNode=m.cloneNode;getIdx=m.getIdx;setIdx=m.setIdx;getTopUrl=m.getTopUrl;m=arr[4];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[5];loadingCount=m.loadingCount;showLoading=m.showLoading;m=arr[6];getUrl=m.getUrl;m=arr[7];srcIdsByVarId=m.srcIdsByVarId;m=arr[8];getRequest=m.getRequest;check=m.check;ocopy=m.ocopy;});const waitingStack=new Map;export const incCache=new Map;const incScriptCache=new Map;export default{get$els(e,t,n,r){return inc_get$els(e,t,n,r)},get$first(e,t,n,r){return inc_get$first(e,t,n,r)},render(t){return eval2(t,t.$src,true).then(e=>inc_render(t,e))},q_render(i,c,s){return q_eval2(i,c,s).then(t=>{const n=c.length,r=new Array(n);for(let e=0;e<n;e++){if(!s.has(e)){r[e]=inc_render(type_req(c[e].$src,i.str,i.expr,c[e].scope,i.sync),t[e])}}return r})}};function inc_render(t,e){const n=getIncude(t,e);if(n===null){return type_renderRes(true)}const r=-1,i=inc_get$els(t.$src,t.str,t.expr,r),c=i.length,s=getIdx(srcBy$src.get(t.$src),t.str);for(let e=0;e<c;e++){const a=srcBy$src.get(i[e]);if(a!==undefined){if(!t.sync.local.has(a.id)){t.sync.local.set(a.id,type_localCounter())}}}if(c!==1&&s===n.key){return c>3?renderI(t,i[0],i[c-1],renderInc).then(e=>readyInc(t,n,e)):null}const o=i[c-1];if(n.readyState==="complete"){getNewInc(t,n,s,i,c,null);return type_renderRes(true,null,o)}const l=type_incLoading(t);if(l.isShow){showLoading(t.$src,()=>n.readyState==="complete",l.type,l.waitTime)}if(!waitingStack.has(n.key)){waitingStack.set(n.key,(n.res===null?fetch(n.req).then(e=>e.text()):n.res.text()).then(e=>{waitingStack.delete(n.key);return createIncFragment(t,n,e)}))}const d=waitingStack.get(n.key);t.sync.afterAnimations.add(type_animation(()=>d.then(()=>t.sync.stat===0&&getNewInc(t,n,s,i,c,l)),t.sync.local,0));return type_renderRes(true,null,o)}function getIncude(e,t){if(typeof t!=="string"){const n=getRequest(t,"");if(n===null){return null}if(n.method==="GET"||n.method===undefined){const r=incCache.get(n.url);if(r!==undefined){return r}}const i=n instanceof Request?type_include("loading",n.url,n,null):type_include("loading",n.url,null,n);incCache.set(i.key,i);return i}const n=getRequest(t,getTopUrl(srcBy$src.get(e.$src),e.str)),r=incCache.get(n.url);if(r!==undefined){return r}const i=type_include("loading",n.url,n,null);incCache.set(i.url,i);return i}function type_include(e,t,n,r){return{key:n===null?t:n.method==="GET"?t:n,readyState:e,url:t,req:n,res:r,$fr:null,$tags:null,scope:null}}function type_incLoading(e){const t=e.reqCmd.args[0],n=e.reqCmd.args[1];return{isShow:n!==""&&n!==undefined||t!==""&&t!==undefined,type:t!==""&&t!==undefined?t:"",waitTime:n!==""&&n!==undefined?n:""}}async function createIncFragment(e,t,n){const r=mw_doc.createDocumentFragment(),i=mw_doc.createElement("div");i.innerHTML=n;for(let e=i.firstChild;e!==null;e=i.firstChild){r.appendChild(e)}if(self.mw_createLineNo){self.mw_createLineNo(t.url,n,r)}joinText(r);t.$tags=[...r.querySelectorAll("link[rel]")];for(const s of t.$tags){const o=s.getAttribute("href");if(o){const l=getUrl(o,t.url);if(o!==l){s.setAttribute("href",l)}}}t.$tags.push(...r.querySelectorAll("style"));const c=r.querySelectorAll("script");if(c.length!==0){await createIncScripts(e,t,c)}if(t.$tags.length!==0){if(t.$tags[0].parentNode===mw_doc.head){console.warn("applyIncFragment",t.$tags,e);alert(1)}for(const s of t.$tags){mw_doc.head.appendChild(s)}}t.$fr=r;t.readyState="complete"}function createIncScripts(t,n,r){const i=r.length,c=new Array(i);for(let e=0;e<i;e++){c[e]=createIncScript(t,n,r[e])}return Promise.all(c)}function createIncScript(t,n,r){r.parentNode.removeChild(r);const e=r.getAttribute("src"),i=e!==null?getUrl(e,n.url):null;if(i!==e){r.setAttribute("src",i)}if(r.type==="module"){if(i!==null){try{return import(i).then(e=>incToScope(e,n))}catch(e){throw checkScript(e,r,t,i)}}const s=URL.createObjectURL(new Blob([r.textContent],{type:"text/javascript"}));try{return import(s).then(e=>{if(self.mw_debugLevel!==0){URL.revokeObjectURL(s)}incToScope(e,n)})}catch(e){if(self.mw_debugLevel!==0){URL.revokeObjectURL(s)}throw checkScript(e,r,t)}return}if(i===null){runIncScript(t,r.textContent,r,i);return}const c=incScriptCache.get(i);if(c!==undefined){runIncScript(t,c,r,i);return}return fetch(i,defRequestInit).then(e=>{if(e.ok){return e.text()}throw check(new Error(`>>>mw inc:createIncScript: Request stat ${e.status}`),t.$src,t)}).then(e=>{incScriptCache.set(i,e);runIncScript(t,e,r,i)})}function incToScope(e,t){t.scope={};for(const n in e){const r=e[n];t.scope[r.name!==undefined?r.name:n]=r}}function scopeToInc(e,t){if(e.scope===null){return}for(const n in e.scope){t.scope[p_target][n]=e.scope[n]}}function runIncScript(t,e,n,r){try{self.eval(e)}catch(e){throw checkScript(e,n,t,r)}}function checkScript(e,t,n,r){if(r){return check(e,t,n,null,r,e.lineNumber,e.columnNumber)}if(self.mw_getLineNo===undefined){return check(e,t,n)}const i=self.mw_getLineNo(t),c=i.lastIndexOf(":");return check(e,t,n,null,i.substr(0,c),Number(i.substr(c+1))-1+e.lineNumber)}function getNewInc(t,n,e,r,i,c){const s=cloneIncFragment(t,n,e,c),o=s.firstChild,l=s.lastChild;t.sync.animations.add(type_animation(()=>getNewIncInsert(t,e,r,i,s,o),t.sync.local,0));t.sync.afterAnimations.add(type_animation(()=>{scopeToInc(n,t);return renderI(t,o,l,renderNewInc).then(e=>readyInc(t,n,e))},t.sync.local,0))}function getNewIncInsert(n,e,r,i,t,c){let s=0;for(let e=t.firstChild;e!==null;e=e.nextSibling){const a=srcBy$src.get(e);if(a!==undefined){s=a.id;break}}const o=r[0].parentNode,l=r[i-1].nextSibling,d=srcBy$src.get(n.$src);for(let e,t=0;;t++){e=srcBy$src.get(r[t]);if(e===undefined){removeChild(r[t]);continue}if(s!==0){const u=srcById.get(s).descr.varIds;for(const f of e.descr.varIds){u.add(f);const g=srcIdsByVarId.get(f);if(g===undefined){console.warn("inc.js");alert(1)}g.add(s)}}do{if(e!==undefined){const m=n.sync.local.get(e.id);m.animationsCount=-1;m.newSrcId=s;if(e.id===n.sync.renderParam.sId){n.sync.renderParam.sId=s}}removeChild(r[t]);e=srcBy$src.get(r[t])}while(++t<i);break}o.insertBefore(t,l)}async function renderNewInc(e,t){return renderTag(t,e.scope,getAttrAfter(srcBy$src.get(t).descr.attr,e.str),e.sync)}function renderInc(e,t){return renderTag(t,e.scope,getAttrAfter(srcBy$src.get(t).descr.attr,e.str),e.sync)}async function renderI(e,t,n,r){do{const i=srcBy$src.get(t);if(i!==undefined&&i.isCmd){t=await r(e,t);if(e.sync.stat!==0){return n}}if(t===n){return n}t=t.nextSibling}while(t!==null);throw new Error("inc.js")}function readyInc(e,t,n){return type_renderRes(true,null,n)}function cloneIncFragment(r,t,e,n){const i=cloneNode(r,t.$fr),c=srcBy$src.get(r.$src),s=c.descr,o=r.$src.attributes,l=o.length,d=new Map,a=e!==undefined;const[u,f,g]=a?[type_asOneIdx(c.asOneIdx),c.idx,c.save]:[type_asOneIdx(c.asOneIdx),type_idx(c.idx),type_save()];for(const m of getAttrItAfter(s.attr.keys(),r.str,false)){u.delete(m);f.delete(m)}if(a){for(const[m,p]of g){d.set(m,p)}}else{const y=new Set;if(n!==null&&n.isShow){const h=c.id,I=loadingCount.get(h),w=I.get("")-1;I.set("",w);if(w<=0){y.add(isFillingName)}if(n.type!==""){const w=I.get(n.type)-1;I.set(n.type,w);if(w<=0){y.add(isFillingName+isFillingDiv+n.type)}}}for(let e=0;e<l;e++){const _=o[e];if(y.has(_.name)){continue}d.set(_.name,_.value);if((self.mw_debugLevel!==0||_.name.indexOf(idxName)!==0&&_.name.indexOf(asOneIdxName)!==0)&&_.name.indexOf(isFillingName)!==0){g.set(_.name,_.value)}}}for(let e=0,n=i.firstChild;n!==null;e++,n=n.nextSibling){if(n.nodeType!==1){continue}const $=n.attributes,C=$.length,x=new Map;for(let e=0;e<C;e++){const _=$[e];x.set(_.name,_.value)}for(const m of x.keys()){n.removeAttribute(m)}const b=d.entries(),S=new Set;for(let t=b.next();!t.done;t=b.next()){const[m,p]=t.value;n.removeAttribute(m);n.setAttribute(m,p);S.add(m);if(m!==r.str){continue}for(const[m,p]of x){if(!setReqCmd(m)){n.removeAttribute(m);n.setAttribute(m,p);continue}let e=m;while(S.has(e)){e+=cmdArgsDiv}S.add(e);n.setAttribute(e,p)}for(t=b.next();!t.done;t=b.next()){const[m,p]=t.value;if(!setReqCmd(m)){n.removeAttribute(m);n.setAttribute(m,p);continue}let e=m;while(S.has(e)){e+=cmdArgsDiv}n.setAttribute(e,p)}break}preRender(n,false);const v=srcBy$src.get(n);if(u.size!==0){v.asOneIdx=type_asOneIdx(u)}v.idx=type_idx(f);v.save=g;if(self.mw_debugLevel!==0){for(const[m,p]of u){n.setAttribute(asOneIdxName+m,p)}for(const[m,p]of f){n.setAttribute(idxName+m,p)}}setIdx(v,r.str,t.key)}if(!i.firstElementChild){return i}if(!a){makeSlots(r,i)}i.insertBefore(mw_doc.createComment("inc_begin"),i.firstChild);i.appendChild(mw_doc.createComment("inc_end"));return i}function makeSlots(t,e){const n=e.querySelectorAll("slot[name]"),r=n.length;let i;for(let e=0;e<r;e++){const c=n[e];if(!c.name&&!i){i=c;continue}const s=t.$src.querySelectorAll(`[slot="${c.name}"]`),o=s.length;for(let e=0;e<o;e++){const l=srcBy$src.get(s[e]);if(l!==undefined){const d=l.descr.get$elsByStr;if(d!==null){const a=get$els(s[e],d,""),u=a.length;for(let e=0;e<u;e++){c.appendChild(a[e])}continue}}c.appendChild(s[e])}}if(i){for(let e=t.$src.firstChild;e!==null;){i.appendChild(e)}}}function inc_get$els(n,r,i,c){if(n.nodeType===1&&!isRenderdInc(n,r)){return[n]}const s=[];for(let e=inc_get$first(n,r,i,c),t=0;e!==null;e=e.nextSibling){s.push(e);const o=srcBy$src.get(e);if(o===undefined||!o.isCmd){continue}t=getIncCount(e,r,i,c);for(e=e.nextSibling;e!==null;e=e.nextSibling){s.push(e);const o=srcBy$src.get(e);if(o!==undefined&&o.isCmd||e.nodeType!==8){continue}const l=e.textContent;if(l==="inc_end"){if(t===0){return s}t--}else if(l==="inc_begin"){t++}}break}throw check(new Error(`>>>mw inc:incGet$els: Not found <!--inc_begin-->: "${r}", "${i}", ${c}`),n)}function inc_get$first(n,r,i,c){if(n.nodeType===1&&!isRenderdInc(n,r)){return n}if(n.nodeType===8&&n.textContent==="inc_begin"){return n}for(let e=n,t=0;e!==null;e=e.previousSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}t=getIncCount(e,r,i,c);for(e=e.previousSibling;e!==null;e=e.previousSibling){const s=srcBy$src.get(e);if(s!==undefined&&s.isCmd||e.nodeType!==8){continue}const o=e.textContent;if(o==="inc_begin"){if(t===0){return e}t--}else if(o==="inc_end"){t++}}break}throw check(new Error(`>>>mw inc:incGet$first: Not found <!--inc_begin-->: "${r}", "${i}", ${c}`),n)}function getIncCount(t,e,n,r){let i=0;const c=getAttrItAfter(srcBy$src.get(t).descr.attr.keys(),e,false);for(let e=c.next();!e.done;e=c.next()){if(reqCmd.get(e.value).cmdName!==incCmdName){continue}if(!isRenderdInc(t,e.value)){return i}i++}return i}function isRenderdInc(e,t){if(e.nodeType===8&&e.textContent==="inc_end"){while(!srcBy$src.has(e)&&e!==null){e=e.previousSibling}}else{while(!srcBy$src.has(e)&&e!==null){e=e.nextSibling}}const n=srcBy$src.get(e);if(t){return getIdx(n,t)!==undefined}for(const r of n.descr.attr.keys()){if(reqCmd.get(r).cmdName===incCmdName){return getIdx(n,r)!==undefined}}}')],
["/render/render.js", import('data:text/javascript;text,let p_target,lazyRenderName,mountEventName,renderEventName,defEventInit,cmdArgsDiv,cmdArgsDivLen,mw_cmd,reqCmd,srcById,$srcById,srcBy$src;import.meta.__imports__=Promise.all([self.__import__.get("/config.js"),self.__import__.get("/descr.js")]).then(arr=>{let m;m=arr[0];p_target=m.p_target;lazyRenderName=m.lazyRenderName;mountEventName=m.mountEventName;renderEventName=m.renderEventName;defEventInit=m.defEventInit;cmdArgsDiv=m.cmdArgsDiv;cmdArgsDivLen=m.cmdArgsDivLen;mw_cmd=m.mw_cmd;reqCmd=m.reqCmd;m=arr[1];srcById=m.srcById;$srcById=m.$srcById;srcBy$src=m.srcBy$src;});export function renderTag(r,n,t,s){if(s.stat!==0){return r}const e=srcBy$src.get(r),c=e.id;if(!s.local.has(c)){s.local.set(c,type_localCounter())}if(n===null){n=e.scopeCache}else{const o=e.scopeCache,a=o[p_target],i=n[p_target]||n;for(const u in i){a[u]=i[u]}n=o}if(t===null||t.size===0){return renderChildren(r,n,s,c,r)}return attrRender(r,n,t,s).then(t=>{if(s.stat!==0){return r}if(r!==t.$src){r=t.$src}const e=t.$last===null?r:t.$last;if(t.isLast){return e}return renderChildren(r,n,s,c,e)})}async function attrRender(t,e,r,n){let s=null;for(const[c,o]of r){const a=type_req(t,c,o,e,n),i=await a.reqCmd.cmd.render(a);if(n.stat!==0){return i||type_renderRes(false,t,s)}if(!i){continue}if(i.attr!==null){const u=i.$attr||i.$src||t,d=i.$last||i.$src||i.$attr||t;t=await renderTag(u,e,i.attr,n);i.isLast=true;i.$src=u===d&&t||d;i.$last=null;i.$attr=null;i.attr=null;return i}if(i.isLast){return type_renderRes(true,i.$src||t,i.$last)}if(i.$last!==null){s=i.$last}if(i.$src!==null){t=i.$src}}return type_renderRes(false,t,s)}async function renderChildren(t,e,r,n,s){if(r.stat!==0||srcBy$src.get(t).descr.isCustomHtml){return t}if(!r.renderParam.isLazyRender&&t.getAttribute(lazyRenderName)!==null){r.renderParam.isLazyRender=true}for(t=t.firstChild;t!==null;t=t.nextSibling){const c=srcBy$src.get(t);if(c===undefined){continue}t=await renderTag(t,e,c.descr.attr,r);if(r.stat!==0){return}}testLocalEventsBySrcId(r.local,n);return s}export function q_renderTag(e,t,r,n){if(n.stat!==0){return Promise.resolve(e)}const s=e.length;for(let t=0;t<s;t++){const c=e[t],o=c.$src,a=srcBy$src.get(o),i=a.id;if(!n.local.has(i)){n.local.set(i,type_localCounter())}if(c.scope===null){c.scope=a.scopeCache}else{const u=a.scopeCache,d=u[p_target],l=c.scope[p_target]||c.scope;for(const t in l){d[t]=l[t]}c.scope=u}}if(t!==null&&t.size!==0){return q_attrRender(e,t,r,type_q_renderCtx(),n).then(t=>t===s?e:_q_renderTag(e,r,n,s))}return _q_renderTag(e,r,n)}function _q_renderTag(e,t,r,n){return q_renderChildren(e,t,r).then(()=>{for(let t=0;t<n;t++){testLocalEventsBySrcId(r.local,srcBy$src.get(e[t].$src).id)}return e})}async function q_attrRender(e,t,r,n,s){const c=e.length;for(const[o,a]of t){const i=await q_execRender(e,o,a,r,s);if(s.stat!==0){return n.lastCount}if(!i){continue}for(let t=0;t<c;t++){if(r.has(t)){continue}const u=await i[t];if(!u){continue}if(u.attr!==null){const d=e[t];q_addAfterAttr(u.$attr||u.$src||d.$src,d.scope,u.attr,n);d.$src=u.$last||u.$src||u.$attr||d.$src;r.add(t);n.lastCount++;continue}if(u.$last!==null){e[t].$src=u.$last}if(u.isLast){r.add(t);n.lastCount++}}}for(const l of n.afterByDescrByAttr.values()){for(const[f,e]of l){await q_renderTag(e,n.afterAttrKey.get(f),type_isLast(),s)}}return n.lastCount}function q_addAfterAttr(t,e,r,n){const s=getAttrKey(r),c=srcBy$src.get(t).descr.id,o=n.afterByDescrByAttr.get(c),a=type_q_arr(t,e);if(!n.afterAttrKey.has(s)){n.afterAttrKey.set(s,r)}if(o!==undefined){const i=o.get(s);if(i){i.push(a);return}o.set(s,[a]);return}n.afterByDescrByAttr.set(c,new Map([[s,[a]]]))}function q_renderChildren(e,r,t){const n=e[0].$src;if(t.stat!==0||srcBy$src.get(n).descr.isCustomHtml){return Promise.resolve(e)}if(!t.renderParam.isLazyRender&&n.getAttribute(lazyRenderName)!==null){t.renderParam.isLazyRender=true}const s=[],c=e.length;for(let t=0;t<c;t++){if(!r.has(t)){const o=e[t];s.push(type_q_arr(o.$src,o.scope))}}if(s.length===0){return e}return q_renderFlow(s,true,t).then(()=>e)}function q_renderFlow(t,e,r){const n=q_nextGroupByDescr(t,e);const s=new Set;for(const c of n.values()){const o=c[0].$src,a=srcBy$src.get(o);s.add(q_renderTag(c,a!==undefined?a.descr.attr:null,type_isLast(),r).then(()=>r.stat===0&&q_renderFlow(c,false,r)))}return Promise.all(s)}function q_nextGroupByDescr(r,n){const s=new Map,t=r.length;for(let e=0;e<t;e++){if(r[e].$src.nodeType!==1){continue}for(let t=n?r[e].$src.firstChild:r[e].$src.nextSibling;t!==null;t=t.nextSibling){const c=srcBy$src.get(t);if(c===undefined){continue}r[e].$src=t;const o=c.descr.id,a=s.get(o);if(a!==undefined){a.push(r[e]);break}s.set(o,[r[e]]);break}}return s}function q_execRender(e,r,n,s,c){const o=type_req(e[0].$src,r,n,null,c);if(o.reqCmd.cmd.q_render){return o.reqCmd.cmd.q_render(o,e,s)}const a=e.length,i=new Array(a);for(let t=0;t<a;t++){if(!s.has(t)){i[t]=o.reqCmd.cmd.render(type_req(e[t].$src,r,n,e[t].scope,c))}}return Promise.all(i)}function getAttrKey(t){let e="";for(const[r,n]of t){e+=r+":"+n+";"}return e}export function setReqCmd(t){const e=reqCmd.get(t);if(e!==undefined&&e!==null){return true}const r=t.indexOf(cmdArgsDiv),n=r===-1?t:t.substr(0,r),s=mw_cmd.get(n);if(s===undefined){reqCmd.set(t,null);return false}reqCmd.set(t,type_reqCmd(n,s,r!==-1?t.substr(r+cmdArgsDivLen).split(cmdArgsDiv):[]));return true}export function dispatchLocalEvents(t){for(const[e,r]of t){if(r.animationsCount===0){dispatchLocalEventsBySrcId(e,r)}}}function testLocalEventsBySrcId(t,e){const r=t.get(e);if(r.animationsCount===0){dispatchLocalEventsBySrcId(e,r)}}function dispatchLocalEventsBySrcId(t,e){const r=$srcById.get(t);if(r===undefined){return}e.animationsCount=-1;if(r.nodeName==="TEMPLATE"){return}const n=srcById.get(t);if(!n.isMounted){n.isMounted=true;r.dispatchEvent(new CustomEvent(mountEventName,defEventInit))}r.dispatchEvent(new CustomEvent(renderEventName,defEventInit))}export function type_req(t,e,r,n,s){return{reqCmd:reqCmd.get(e),$src:t,str:e,expr:r,scope:n,sync:s}}function type_reqCmd(t,e,r){return{cmdName:t,cmd:e,args:r}}function type_q_renderCtx(){return{lastCount:0,afterByDescrByAttr:new Map,afterAttrKey:new Map}}export function type_isLast(){return new Set}export function type_q_arr(t,e){return{$src:t,scope:e}}export function type_localCounter(){return{animationsCount:0,newSrcId:0}}export function type_animation(t,e,r){for(const n of e.values()){n.animationsCount++}return{handler:()=>{for(const t of e.values()){if(t.animationsCount>0){t.animationsCount--}}return t()},viewedSrcId:r}}export function type_renderRes(t,e=null,r=null,n=null,s=null){return{isLast:t,$src:e,$last:r,$attr:n,attr:s}}')],
["/cmd/filling.js", import('data:text/javascript;text,let eval2,showLoading;import.meta.__imports__=Promise.all([self.__import__.get("/eval2.js"),self.__import__.get("/loading.js")]).then(arr=>{let m;m=arr[0];eval2=m.eval2;m=arr[1];showLoading=m.showLoading;});export default{render(r){return showLoading(r.$src,()=>eval2(r,r.$src,true),r.reqCmd.args[0],r.reqCmd.args[1]).then(()=>null)}};')],
["/render/algo.js", import('data:text/javascript;text,let renderTag,q_renderTag,dispatchLocalEvents,type_isLast,type_q_arr,type_animation,mw_$src,renderPackSize,lazyRenderName,defIdleCallbackOpt,$srcById,srcById,srcBy$src,descrById,get$els,preRender,is$hide,is$visible,isAnimationVisible,loadingCount;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/dom.js"),self.__import__.get("/loading.js")]).then(arr=>{let m;m=arr[0];renderTag=m.renderTag;q_renderTag=m.q_renderTag;dispatchLocalEvents=m.dispatchLocalEvents;type_isLast=m.type_isLast;type_q_arr=m.type_q_arr;type_animation=m.type_animation;m=arr[1];mw_$src=m.mw_$src;renderPackSize=m.renderPackSize;lazyRenderName=m.lazyRenderName;defIdleCallbackOpt=m.defIdleCallbackOpt;m=arr[2];$srcById=m.$srcById;srcById=m.srcById;srcBy$src=m.srcBy$src;descrById=m.descrById;get$els=m.get$els;m=arr[3];preRender=m.preRender;is$hide=m.is$hide;is$visible=m.is$visible;isAnimationVisible=m.isAnimationVisible;m=arr[4];loadingCount=m.loadingCount;});const renderParams=new Set;let mw_delay=0,mw_delayId=0,mw_syncId=0;const delayParams=new Set;export const syncInRender=new Set;export let curRender=Promise.resolve();export function render(e=mw_$src,n,r,t=false){if(!srcBy$src.has(e)){preRender(e,t)}const s=srcBy$src.get(e).id;renderParams.add(type_renderParam(s,r||null,null,t));return tryRender(n,s)}export function renderBySrcIds(e,n){for(const r of e){if($srcById.has(r)){renderParams.add(type_renderParam(r,null,null,false))}}tryRender(n,0)}export function setDelay(e,n){if(!n){mw_delay=e;return}const r=mw_delay;mw_delay=e;n();mw_delay=r}function tryRender(e=mw_delay,t){const s=++mw_delayId;return new Promise((n,r)=>{setTimeout(()=>{if(t!==0){delayParams.add(type_delayParam(t,n,r))}if(s!==mw_delayId||renderParams.size===0){return}const e=new Set(delayParams);delayParams.clear();_tryRender(e).then(n).catch(e=>{for(const n of syncInRender){n.resolve()}syncInRender.clear();curRender=Promise.resolve();loadingCount.clear();r(e)})},e)})}function _tryRender(e){const n=new Set,r=prepareRenderParam(n),t=new Map;if(syncInRender.size!==0){const s=new Set,o=new Set;for(const a of syncInRender){if(a.stat===0){o.add(a)}}for(const a of o){for(const[i,d]of r){const c=a.stat,l=c===0?checkSync(a,d):c;if(l===0){continue}if(c!==0){if(l===3){s.add(i)}continue}n.add(a);s.add(i);if(a.renderParam.isLinking){a.renderParam.isLinking=false}if(l===2){renderParams.add(a.renderParam);for(const f of d.srcIds){renderParams.add(type_renderParam(f,null,null,false))}continue}if(l===3){t.set(srcById.get(a.renderParam.sId).descr.id,a.renderParam);continue}if(d.isLinking){d.isLinking=false}t.set(i,d)}}if(s.size!==0){for(const i of s){r.delete(i)}}if(renderParams.size!==0){for(const[i,d]of prepareRenderParam(n)){t.set(i,d)}}}if(n.size!==0){for(const a of n){syncInRender.delete(a);a.resolve()}}if(r.size!==0){const u=_render(r,e);if(t.size===0){curRender=curRender.then(()=>u)}else{curRender=curRender.then(()=>_render(t,e)).then(()=>u)}}else if(t.size!==0){curRender=curRender.then(()=>_render(t,e))}return curRender}function _render(e,t){if(self.mw_debugLevel!==0){debugInfo(e)}const s=new Set,n=new Set;for(const[r,o]of e){const a=type_sync(++mw_syncId,o);syncInRender.add(a);s.add(a);if(o.attr===null){o.attr=descrById.get(r).attr}const i=$srcById.get(o.sId);if(i===undefined){console.warn("_render !",o.sId,a);continue}const d=o.srcIds.size;if(d===1){n.add(renderTag(i,o.scope,o.attr,a));continue}const c=new Array(d);let e=0;for(const l of o.srcIds){c[e++]=type_q_arr($srcById.get(l),o.scope)}n.add(_q_renderPack(o,a,c))}return Promise.all(n).then(()=>{const n=new Set;for(const e of s){n.add(e.promise);if(self.mw_debugLevel===0){continue}e.promise.then(()=>{if(e.stat===0){console.warn("0 0 sdfsdfsd")}if(e.stat===7){console.info("ready =>",infoBySrcIds([e.renderParam.sId]));return}console.info("cancel =>",infoBySrcIds([e.renderParam.sId]))})}renderLoop(s);return Promise.all(n)}).then(()=>{for(const r of t){for(const n of s){let e=n.local.get(r.sId);if(e===undefined){continue}for(;e.newSrcId!==0;e=n.local.get(r.sId)){r.sId=e.newSrcId}r.resolve(n);break}}}).catch(e=>{for(const n of t){n.reject(e)}throw e})}function _q_renderPack(r,t,n){const s=[],o=[],a=n.length;for(let e=0;e<a;e++){const i=n[e];if(is$visible(i.$src)){s.push(i);continue}o.push(i)}if(s.length!==0){return q_renderTag(s,r.attr,type_isLast(),t).then(()=>o.length!==0&&t.afterAnimations.add(type_animation(()=>_q_renderPack(r,t,o),t.local,0)))}return new Promise(e=>{const n=requestIdleCallback(()=>{t.idleCallback.delete(n);q_renderTag(o.splice(0,renderPackSize),r.attr,type_isLast(),t).then(()=>{if(o.length!==0){return _q_renderPack(r,t,o).then(e)}e()})});t.idleCallback.set(n,e)},defIdleCallbackOpt)}export async function renderLoop(e){const n=new Set;for(const t of e){if(t.stat!==0||t.beforeAnimations.size===0){continue}const s=new Set(t.beforeAnimations),o=new Array(s.size);t.beforeAnimations.clear();let e=0;for(const a of s){o[e++]=a.handler()}n.add(Promise.all(o).then(()=>dispatchLocalEvents(t.local)))}if(n.size!==0){await Promise.all(n)}for(const t of e){if(t.stat!==0||t.animations.size===0){continue}const s=new Set(t.animations);t.animations.clear();const i=addAnimation(t,s,false);if(i!==null){n.add(i)}}if(n.size!==0){await Promise.all(n)}for(const t of e){if(t.stat!==0||t.afterAnimations.size===0){continue}const s=new Set(t.afterAnimations),o=new Array(s.size);t.afterAnimations.clear();let e=0;for(const a of s){o[e++]=a.handler()}n.add(Promise.all(o).then(()=>dispatchLocalEvents(t.local)))}if(n.size!==0){await Promise.all(n)}const r=new Set;for(const t of e){if(t.stat===0){if(t.beforeAnimations.size!==0||t.animations.size!==0||t.afterAnimations.size!==0){r.add(t);continue}if(t.scrollAnimations.size!==0||t.idleCallback.size!==0||t.animationFrame.size!==0){continue}}if(t.stat!==0){syncInRender.delete(t);t.resolve();continue}if(t.onreadies.size!==0){for(const d of t.onreadies){d()}}t.stat=7;syncInRender.delete(t);t.resolve()}if(r.size!==0){return renderLoop(r)}}export function addAnimation(r,e,n){if(r.stat!==0){console.warn(1111111111);return null}const t=n?e:new Set,s=new Set;if(!n){for(const o of e){if(o.promise){console.warn("a.promise !== null");alert(1);continue}if(isAnimationVisible(o)){t.add(o);continue}if(!r.renderParam.isLazyRender){s.add(o);continue}r.scrollAnimations.add(o);o.promise=1}}if(t.size!==0){return new Promise(e=>{const n=requestAnimationFrame(()=>{r.animationFrame.delete(n);if(r.stat!==0){e();return}for(const e of t){e.handler()}dispatchLocalEvents(r.local);if(s.size===0){e();return}requestIdleCallback(()=>{if(r.stat!==0){e();return}addAnimation(r,s,false).then(e)},defIdleCallbackOpt)});r.animationFrame.set(n,e)})}if(s.size===0){return null}return new Promise(e=>{const n=requestIdleCallback(()=>{r.idleCallback.delete(n);requestAnimationFrame(()=>{if(r.stat!==0){e();return}for(const e of s){e.handler()}dispatchLocalEvents(r.local);e();return})},defIdleCallbackOpt);r.idleCallback.set(n,e)})}function prepareRenderParam(n){const r=new Map;for(const i of renderParams){const e=i.sId,d=srcById.get(e);if(d===undefined){continue}const c=d.descr,l=c.id,f=r.get(l);if(f!==undefined){if(c.asOnes===null){f.srcIds.add(e)}continue}r.set(l,i);if(c.asOnes===null){i.srcIds.add(e);continue}const u=new Set;for(const m of c.srcIds){const y=$srcById.get(m).parentNode;if(u.has(y)){continue}u.add(y);i.srcIds.add(m)}}for(const[l,i]of r){const I=$srcById.get(i.sId);if(is$hide(I)){prpDeleteDescrId(r,l,n);continue}const c=descrById.get(l);if(c.asOnes!==null||c.get$elsByStr===null){continue}const p=get$els(I,c.get$elsByStr,""),w=p.length;if(w===1){continue}for(let e=0;e<w;e++){const g=srcBy$src.get(p[e]);if(g===undefined){continue}const P=g.descr.id;if(P!==l){prpDeleteDescrId(r,P,n)}}i.$els=p}const t=new Map,s=mw_$src.parentNode;for(const[l,i]of r){let e=$srcById.get(i.sId),n=srcBy$src.get(e);const _=type_prepareMerge(0,n.asOneIdx!==null?n.asOneIdx.values().next().value:0);t.set(l,_);for(;e!==s;e=e.parentNode,n=srcBy$src.get(e)){_.len++;if(e.getAttribute(lazyRenderName)!==null){i.isLazyRender=true}const h=n.descr;if(n.asOneIdx!==null||h.get$elsByStr===null){_.descrId.add(h.id);continue}const p=get$els(e,h.get$elsByStr,"");for(let e=p.length-1;e>-1;e--){const g=srcBy$src.get(p[e]);if(g!==undefined){_.descrId.add(g.descr.id)}}}}const o=Array.from(r.keys()),a=o.length;for(let e=0;e<a;e++){const P=o[e];if(P===0){continue}const _=t.get(P);for(let e=0;e<a;e++){const S=o[e];if(S===0||P===S){continue}const $=t.get(S);if(_.len>$.len){continue}if($.descrId.has(P)){prpDeleteDescrId(r,S,n);o[e]=0;continue}if(_.firstAsOneIdx!==0&&_.firstAsOneIdx===$.firstAsOneIdx){prpDeleteDescrId(r,S,n);o[e]=0}}}renderParams.clear();return r}function prpDeleteDescrId(e,n,r){if(!e.has(n)){return}const t=e.get(n).srcIds;for(const s of syncInRender){if(t.has(s.renderParam.sId)){s.stat=4;r.add(s)}}e.delete(n)}function checkSync(e,n){if(e.stat!==0){return getPosStat(e,n)}const r=getPosStat(e,n);if(r===0){return r}e.stat=r;for(const[t,s]of e.idleCallback){cancelIdleCallback(t);s()}for(const[t,s]of e.animationFrame){cancelAnimationFrame(t);s()}return r}function getPosStat(n,r){let t=n.renderParam.sId;if(!srcById.has(t)){for(let e=n.local.get(t);e.newSrcId!==0;e=n.local.get(t)){t=e.newSrcId}}const s=$srcById.get(t);if(s===undefined){console.warn("!!! checkSync - hz "+t);return 5}const o=mw_$src.parentNode;if(r.$els===null){for(let e=s;e!==o;e=e.parentNode){const a=srcBy$src.get(e).id;if(r.srcIds.has(a)){return a===t?2:1}}}else{const i=r.$els,d=i.length;for(let e,n=s;n!==o;n=n.parentNode){for(e=0;e<d;e++){const c=i[e];if(c===n){return srcBy$src.get(n).id===t?2:1}}}}for(let e=$srcById.get(r.sId).parentNode;e!==o;e=e.parentNode){if(srcBy$src.get(e).id===t){return 3}}return 0}function type_delayParam(e,n,r){return{sId:e,resolve:n,reject:r}}function type_renderParam(e,n,r,t){return{sId:e,scope:n,attr:r,isLinking:t,isLazyRender:false,srcIds:new Set,$els:null}}function type_prepareMerge(e,n){return{len:e,descrId:new Set,firstAsOneIdx:n}}function type_sync(e,n){let r;const t=new Promise(e=>r=e);return{syncId:e,renderParam:n,local:new Map,beforeAnimations:new Set,animations:new Set,afterAnimations:new Set,scrollAnimations:new Set,onreadies:new Set,idleCallback:new Map,animationFrame:new Map,stat:0,promise:t,resolve:r}}function debugInfo(e){const n=new Set;for(const r of e.values()){n.add(r.sId)}console.info("render =>",infoBySrcIds(n))}function infoBySrcIds(e){const n={};for(const r of e){n[r]=$srcById.get(r)}return n}')],
["/cmd/watch.js", import('data:text/javascript;text,let type_renderRes,p_target,srcBy$src,eval2,q_eval2,kebabToCamelStyle;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/eval2.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];type_renderRes=m.type_renderRes;m=arr[1];p_target=m.p_target;m=arr[2];srcBy$src=m.srcBy$src;m=arr[3];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[4];kebabToCamelStyle=m.kebabToCamelStyle;});export default{render(e){return eval2(e,e.$src,true).then(r=>watch_render(e,e.scope,r))},q_render(s,a,c){return q_eval2(s,a,c).then(e=>{const t=a.length,n=new Array(t);for(let r=0;r<t;r++){if(!c.has(r)){n[r]=watch_render(s,a[r].scope,e[r])}}return n})}};function watch_render(r,e,t){const n=srcBy$src.get(r.$src).cache;if(!n.current.has(r.str)){n.current.set(r.str,type_watchCur())}const s=n.current.get(r.str);if(r.sync.renderParam.isLinking){n.isInits.add(r.str);s.watch=t;return type_renderRes(true)}if(n.isInits.has(r.str)){if(t===s.watch){return type_renderRes(true)}r.sync.onreadies.add(()=>{s.watch=t})}else{r.sync.onreadies.add(()=>{n.isInits.add(r.str);s.watch=t})}const a=r.reqCmd.args[0];if(a){e[p_target][kebabToCamelStyle(a)]=t}return null}function type_watchCur(){return{watch:undefined}}')],
["/loc.js", import('data:text/javascript;text,let oset;import.meta.__imports__=Promise.all([self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];oset=m.oset;});const trimSlashRe=new RegExp("(^/|/$)","g");const reHost=new RegExp("^(\\\\w+\\\\://|//)");const reSlash=new RegExp("//+");const reUp=new RegExp("[^/]+/+\\\\.\\\\./");const reThis=new RegExp("/+\\\\./");export function getLoc(e,r=""){e=new URL(e);const t=parsePath(e.href,e.pathname,r);t.hash=parsePath(e.hash,e.hash.substr(1),r);for(const[n,o]of e.searchParams){t.query[n]=o}return t}export function setLoc(e){oset(self,"loc",getLoc(e))}function parsePath(e,r,t){const n=r.replace(trimSlashRe,"").split("/"),o=type_loc(e,r,n[0]||t,n);for(let e=n.length-1;e>0;e-=2){o.param[n[e-1]]=decodeURIComponent(n[e])}return o}function type_loc(e,r,t,n){return{href:e,path:r,name:t,args:n,param:{},query:{}}}export function getUrl(r,t=location.href){if(isUri(r)){if(isUri(t)){t=normalizeUrl(t)}let e=normalizeUrl_get(r.trim());while(e.indexOf(".")===0){if(e.indexOf("./")===0){e=e.substr(2)}else if(e.indexOf("../")===0){e=e.substr(3)}}r=t.endsWith(e)?t:normalizeUrl(t.substr(0,t.lastIndexOf("/")+1)+r)}return r.search(reHost)===-1?location.origin+r:r}export function isUri(e){e=e.trimLeft();return e.search(reHost)!==0&&e[0]!=="/"}export function normalizeUrl(e){e=e.trim();if(isUri(e)){const r=location.pathname.lastIndexOf("/");if(r===location.pathname.length-1){e=location.pathname+e}else if(r!==-1){e=location.pathname.substr(0,r+1)+e}}return normalizeUrl_get(e)}function normalizeUrl_get(t){for(let e=[reUp,reThis],r=e.length-1;r>-1;r--){while(t.search(e[r])!==-1){t=t.replace(e[r],"/")}}if(t.search(reHost)===-1){return t.replace(reSlash,"/")}const e=t.indexOf("//");return t.substr(0,e+1)+t.substr(e+1).replace(reSlash,"/")}')],
["/cmd/foreach.js", import('data:text/javascript;text,let q_renderTag,type_req,type_isLast,type_q_arr,type_animation,type_renderRes,mw_doc,p_target,visibleScreenSize,defIdleCallbackOpt,foreachCmdName,renderPackSize,srcBy$src,$srcById,getNewId,type_asOneIdx,getAttrAfter,get$els,get$first,getNextStr,show,hide,is$visible,removeChild,q_cloneNode,type_q$i,setAsOneIdx,getIdx,setIdx,eval2,q_eval2,ocopy,kebabToCamelStyle,check;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/dom.js"),self.__import__.get("/eval2.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];q_renderTag=m.q_renderTag;type_req=m.type_req;type_isLast=m.type_isLast;type_q_arr=m.type_q_arr;type_animation=m.type_animation;type_renderRes=m.type_renderRes;m=arr[1];mw_doc=m.mw_doc;p_target=m.p_target;visibleScreenSize=m.visibleScreenSize;defIdleCallbackOpt=m.defIdleCallbackOpt;foreachCmdName=m.foreachCmdName;renderPackSize=m.renderPackSize;m=arr[2];srcBy$src=m.srcBy$src;$srcById=m.$srcById;getNewId=m.getNewId;type_asOneIdx=m.type_asOneIdx;getAttrAfter=m.getAttrAfter;get$els=m.get$els;get$first=m.get$first;getNextStr=m.getNextStr;m=arr[3];show=m.show;hide=m.hide;is$visible=m.is$visible;removeChild=m.removeChild;q_cloneNode=m.q_cloneNode;type_q$i=m.type_q$i;setAsOneIdx=m.setAsOneIdx;getIdx=m.getIdx;setIdx=m.setIdx;m=arr[4];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[5];ocopy=m.ocopy;kebabToCamelStyle=m.kebabToCamelStyle;check=m.check;});export default{isAsOne:true,get$els(e,t,n,r){const s=foreach_get$els(foreach_get$first(e,t,n,r),t,n,r),l=s.length,i=[];for(let t=0;t<l;t++){const o=s[t].length;for(let e=0;e<o;e++){i.push(s[t][e])}}return i},get$first:foreach_get$first,render(t){return eval2(t,t.$src,true).then(e=>foreach_render(t,e))},q_render(s,l,i){return q_eval2(s,l,i).then(t=>{const n=l.length,r=new Array(n);for(let e=0;e<n;e++){if(!i.has(e)){r[e]=foreach_render(type_req(l[e].$src,s.str,s.expr,l[e].scope,s.sync),t[e])}}return r})}};function foreach_render(e,t){const n=srcBy$src.get(e.$src);if(n.asOneIdx===null){n.asOneIdx=type_asOneIdx()}if(!n.asOneIdx.has(e.str)){setAsOneIdx(n,e.str,getNewId());setIdx(n,e.str,0)}const r=getCtx(e,t),s=r.els.length,l=r.keys.length,i=r.els[s-1].$els,o=i[i.length-1];if(l===0){show$first(e,r,hide);e.sync.animations.add(type_animation(()=>{for(let e,t=s-1;t>0;t--){const n=r.els[t].$els;for(e=r.els[t].length-1;e>-1;e--){removeChild(n[e])}}},e.sync.local,0));return type_renderRes(true,null,o)}const c=type_renderRes(true,null,o);if(s===1){const d=r.els[0].$els;if(d[0].nodeName==="TEMPLATE"){const f=srcBy$src.get(d[0]);if(f!==undefined&&f.isCmd){show$first(e,r,show);for(let e=d.length-1;e>-1;e--){d[e]=d[e].content.firstChild}e.sync.afterAnimations.add(type_animation(()=>q_forRender(e,r,r.els,s<l?()=>q_add(e,r):null),e.sync.local,0));return c}}}if(s===l){const u=q_forRender(e,r,r.els,null);return u===undefined?c:u.then(()=>c)}if(s<l){const u=q_forRender(e,r,r.els,()=>q_add(e,r));return u===undefined?c:u.then(()=>c)}const a=new Set;for(let e=l;e<s;e++){const i=r.els[e].$els.length,g=r.els[e].$els;for(let e=0;e<i;e++){a.add(g[e])}}r.els.splice(l,s-l);e.sync.animations.add(type_animation(()=>{for(const e of a){removeChild(e)}},e.sync.local,0));e.sync.afterAnimations.add(type_animation(()=>q_forRender(e,r,r.els,null),e.sync.local,0));return c}function getCtx(e,t){const n=-1,r=foreach_get$first(e.$src,e.str,e.expr,n),s=foreach_get$els(r,e.str,e.expr,n),l=getAttrAfter(srcBy$src.get(e.$src).descr.attr,e.str),i=kebabToCamelStyle(e.reqCmd.args[0]),o=kebabToCamelStyle(e.reqCmd.args[1]);if(!t){return type_ctx([],[],l,s,i,o)}if(Array.isArray(t)){const d=t.length,c=new Array(d);for(let e=0;e<d;e++){c[e]=e}return type_ctx(c,t,l,s,i,o)}if(t instanceof Set||t instanceof Map){const c=new Array(t.size),a=new Array(t.size);let e=0;for(const[f,u]of t.entries()){c[e]=f;a[e++]=u}return type_ctx(c,a,l,s,i,o)}const c=[],a=[];for(const g in t){c.push(g);a.push(t[g])}return type_ctx(c,a,l,s,i,o)}function type_ctx(e,t,n,r,s,l){const i=r.length,o=new Array(i);for(let e=0;e<i;e++){o[e]=type_q$i(r[e],e)}return{keys:e,value:t,attrsAfter:n,els:o,valName:s,keyName:l}}function show$first(t,e,n){const r=e.els[0].$els,s=r.length;for(let e=s-1;e>-1;e--){n(t,r[e])}}function foreach_get$first(t,n,e,r){for(let e=t;e!==null;e=e.previousSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}if(s.asOneIdx===null){return t}const l=getNextStr(s,n),i=s.asOneIdx.get(n);t=l!==""?get$first(e,s.descr.get$elsByStr,l):e;for(e=t.previousSibling;e!==null;e=e.previousSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}if(s.asOneIdx===null||s.asOneIdx.get(n)!==i){return t}if(l===""){t=e;continue}t=e=get$first(e,s.descr.get$elsByStr,l)}return t}return t}function foreach_get$els(t,n,e,r){for(let e=t;e!==null;e=e.nextSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}const l=getNextStr(s,n),i=s.asOneIdx.get(n),o=[];do{if(l!==""){const t=o[o.push(get$els(e,s.descr.get$elsByStr,l))-1];e=t[t.length-1]}else{o.push([e])}for(e=e.nextSibling;e!==null;e=e.nextSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}if(s.asOneIdx===null||s.asOneIdx.get(n)!==i){return o}break}}while(e!==null);return o}return[[t]]}function q_add(e,t){const n=t.els.length,r=t.keys.length,s=t.els[n-1],l=s.$els.length,i=s.$els[l-1],o=n;let c=0,a=0;for(let e=0;e<l;e++){const f=s.$els[e],u=srcBy$src.get(f);if(a===0&&u!==undefined){a=u.id}c+=f.offsetHeight}const d=Math.ceil(document.scrollingElement.clientHeight*visibleScreenSize/c)||renderPackSize;if(is$visible(i)){e.sync.animations.add(type_animation(()=>q_addInsert(e,t,a,r,o,d,i),e.sync.local,0));return}e.sync.afterAnimations.add(type_animation(()=>q_addDeferred(e,t,a,r,o,d),e.sync.local,0))}function q_addDeferred(n,r,s,l,i,o){return new Promise(e=>{const t=requestIdleCallback(()=>{n.sync.idleCallback.delete(t);n.sync.animations.add(type_animation(()=>{for(let e=n.sync.local.get(s);e.newSrcId!==0;e=n.sync.local.get(s)){s=e.newSrcId}q_addInsert(n,r,s,l,i,o,$srcById.get(s))},n.sync.local,s));e()},defIdleCallbackOpt);n.sync.idleCallback.set(t,e)})}function q_addInsert(t,n,r,s,l,i,e){const o=mw_doc.createDocumentFragment(),c=q_addI(t,r,o,s,l,i),a=c.length,d=get$last(t,e,l-1);l+=a;if(l>=s){d.parentNode.insertBefore(o,d.nextSibling);t.sync.afterAnimations.add(type_animation(()=>q_forRenderI(t,n,c),t.sync.local,0));return}const f=c[a-1].$els;for(let e=f[f.length-1];e!==null;e=e.previousSibling){const u=srcBy$src.get(e);if(u===undefined){continue}r=u.id;d.parentNode.insertBefore(o,d.nextSibling);t.sync.afterAnimations.add(type_animation(()=>q_forRenderI(t,n,c).then(()=>q_addDeferred(t,n,r,s,l,i)),t.sync.local,0));return}throw new Error("foreach.js")}function get$last(t,n,r){const s=srcBy$src.get(n).asOneIdx.get(t.str);for(let e=n.nextSibling;e!==null;e=e.nextSibling){const l=srcBy$src.get(e);if(l===undefined||!l.isCmd){continue}if(l.asOneIdx===null||l.asOneIdx.get(t.str)!==s||getIdx(l,t.str)!==r){return n}n=e}return n}function q_addI(e,t,n,r,s,l){const i=s+l>r?r-s:l,o=q_cloneNode(e,t,s,i),c=o[0].$els.length;for(let e,t=0;t<i;t++){const a=o[t].$els;for(e=0;e<c;e++){n.appendChild(a[e])}}return o}function q_forRender(n,r,s,l){const i=[],o=[],t=s.length;if(!n.sync.renderParam.isLinking){for(let e=0;e<t;e++){const c=s[e],a=c.$els,d=a.length;let t=false;for(let e=0;e<d;e++){if(is$visible(a[e])){t=true;break}}if(t){i.push(c)}else{o.push(c)}}}else{for(let e=0;e<t;e++){i.push(s[e])}}if(i.length!==0){return q_forRenderI(n,r,i).then(()=>{if(o.length!==0){n.sync.afterAnimations.add(type_animation(()=>q_forRender(n,r,o,l),n.sync.local,0));return}if(l!==null){l()}})}return new Promise(e=>{const t=requestIdleCallback(()=>{n.sync.idleCallback.delete(t);q_forRenderI(n,r,o.splice(0,renderPackSize)).then(()=>{if(o.length!==0){return q_forRender(n,r,o,l).then(e)}if(l!==null){l()}e()})});n.sync.idleCallback.set(t,e)},defIdleCallbackOpt)}function q_forRenderI(r,s,l){const i=l.length,o=new Array(i);for(let e,t,n=0;n<i;n++){const c=l[n],a=c.$els,d=a.length;e=a[0];if(!srcBy$src.has(e)){t=1;do{e=a[t++]}while(!srcBy$src.has(e))}const f=ocopy(r.scope),u=c.idx;if(s.valName){f[s.valName]=s.value[u]}if(s.keyName){f[s.keyName]=s.keys[u]}o[n]=type_q_arr(e,f)}return q_renderTag(o,s.attrsAfter,type_isLast(),r.sync)}')],
["/api.js", import('data:text/javascript;text,let incCache,render,curRender,setDelay,p_target,p_topUrl,removeChild,showLoading,getLoc,setLoc,getUrl,isUri,normalizeUrl,getProxy,oset,del,dispatchEvt;import.meta.__imports__=Promise.all([self.__import__.get("/cmd/inc.js"),self.__import__.get("/render/algo.js"),self.__import__.get("/config.js"),self.__import__.get("/dom.js"),self.__import__.get("/loading.js"),self.__import__.get("/loc.js"),self.__import__.get("/proxy.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];incCache=m.incCache;m=arr[1];render=m.render;curRender=m.curRender;setDelay=m.setDelay;m=arr[2];p_target=m.p_target;p_topUrl=m.p_topUrl;m=arr[3];removeChild=m.removeChild;m=arr[4];showLoading=m.showLoading;m=arr[5];getLoc=m.getLoc;setLoc=m.setLoc;getUrl=m.getUrl;isUri=m.isUri;normalizeUrl=m.normalizeUrl;m=arr[6];getProxy=m.getProxy;m=arr[7];oset=m.oset;del=m.del;dispatchEvt=m.dispatchEvt;});function begin(){self.mw_incCache=incCache;self.mw_render=render;self.mw_curRender=curRender;self.mw_setDelay=setDelay;self.mw_p_target=p_target;self.mw_p_topUrl=p_topUrl;self.mw_removeChild=removeChild;self.mw_showLoading=showLoading;self.mw_getLoc=getLoc;self.mw_setLoc=setLoc;self.mw_getUrl=getUrl;self.mw_isUri=isUri;self.mw_normalizeUrl=normalizeUrl;self.mw_oset=oset;self.mw_del=del;self.mw_dispatchEvt=dispatchEvt;self.mw_getProxy=getProxy}if(import.meta.__imports__===undefined){begin()}else{import.meta.__imports__.then(begin)}')],
["/cmd/exec.js", import('data:text/javascript;text,let p_target,eval2,q_eval2,kebabToCamelStyle;import.meta.__imports__=Promise.all([self.__import__.get("/config.js"),self.__import__.get("/eval2.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];p_target=m.p_target;m=arr[1];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[2];kebabToCamelStyle=m.kebabToCamelStyle;});export default{render(r){return eval2(r,r.$src,true).then(e=>{exec_render(r,r.scope,e);return null})},q_render(n,l,o){return q_eval2(n,l,o).then(r=>{const t=l.length;for(let e=0;e<t;e++){if(!o.has(e)){exec_render(n,l[e].scope,r[e])}}return null})}};function exec_render(e,r,t){const n=e.reqCmd.args[0];if(n!==undefined&&n!==""){r[p_target][kebabToCamelStyle(n)]=t}}')],
["/dom.js", import('data:text/javascript;text,let type_req,type_animation,type_cacheValue,type_cacheCurrent,mw_doc,mw_$src,p_topUrl,visibleScreenSize,defIdleCallbackOpt,incCmdName,onCmdName,textCmdName,descrIdName,asOneIdxName,idxName,removeEventName,defEventInit,reqCmd,$srcById,srcById,srcBy$src,descrById,getNewId,createSrc,type_asOneIdx,type_idx,get$els,getNextStr,loadingCount,varIdByVar,varById,srcIdsByVarId,varIdByVarIdByProp,check;import.meta.__imports__=Promise.all([self.__import__.get("/render/render.js"),self.__import__.get("/cache.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/loading.js"),self.__import__.get("/proxy.js"),self.__import__.get("/util.js")]).then(arr=>{let m;m=arr[0];type_req=m.type_req;type_animation=m.type_animation;m=arr[1];type_cacheValue=m.type_cacheValue;type_cacheCurrent=m.type_cacheCurrent;m=arr[2];mw_doc=m.mw_doc;mw_$src=m.mw_$src;p_topUrl=m.p_topUrl;visibleScreenSize=m.visibleScreenSize;defIdleCallbackOpt=m.defIdleCallbackOpt;incCmdName=m.incCmdName;onCmdName=m.onCmdName;textCmdName=m.textCmdName;descrIdName=m.descrIdName;asOneIdxName=m.asOneIdxName;idxName=m.idxName;removeEventName=m.removeEventName;defEventInit=m.defEventInit;reqCmd=m.reqCmd;m=arr[3];$srcById=m.$srcById;srcById=m.srcById;srcBy$src=m.srcBy$src;descrById=m.descrById;getNewId=m.getNewId;createSrc=m.createSrc;type_asOneIdx=m.type_asOneIdx;type_idx=m.type_idx;get$els=m.get$els;getNextStr=m.getNextStr;m=arr[4];loadingCount=m.loadingCount;m=arr[5];varIdByVar=m.varIdByVar;varById=m.varById;srcIdsByVarId=m.srcIdsByVarId;varIdByVarIdByProp=m.varIdByVarIdByProp;m=arr[6];check=m.check;});export function preRender(e,t){const n=e.parentNode,r=[],o=new Map;do{if(e.firstChild!==null){e=e.firstChild;continue}if(e.nodeName==="TEMPLATE"&&e.content.firstChild!==null){r.push(e);e=e.content.firstChild;continue}e=_preRenderCreate(e,o,t);if(e.parentNode===n){break}if(e.nextSibling!==null){e=e.nextSibling;continue}do{e=e.parentNode;if(e.parentNode===n){_preRenderCreate(e,o,t);e=null;break}if(e.parentNode.nodeType===11){e=r.pop();if(e.parentNode===n){_preRenderCreate(e,o,t);e=null;break}}e=_preRenderCreate(e,o,t);if(e.nextSibling!==null){e=e.nextSibling;break}}while(true)}while(e!==null)}function _preRenderCreate(e,t,n){if(e.nodeType===1){if(!n){createSrc(e);return e}const r=_preRenderGetSrc(e,t);if(!r.isCmd){return e}for(const o of r.descr.attr.keys()){const i=e.getAttribute(asOneIdxName+o),d=e.getAttribute(idxName+o);if(i!==null){if(r.asOneIdx===null){r.asOneIdx=type_asOneIdx([[o,!isNaN(i)?Number(i):i]])}else{r.asOneIdx.set(o,!isNaN(i)?Number(i):i)}}if(d!==null){if(r.idx===null){r.idx=type_idx([[!isNaN(d)?Number(d):d]]);continue}r.idx.set(o,!isNaN(d)?Number(d):d)}}return e}return e.nodeType===3?replaceTextBlocks(e):e}function _preRenderGetSrc(e,t){const n=e.getAttribute(descrIdName);if(n===null){return createSrc(e)}const r=t.get(n);if(r!==undefined){return createSrc(e,r,null,null)}const o=createSrc(e,createDescr(e,0),null,null);o.descr.sId=o.id;t.set(n,o.descr);return o}function replaceTextBlocks(e){const t=e.textContent;if(t.indexOf("${")===-1||e.parentNode.nodeName==="SCRIPT"){return e}if(e.nextSibling===null&&e.previousSibling===null){e.parentNode.setAttribute(textCmdName,"`"+t+"`");return e}const n=mw_doc.createElement("span");n.setAttribute(textCmdName,"`"+t+"`");e.parentNode.replaceChild(n,e);createSrc(n);return n}export function joinText(t){t=t.firstChild;for(let e;t!==null;t=t.nextSibling){while(t.nodeType===3&&(e=t.nextSibling)!==null&&e.nodeType===3){t.textContent+=$e.removeChild(e).textContent}}}export function removeChild(e){e.parentNode.removeChild(e);e.dispatchEvent(new CustomEvent(removeEventName,defEventInit));const t=new Map;let n=e;const r=null,o=[];do{const i=srcBy$src.get(n);if(i!==undefined){clearTag(n,i,t)}if(n.firstChild!==null){n=n.firstChild;continue}if(n.nodeName==="TEMPLATE"&&n.content.firstChild!==null){o.push(n);n=n.content.firstChild;continue}if(n.parentNode===r){break}if(n.nextSibling!==null){n=n.nextSibling;continue}do{n=n.parentNode;if(n.parentNode===r){n=null;break}if(n.parentNode.nodeType===11){n=o.pop();if(n.parentNode===r){n=null;break}}if(n.nextSibling!==null){n=n.nextSibling;break}}while(true)}while(n!==null);if(t.size===0){return}requestIdleCallback(()=>{clearVars(t)},defIdleCallbackOpt)}function clearTag(e,t,n){const r=t.id,o=t.descr,i=o.id;$srcById.delete(r);srcById.delete(r);srcBy$src.delete(e);if(!t.isCmd){o.srcIds.delete(r);if(o.srcIds.size===0){descrById.delete(i)}return}loadingCount.delete(r);o.srcIds.delete(r);if(o.sId===r){o.sId=o.srcIds.values().next().value}const d=n.get(i);if(d){d.add(r);return}n.set(i,new Set([r]))}function clearVars(e){const t=new Set,n=new Set,r=new Set;for(const[o,i]of e){const d=descrById.get(o);if(!d){continue}for(const l of d.varIds){t.add(l)}for(const c of i){n.add(c)}}for(const l of t){const i=srcIdsByVarId.get(l);if(!i){continue}const s=varIdByVarIdByProp.get(l);for(const c of n){if(i.has(c)){i.delete(c)}if(!s){continue}for(const[a,f]of s){const u=srcIdsByVarId.get(f);if(u&&u.has(c)){i.delete(c);u.delete(c);if(u.size===0){r.add(f);srcIdsByVarId.delete(f);s.delete(a)}}}}if(i.size===0){r.add(l);srcIdsByVarId.delete(l);varIdByVar.delete(varById.get(l));varById.delete(l);if(s){varIdByVarIdByProp.delete(l);if(s.size!==0){console.warn("должно быть пусто",l,s)}}}else if(s&&s.size===0){varIdByVarIdByProp.delete(l)}}for(const[o,i]of e){const d=descrById.get(o);if(!d){continue}for(const l of r){d.varIds.delete(l)}for(const c of i){d.srcIds.delete(c);if(d.sId===c){console.warn(22222222)}}if(d.srcIds.size===0){descrById.delete(o)}}}export function cloneNode(e,t){if(t.nodeType===11){const d=mw_doc.createDocumentFragment();for(t=t.firstChild;t!==null;t=t.nextSibling){d.appendChild(cloneNode(e,t))}return d}const n=t.cloneNode(true);if(n.nodeType!==1){return n}const r=n.nodeName!=="TEMPLATE"?n:n.content.firstChild,o=srcBy$src.get(e.$src);for(const[l,c]of o.descr.attr){if(l===e.str){break}const s=reqCmd.get(l);if(s.cmdName===onCmdName){s.cmd.render(type_req(r,l,c,e.scope,e.sync))}}const i=loadingCount.get(o.id);if(i!==undefined){loadingCount.set(n,i)}return n}export function q_cloneNode(r,t,n,o){for(let e=r.sync.local.get(t);e.newSrcId!==0;e=r.sync.local.get(t)){t=e.newSrcId}const e=$srcById.get(t),i=srcById.get(t),d=getNextStr(i,r.str),l=d!==""?get$els(e,i.descr.get$elsByStr,d):[e],c=l.length,s=new Array(o),a=[];let f;for(let e=0,t;e<c;e++){const h=l[e];f=srcBy$src.get(h);if(f===undefined||!f.isCmd){console.warn(h);continue}break}if(f===undefined){console.warn(">>>mw dom:q_cloneNode:",r,l,n,o);throw check(new Error(`>>>mw dom:q_cloneNode: среди элементов для клонирования нет элемента с командой, такого не должно быть`),r.$src,r)}const u=f.descr;for(const[g,C]of u.attr){if(g===r.str){break}const I=reqCmd.get(g);if(I.cmdName===onCmdName){a.push(type_q_cloneNodeOn(I.cmd,g,C))}}const p=a.length,m=loadingCount.get(f.id),N=new Set,x=new Array(o),y=u.asOnes.keys();for(let e=y.next();!e.done;e=y.next()){if(e.value!==r.str){continue}for(e=y.next();!e.done;e=y.next()){N.add(e.value)}}for(let e=0;e<o;e++){s[e]=type_q$i(new Array(c),e+n);x[e]=new Map}for(let e,t,n=0;n<c;n++){const b=new Array(o),_=l[n];q_cloneNodeCreate(_,_.nodeName!=="TEMPLATE",b,o,x,0,N);q_cloneNodeCreateChildren(_,b,o,x);for(e=0;e<o;e++){const w=s[e],h=w.$els[n]=b[e],S=srcBy$src.get(h);if(S===undefined){continue}setIdx(S,r.str,w.idx);if(p!==0){for(k=0;k<p;k+=3){const v=a[k];v.cmd.render(type_req(h,v.str,v.expr,r.scope,r.sync))}}if(m!==undefined){loadingCount.set(h,m)}}}return s}function q_cloneNodeCreate(t,e,n,r,o,i,d){const l=srcBy$src.get(t);if(l===undefined){if(i===2){for(let e=0;e<r;e++){n[e]=n[e].parentNode.appendChild(t.cloneNode())}return t}if(i===1){if(e){for(let e=0;e<r;e++){n[e]=n[e].appendChild(t.cloneNode())}return t}for(let e=0;e<r;e++){n[e]=n[e].content.appendChild(t.cloneNode())}return t}for(let e=0;e<r;e++){n[e]=t.cloneNode()}return t}const c=l.descr,s=l.idx,a=l.save,f=l.asOneIdx;if(f===null){if(i===2){for(let e=0;e<r;e++){createSrc(n[e]=n[e].parentNode.appendChild(t.cloneNode()),c,null,s===null?null:type_idx(s)).save=a}return t}if(i===1){if(e){for(let e=0;e<r;e++){createSrc(n[e]=n[e].appendChild(t.cloneNode()),c,null,s===null?null:type_idx(s)).save=a}return t}for(let e=0;e<r;e++){createSrc(n[e]=n[e].content.appendChild(t.cloneNode()),c,null,s===null?null:type_idx(s)).save=a}return t}for(let e=0;e<r;e++){createSrc(n[e]=t.cloneNode(),c,null,s===null?null:type_idx(s)).save=a}return t}if(i===2){for(let e=0;e<r;e++){createSrc(n[e]=n[e].parentNode.appendChild(t.cloneNode()),c,type_asOneIdx(f),type_idx(l.idx)).save=a}q_cloneNodeChangeAsOne(n,r,o,f);return t}if(i===1){if(e){for(let e=0;e<r;e++){createSrc(n[e]=n[e].appendChild(t.cloneNode()),c,type_asOneIdx(f),type_idx(l.idx)).save=a}q_cloneNodeChangeAsOne(n,r,o,f);return t}for(let e=0;e<r;e++){createSrc(n[e]=n[e].content.appendChild(t.cloneNode()),c,type_asOneIdx(f),type_idx(l.idx)).save=a}q_cloneNodeChangeAsOne(n,r,o,f);return t}for(let e=0;e<r;e++){createSrc(n[e]=t.cloneNode(),c,type_asOneIdx(f),type_idx(l.idx)).save=a}q_cloneNodeChangeAsOne(n,r,o,d);return t}function q_cloneNodeChangeAsOne(t,n,r,o){for(let e=0;e<n;e++){const i=t[e],d=srcBy$src.get(i);for(const l of o.keys()){const c=d.asOneIdx.get(l),s=r[e].get(c);if(s!==undefined){setAsOneIdx(d,l,s);continue}const a=getNewId();r[e].set(c,a);setAsOneIdx(d,l,a)}}}function q_cloneNodeCreateChildren(e,t,n,r){const o=new Array(n),i=e.parentNode,d=[];for(let e=0;e<n;e++){o[e]=[]}do{if(e.firstChild!==null){e=q_cloneNodeCreate(e.firstChild,true,t,n,r,1,null);continue}if(e.nodeName==="TEMPLATE"&&e.content.firstChild!==null){d.push(e);for(let e=0;e<n;e++){o[e].push(t[e])}e=q_cloneNodeCreate(e.content.firstChild,false,t,n,r,1,null);continue}if(e.parentNode===i){break}if(e.nextSibling!==null){e=q_cloneNodeCreate(e.nextSibling,true,t,n,r,2,null);continue}do{e=e.parentNode;for(let e=0;e<n;e++){t[e]=t[e].parentNode}if(e.parentNode===i){e=null;break}if(e.parentNode.nodeType===11){e=d.pop();for(let e=0;e<n;e++){t[e]=o[e].pop()}if(e.parentNode===i){e=null;break}}if(e.nextSibling!==null){e=q_cloneNodeCreate(e.nextSibling,true,t,n,r,2,null);break}}while(true)}while(e!==null)}export function type_q$i(e,t){return{$els:e,idx:t}}function type_q_cloneNodeOn(e,t,n){return{cmd:e,str:t,expr:n}}export function setAttribute(e,t,n){setAttributeValue(e,t,n);e.setAttribute(t,n)}export function setAttributeValue(e,t,n){switch(t){case"value":if(e===document.activeElement&&typeof e.setSelectionRange==="function"){const r=e.selectionStart;e.value=n;e.setSelectionRange(r,r)}else{e.value=n}break;case"checked":e.checked=!!n;break}}export function removeAttribute(e,t){switch(t){case"value":e.value="";break;case"checked":e.checked=false;break}e.removeAttribute(t)}export function show(e,t){if(t.nodeName!=="TEMPLATE"){return}e.sync.animations.add(type_animation(()=>_show(e,t),e.sync.local,0))}function _show(e,t){const n=t.content.firstChild;if(!n||n.nextSibling!==null){throw check(new Error(">>>mw show:01: Template element invalid structure on show function. <template>.content.childNodes.length must be only one element."),t)}if(n.nodeType===1&&srcBy$src.has(t)){moveProps(t,n,true)}if(e.$src===t){e.$src=n}t.parentNode.replaceChild(n,t)}export function hide(e,t){if(t.nodeName==="TEMPLATE"){return}e.sync.animations.add(type_animation(()=>_hide(t),e.sync.local,srcBy$src.get(t).id))}function _hide(e){let t=e;const n=mw_doc.createElement("template"),r=t.parentNode,o=[];do{const i=srcBy$src.get(t);if(i!==undefined){const d=i.cache;if(d!==null){d.value=type_cacheValue();d.current=type_cacheCurrent()}}if(t.firstChild!==null){t=t.firstChild;continue}if(t.nodeName==="TEMPLATE"&&i.isCmd&&t.content.firstChild.firstChild!==null){o.push(t);t=t.content.firstChild.firstChild;continue}if(t.parentNode===r){break}if(t.nextSibling!==null){t=t.nextSibling;continue}do{t=t.parentNode;if(t.parentNode===r){t=null;break}if(t.parentNode.nodeType===11){t=o.pop();if(t.parentNode===r){t=null;break}}if(t.nextSibling!==null){t=t.nextSibling;break}}while(true)}while(t!==null);if(e.nodeType===1){moveProps(e,n,false)}e.parentNode.replaceChild(n,e);n.content.appendChild(e)}function moveProps(e,t,n){const r=srcBy$src.get(e);$srcById.set(r.id,t);srcById.set(r.id,r);srcBy$src.set(t,r);t[p_topUrl]=e[p_topUrl];if(n){return}const o=e.attributes,i=o.length;for(let e=0;e<i;e++){const d=o[e];setAttribute(t,d.name,d.value)}}export function is$hide(e){do{if(e===mw_$src){return false}e=e.parentNode}while(e!==null);return true}export function isAnimationVisible(e){return e.viewedSrcId===0?true:is$visible($srcById.get(e.viewedSrcId))}const $scroll=document.scrollingElement;export function is$visible(e){while(e.nodeType!==1){e=e.nextSibling;if(e===null){return true}}const t=1-visibleScreenSize,n=$scroll.clientWidth*t,r=$scroll.clientWidth+n*-1,o=$scroll.clientHeight*t,i=$scroll.clientHeight+o*-1,d=e.getBoundingClientRect();return!(d.top>i||d.top+d.height<o||(d.left>r||d.left+d.width<n))}export function setAsOneIdx(e,t,n){if(e.asOneIdx===null){e.asOneIdx=type_asOneIdx()}e.asOneIdx.set(t,n);if(self.mw_debugLevel===0){return}const r=$srcById.get(e.id),o=asOneIdxName+t;r.setAttribute(o,n);if(r.nodeName==="TEMPLATE"){r.content.firstChild.setAttribute(o,n)}}export function getIdx(e,t){if(e.idx!==null){return e.idx.get(t)}}export function setIdx(e,t,n){if(e.idx===null){e.idx=type_idx()}e.idx.set(t,n);if(self.mw_debugLevel===0){return}const r=$srcById.get(e.id),o=idxName+t;r.setAttribute(o,n);if(r.nodeName==="TEMPLATE"){r.content.firstChild.setAttribute(o,n)}}export function getTopUrl(t,e){if(e!==""){const n=getAttrTopUrl(t,e);if(n!==""){return n}}for(let e=$srcById.get(t.id).parentNode;e!==mw_$src;e=e.parentNode){const n=getAttrTopUrl(srcBy$src.get(e));if(n!==""){return n}if(e[p_topUrl]!==undefined){return e[p_topUrl]}}return""}function getAttrTopUrl(e,t){if(!e.isCmd){return""}const n=e.descr.attr.keys();let r="";if(t!==""){for(const o of n){if(o===t){break}if(reqCmd.get(o).cmdName===incCmdName){r=getIdx(e,o)}}return r}for(const o of n){if(reqCmd.get(o).cmdName===incCmdName){r=getIdx(e,o)}}return r}')],
["/util.js", import('data:text/javascript;text,let defRequestInit,defEventInit,srcBy$src,getUrl;import.meta.__imports__=Promise.all([self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/loc.js")]).then(arr=>{let m;m=arr[0];defRequestInit=m.defRequestInit;defEventInit=m.defEventInit;m=arr[1];srcBy$src=m.srcBy$src;m=arr[2];getUrl=m.getUrl;});export function check(e,t,n,r,o,s,i){let f=">>>mw error";if(self.mw_getLineNo!==undefined){const c=self.mw_getLineNo(t)||self.mw_getLineNo(t.parentNode);if(c){f+=` in ${c}`}}f+="\\n"+e.toString();const u=[];u.push("\\n$src =>",t,"\\nsId =>",srcBy$src.get(t)?.id);if(n){u.push("\\nreq =>",n);u.push("\\n"+n.str+" =>",n.expr)}if(r){u.push("\\nscope =>",r)}if(self.mw_debugLevel!==0){console.info(f,...u)}return o?new Error(e,o,s,i):e}export function getRequest(e,t){if(typeof e==="string"){return e!==""?new Request(getUrl(e,t),defRequestInit):null}return e instanceof Request||e instanceof Response?e:null}export function dispatchEvt(e,t,n){const r={detail:n};for(const o in defEventInit){r[o]=defEventInit[o]}e.dispatchEvent(new CustomEvent(t,r))}export function kebabToCamelStyle(t){if(!t){return t}const n=t.split("-"),r=n.length;if(r==1){return t}t=n[0];for(let e=1;e<r;e++){if(n[e]!==""){t+=n[e][0].toUpperCase()+n[e].substr(1)}}return t}export function oset(e,t,n){const r=e[t];if(typeof r!=="object"||r===null||typeof n!=="object"||n===null){e[t]=n;return true}if(Array.isArray(r)){return _osetArray(e,t,n)}return _osetObject(e,t,n)}function _osetArray(e,t,n){if(!Array.isArray(n)){e[t]=n;return true}const r=e[t],o=r.length,s=n.length;for(let e=0;e<o&&e<s;e++){oset(r,e,n[e])}const i=o-s;if(i>0){r.splice(s,i);return true}for(let e=o;e<s;e++){r.push(n[e])}return true}function _osetObject(e,t,n){if(typeof n!=="object"||n===null){e[t]=n;return true}const r=e[t];for(const o in r){if(!(o in n)){delete r[o]}}for(const o in n){oset(r,o,n[o])}return true}export function del(e,t){const n=e[t];delete e[t];return n}export function ocopy(e){const t={};for(const n in e){t[n]=e[n]}return t}')]]));
let syncInRender,render,renderLoop,addAnimation,globVarName,locVarName,$srcById,isAnimationVisible,getLoc,setLoc,getProxy;import.meta.__imports__=Promise.all([self.__import__.get("/addons.js"),self.__import__.get("/api.js"),self.__import__.get("/render/algo.js"),self.__import__.get("/config.js"),self.__import__.get("/descr.js"),self.__import__.get("/dom.js"),self.__import__.get("/loc.js"),self.__import__.get("/proxy.js")]).then(arr=>{let m;m=arr[2];syncInRender=m.syncInRender;render=m.render;renderLoop=m.renderLoop;addAnimation=m.addAnimation;m=arr[3];globVarName=m.globVarName;locVarName=m.locVarName;m=arr[4];$srcById=m.$srcById;m=arr[5];isAnimationVisible=m.isAnimationVisible;m=arr[6];getLoc=m.getLoc;setLoc=m.setLoc;m=arr[7];getProxy=m.getProxy;});const evtOpt={passive:true};function begin(){const e=import.meta.url;self.mw_debugLevel=e.indexOf("debug=1")!==-1?1:e.indexOf("debug=2")!==-1?2:0;self[globVarName]=getProxy(self[globVarName]||{});self[locVarName]=getProxy(getLoc(location.href));if(e.indexOf("load=skip")!==-1){if(self.mw_debugLevel!==0){import(e.replace(/([^\/]+?\.js)/,"getlineno.js"))}return}const n=()=>{if(self.mw_debugLevel===0){render(undefined,undefined,undefined,e.indexOf("linking=1")!==-1);return}import(e.replace(/([^\/]+?\.js)/,"getlineno.js")).then(e=>e.default).then(()=>render(undefined,undefined,undefined,e.indexOf("linking=1")!==-1))};if(e.indexOf("load=onload")===-1){if(document.readyState!=="loading"){n();return}document.addEventListener("DOMContentLoaded",n,{once:true});return}if(document.readyState==="complete"){n();return}self.addEventListener("load",n,{once:true})}if(import.meta.__imports__===undefined){begin()}else{import.meta.__imports__.then(begin)}self.addEventListener("scroll",async()=>{const e=new Set,n=new Set;for(const o of syncInRender){if(o.stat!==0||o.scrollAnimations.size===0){continue}const i=new Set;for(const t of o.scrollAnimations){if(!$srcById.has(t.viewedSrcId)){o.scrollAnimations.delete(t);if(o.scrollAnimations.size===0){n.add(o)}continue}if(isAnimationVisible(t)){o.scrollAnimations.delete(t);i.add(t)}}if(i.size!==0){e.add(addAnimation(o,i,true));n.add(o)}}if(e.size!==0){Promise.all(e).then(()=>renderLoop(n));return}if(n.size!==0){console.warn("2animation");renderLoop(n)}},evtOpt);self.addEventListener("popstate",()=>{setLoc(location.href)},evtOpt);
/*!
 * myweb v0.9.04
 * (c) 2019-2021 Aleksey Zobnev
 * Released under the MIT License.
 * https://github.com/mywebengine/myweb
 */
self.__p=new Set;self.__i=new Map([["/evt.js", import('data:text/javascript;text,let defEventInit;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js")]).then(arr=>{let m;m=arr[0];defEventInit=m.defEventInit;}));export function dispatchCustomEvent(t,n,e){const i={detail:e};for(const o in defEventInit){i[o]=defEventInit[o]}t.dispatchEvent(new CustomEvent(n,i))}')],
["/err.js", import('data:text/javascript;text,let srcBy$src;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/descr.js")]).then(arr=>{let m;m=arr[0];srcBy$src=m.srcBy$src;}));export function getErr(e,r,n,s,o,t,i){let f=">>>mw error";if(self.mw_getLineNo!==undefined){const p=self.mw_getLineNo(r)||self.mw_getLineNo(r.parentNode);if(p){f+=` in ${p}`}}f+="\\n"+e.toString();const c=[];c.push("\\n$src =>",r,"\\nsId =>",srcBy$src.get(r)?.id);if(n){c.push("\\nreq =>",n);c.push("\\n"+n.str+" =>",n.expr)}if(s){c.push("\\nscope =>",s)}if(self.mw_debugLevel!==0){console.info(f,...c)}return o?new Error(e,o,t,i):e}')],
["/cmd/inc.js", import('data:text/javascript;text,let renderTag,type_req,setReqCmd,type_localCounter,type_animation,type_renderRes,mw_doc,p_target,cmdPref,cmdArgsDiv,cmdArgsDivLen,incCmdName,fetchCmdName,foreachCmdName,elseCmdName,defaultCmdName,onCmdName,isFillingName,isFillingDiv,asOneIdxName,idxName,defRequestInit,reqCmd,srcById,srcBy$src,getAttrItAfter,get$els,type_asOneIdx,type_idx,type_save,type_saveI,preRender,joinText,removeChild,cloneNode,getIdx,setIdx,getTopUrl,getErr,eval2,q_eval2,loadingCount,showLoading,ocopy,srcIdsByVarId,getRequest,getUrl;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/dom.js"),self.__i.get("/err.js"),self.__i.get("/eval2.js"),self.__i.get("/loading.js"),self.__i.get("/oset.js"),self.__i.get("/proxy.js"),self.__i.get("/url.js")]).then(arr=>{let m;m=arr[0];renderTag=m.renderTag;type_req=m.type_req;setReqCmd=m.setReqCmd;type_localCounter=m.type_localCounter;type_animation=m.type_animation;type_renderRes=m.type_renderRes;m=arr[1];mw_doc=m.mw_doc;p_target=m.p_target;cmdPref=m.cmdPref;cmdArgsDiv=m.cmdArgsDiv;cmdArgsDivLen=m.cmdArgsDivLen;incCmdName=m.incCmdName;fetchCmdName=m.fetchCmdName;foreachCmdName=m.foreachCmdName;elseCmdName=m.elseCmdName;defaultCmdName=m.defaultCmdName;onCmdName=m.onCmdName;isFillingName=m.isFillingName;isFillingDiv=m.isFillingDiv;asOneIdxName=m.asOneIdxName;idxName=m.idxName;defRequestInit=m.defRequestInit;reqCmd=m.reqCmd;m=arr[2];srcById=m.srcById;srcBy$src=m.srcBy$src;getAttrItAfter=m.getAttrItAfter;get$els=m.get$els;type_asOneIdx=m.type_asOneIdx;type_idx=m.type_idx;type_save=m.type_save;type_saveI=m.type_saveI;m=arr[3];preRender=m.preRender;joinText=m.joinText;removeChild=m.removeChild;cloneNode=m.cloneNode;getIdx=m.getIdx;setIdx=m.setIdx;getTopUrl=m.getTopUrl;m=arr[4];getErr=m.getErr;m=arr[5];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[6];loadingCount=m.loadingCount;showLoading=m.showLoading;m=arr[7];ocopy=m.ocopy;m=arr[8];srcIdsByVarId=m.srcIdsByVarId;m=arr[9];getRequest=m.getRequest;getUrl=m.getUrl;}));const waitingStack=new Map;export const incCache=new Map;const incScriptCache=new Map;export default{get$els(e,t,n,r){return inc_get$els(e,t,n,r)},get$first(e,t,n,r){return inc_get$first(e,t,n,r)},render(t){return eval2(t,t.$src,true).then(e=>inc_render(t,e))},q_render(i,c,s){return q_eval2(i,c,s).then(t=>{const n=c.length,r=new Array(n);for(let e=0;e<n;e++){if(!s.has(e)){r[e]=inc_render(type_req(c[e].$src,i.str,i.expr,c[e].scope,i.sync),t[e])}}return r})}};function inc_render(t,e){const n=getIncude(t,e);if(n===null){return type_renderRes(true)}const r=-1,i=inc_get$els(t.$src,t.str,t.expr,r),c=i.length,s=getIdx(srcBy$src.get(t.$src),t.str);for(let e=0;e<c;e++){const a=srcBy$src.get(i[e]);if(a!==undefined&&!t.sync.local.has(a.id)){t.sync.local.set(a.id,type_localCounter())}}if(c!==1&&s===n.key){return c>3?renderI(t,i[0],i[c-1],renderInc).then(e=>readyInc(t,n,e)):null}const o=i[c-1];if(n.readyState==="complete"){getNewInc(t,n,s,i,c,null);return type_renderRes(true,null,o)}const l=type_incLoading(t);if(l.isShow){showLoading(t.$src,()=>n.readyState==="complete",l.type,l.waitTime)}if(!waitingStack.has(n.key)){waitingStack.set(n.key,(n.res===null?fetch(n.req).then(e=>e.text()):n.res.text()).then(e=>{waitingStack.delete(n.key);return createIncFragment(t,n,e)}))}const d=waitingStack.get(n.key);t.sync.afterAnimations.add(type_animation(()=>d.then(()=>t.sync.stat===0&&getNewInc(t,n,s,i,c,l)),t.sync.local,0));return type_renderRes(true,null,o)}function getIncude(e,t){if(typeof t!=="string"){const n=getRequest(t,"");if(n===null){return null}if(n.method==="GET"||n.method===undefined){const r=incCache.get(n.url);if(r!==undefined){return r}}const i=n instanceof Request?type_include("loading",n.url,n,null):type_include("loading",n.url,null,n);incCache.set(i.key,i);return i}if(t===""){return null}const n=getRequest(t,getTopUrl(srcBy$src.get(e.$src),e.str)),r=incCache.get(n.url);if(r!==undefined){return r}const i=type_include("loading",n.url,n,null);incCache.set(i.url,i);return i}function type_include(e,t,n,r){return{key:n===null?t:n.method==="GET"?t:n,readyState:e,url:t,req:n,res:r,$fr:null,$tags:null,scope:null}}function type_incLoading(e){const t=e.reqCmd.args[0],n=e.reqCmd.args[1];return{isShow:n!==""&&n!==undefined||t!==""&&t!==undefined,type:t!==""&&t!==undefined?t:"",waitTime:n!==""&&n!==undefined?n:""}}async function createIncFragment(e,t,n){const r=mw_doc.createDocumentFragment(),i=mw_doc.createElement("div");i.innerHTML=n;for(let e=i.firstChild;e!==null;e=i.firstChild){r.appendChild(e)}if(self.mw_createLineNo){self.mw_createLineNo(t.url,n,r)}joinText(r);t.$tags=[...r.querySelectorAll("link[rel]")];for(const s of t.$tags){const o=s.getAttribute("href");if(o){const l=getUrl(o,t.url);if(o!==l){s.setAttribute("href",l)}}}t.$tags.push(...r.querySelectorAll("style"));const c=r.querySelectorAll("script");if(c.length!==0){await createIncScripts(e,t,c)}if(t.$tags.length!==0){if(t.$tags[0].parentNode===mw_doc.head){console.warn("applyIncFragment",t.$tags,e)}for(const s of t.$tags){mw_doc.head.appendChild(s)}}t.$fr=r;t.readyState="complete"}function createIncScripts(t,n,r){const i=r.length,c=new Array(i);for(let e=0;e<i;e++){c[e]=createIncScript(t,n,r[e])}return Promise.all(c)}function createIncScript(t,n,r){r.parentNode.removeChild(r);const e=r.getAttribute("src"),i=e!==null?getUrl(e,n.url):null;if(i!==e){r.setAttribute("src",i)}if(r.type==="module"){if(i!==null){try{return import(i).then(e=>incToScope(e,n))}catch(e){throw checkScript(e,r,t,i)}}const s=URL.createObjectURL(new Blob([r.textContent],{type:"text/javascript"}));try{return import(s).then(e=>{URL.revokeObjectURL(s);incToScope(e,n)})}catch(e){URL.revokeObjectURL(s);throw checkScript(e,r,t)}return}if(i===null){runIncScript(t,r.textContent,r,i);return}const c=incScriptCache.get(i);if(c!==undefined){runIncScript(t,c,r,i);return}return fetch(i,defRequestInit).then(e=>{if(e.ok){return e.text()}throw getErr(new Error(`>>>mw inc:createIncScript: Request stat ${e.status}`),t.$src,t)}).then(e=>{incScriptCache.set(i,e);runIncScript(t,e,r,i)})}function incToScope(e,t){t.scope={};for(const n in e){const r=e[n];t.scope[r.name!==undefined?r.name:n]=r}}function scopeToInc(e,t){if(e.scope===null){return}for(const n in e.scope){t.scope[p_target][n]=e.scope[n]}}function runIncScript(t,e,n,r){try{self.eval(e)}catch(e){throw checkScript(e,n,t,r)}}function checkScript(e,t,n,r){if(r){return getErr(e,t,n,null,r,e.lineNumber,e.columnNumber)}if(self.mw_getLineNo===undefined){return getErr(e,t,n)}const i=self.mw_getLineNo(t),c=i.lastIndexOf(":");return getErr(e,t,n,null,i.substr(0,c),Number(i.substr(c+1))-1+e.lineNumber)}function getNewInc(r,i,c,s,o,l){r.sync.animations.add(type_animation(()=>{const e=cloneIncFragment(r,i,c,l),t=e.firstChild,n=e.lastChild;getNewIncInsert(r,c,s,o,e,t);r.sync.afterAnimations.add(type_animation(()=>{scopeToInc(i,r);return renderI(r,t,n,renderNewInc).then(e=>readyInc(r,i,e))},r.sync.local,0))},r.sync.local,0))}function getNewIncInsert(n,e,r,i,t,c){let s=0;for(let e=t.firstChild;e!==null;e=e.nextSibling){const a=srcBy$src.get(e);if(a!==undefined){s=a.id;break}}const o=r[0].parentNode,l=r[i-1].nextSibling,d=srcBy$src.get(n.$src);for(let e,t=0;;t++){e=srcBy$src.get(r[t]);if(e===undefined){removeChild(r[t],n);continue}const u=srcById.get(s).descr.varIds;for(const f of e.descr.varIds){u.add(f);srcIdsByVarId.get(f).add(s)}do{if(e!==undefined){const g=n.sync.local.get(e.id);g.animationsCount=-1;g.newSrcId=s;if(e.id===n.sync.renderParam.sId){n.sync.renderParam.sId=s}}removeChild(r[t]);e=srcBy$src.get(r[t])}while(++t<i);break}o.insertBefore(t,l)}async function renderNewInc(e,t){return renderTag(t,e.scope,e.str,e.sync)}function renderInc(e,t){return renderTag(t,e.scope,e.str,e.sync)}async function renderI(e,t,n,r){do{const i=srcBy$src.get(t);if(i!==undefined&&i.isCmd){t=await r(e,t);if(e.sync.stat!==0){return n}}if(t===n){return n}t=t.nextSibling}while(t!==null);throw new Error("inc.js")}function readyInc(e,t,n){return type_renderRes(true,null,n)}function cloneIncFragment(r,t,e,n){const i=cloneNode(r,t.$fr),c=srcBy$src.get(r.$src),s=c.descr,o=r.$src.attributes,l=o.length,d=new Map,a=e!==undefined,u=c.asOneIdx!==null?c.asOneIdx:type_asOneIdx(),f=c.idx!==null?c.idx:type_idx(),g=c.save!==null?c.save:type_save();for(const m of getAttrItAfter(s.attr.keys(),r.str,false)){u.delete(m);f.delete(m)}if(a){for(const[m,p]of g.get(r.str)){d.set(m,p)}}else{const y=new Set;if(n!==null&&n.isShow){const I=c.id,_=loadingCount.get(I),w=_.get("")-1;_.set("",w);if(w<=0){y.add(isFillingName)}if(n.type!==""){const w=_.get(n.type)-1;_.set(n.type,w);if(w<=0){y.add(isFillingName+isFillingDiv+n.type)}}}const h=type_saveI();g.set(r.str,h);for(let e=0;e<l;e++){const C=o[e];if(y.has(C.name)){continue}d.set(C.name,C.value);if((self.mw_debugLevel!==0||C.name.indexOf(idxName)!==0&&C.name.indexOf(asOneIdxName)!==0)&&C.name.indexOf(isFillingName)!==0){h.set(C.name,C.value)}}}for(let e=0,n=i.firstChild;n!==null;e++,n=n.nextSibling){if(n.nodeType!==1){continue}const $=n.attributes,x=$.length,S=new Map;for(let e=0;e<x;e++){const C=$[e];S.set(C.name,C.value)}for(const m of S.keys()){n.removeAttribute(m)}const b=d.entries(),v=new Set;for(let t=b.next();!t.done;t=b.next()){const[m,p]=t.value;n.removeAttribute(m);n.setAttribute(m,p);v.add(m);if(m!==r.str){continue}for(const[m,p]of S){if(!setReqCmd(m)){n.removeAttribute(m);n.setAttribute(m,p);continue}let e=m;while(v.has(e)){e+=cmdArgsDiv}v.add(e);n.setAttribute(e,p)}for(t=b.next();!t.done;t=b.next()){const[m,p]=t.value;if(!setReqCmd(m)){n.removeAttribute(m);n.setAttribute(m,p);continue}let e=m;while(v.has(e)){e+=cmdArgsDiv}n.setAttribute(e,p)}break}preRender(n,false);const N=srcBy$src.get(n);if(u.size!==0){N.asOneIdx=type_asOneIdx(u)}N.idx=type_idx(f);N.save=type_save(g);if(self.mw_debugLevel!==0){for(const[m,p]of u){n.setAttribute(asOneIdxName+m,p)}for(const[m,p]of f){n.setAttribute(idxName+m,p)}}setIdx(N,r.str,t.key)}if(!i.firstElementChild){return i}if(!a){makeSlots(r,i)}i.insertBefore(mw_doc.createComment("inc_begin"),i.firstChild);i.appendChild(mw_doc.createComment("inc_end"));return i}function makeSlots(t,e){const n=e.querySelectorAll("slot"),r=n.length;let i=null;for(let e=0;e<r;e++){const c=n[e],s=c.name;if(s===""&&!i){i=c;continue}const o=t.$src.querySelectorAll(`[slot="${s}"]`),l=o.length;for(let e=0;e<l;e++){const d=o[e],a=srcBy$src.get(d).descr.get$elsByStr;if(a===null){c.appendChild(d);continue}const u=get$els(d,a,""),f=u.length;for(let e=0;e<f;e++){c.appendChild(u[e])}}}if(i===null){return}for(let e=t.$src.firstChild;e!==null;e=t.$src.firstChild){i.appendChild(e)}}function inc_get$els(n,r,i,c){if(n.nodeType===1&&!isRenderdInc(n,r)){return[n]}const s=[];for(let e=inc_get$first(n,r,i,c),t=0;e!==null;e=e.nextSibling){s.push(e);const o=srcBy$src.get(e);if(o===undefined||!o.isCmd){continue}t=getIncCount(e,r,i,c);for(e=e.nextSibling;e!==null;e=e.nextSibling){s.push(e);const o=srcBy$src.get(e);if(o!==undefined&&o.isCmd||e.nodeType!==8){continue}const l=e.textContent;if(l==="inc_end"){if(t===0){return s}t--}else if(l==="inc_begin"){t++}}break}throw getErr(new Error(`>>>mw inc:incGet$els: Not found <!--inc_begin-->: "${r}", "${i}", ${c}`),n)}function inc_get$first(n,r,i,c){if(n.nodeType===1&&!isRenderdInc(n,r)){return n}if(n.nodeType===8&&n.textContent==="inc_begin"){return n}for(let e=n,t=0;e!==null;e=e.previousSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}t=getIncCount(e,r,i,c);for(e=e.previousSibling;e!==null;e=e.previousSibling){const s=srcBy$src.get(e);if(s!==undefined&&s.isCmd||e.nodeType!==8){continue}const o=e.textContent;if(o==="inc_begin"){if(t===0){return e}t--}else if(o==="inc_end"){t++}}break}throw getErr(new Error(`>>>mw inc:incGet$first: Not found <!--inc_begin-->: "${r}", "${i}", ${c}`),n)}function getIncCount(t,e,n,r){let i=0;const c=getAttrItAfter(srcBy$src.get(t).descr.attr.keys(),e,false);for(let e=c.next();!e.done;e=c.next()){if(reqCmd.get(e.value).cmdName!==incCmdName){continue}if(!isRenderdInc(t,e.value)){return i}i++}return i}function isRenderdInc(e,t){if(e.nodeType===8&&e.textContent==="inc_end"){while(!srcBy$src.has(e)&&e!==null){e=e.previousSibling}}else{while(!srcBy$src.has(e)&&e!==null){e=e.nextSibling}}const n=srcBy$src.get(e);if(t){return getIdx(n,t)!==undefined}for(const r of n.descr.attr.keys()){if(reqCmd.get(r).cmdName===incCmdName){return getIdx(n,r)!==undefined}}}')],
["/view.js", import('data:text/javascript;text,let viewVarName,oset,getProxy;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js"),self.__i.get("/oset.js"),self.__i.get("/proxy.js")]).then(arr=>{let m;m=arr[0];viewVarName=m.viewVarName;m=arr[1];oset=m.oset;m=arr[2];getProxy=m.getProxy;}));export function setView(e){oset(self,viewVarName,getView(e))}export function getView(e){const t=e.scrollingElement;return{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,clientWidth:t.clientWidth,clientHeight:t.clientHeight}}')],
["/cmd/on.js", import('data:text/javascript;text,let type_req,type_cacheValue,p_target,preventDefaultModName,stopModName,selfModName,exactModName,eventScopeName,srcBy$src,getErr,eval2,kebabToCamelCase;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/cache.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/err.js"),self.__i.get("/eval2.js"),self.__i.get("/str.js")]).then(arr=>{let m;m=arr[0];type_req=m.type_req;m=arr[1];type_cacheValue=m.type_cacheValue;m=arr[2];p_target=m.p_target;preventDefaultModName=m.preventDefaultModName;stopModName=m.stopModName;selfModName=m.selfModName;exactModName=m.exactModName;eventScopeName=m.eventScopeName;m=arr[3];srcBy$src=m.srcBy$src;m=arr[4];getErr=m.getErr;m=arr[5];eval2=m.eval2;m=arr[6];kebabToCamelCase=m.kebabToCamelCase;}));export default{render(e){on_render(e,e.$src);return null},q_render(t,r,n){const s=r.length;for(let e=0;e<s;e++){if(!n.has(e)){on_render(t,r[e].$src)}}return null}};const isInit=new WeakMap;function on_render(t,r){const e=t.reqCmd.args[0];if(!e){throw getErr(new Error(">>>mw on:render:01: Need set action name"),r,t)}const n=srcBy$src.get(r);const s=n.cache;if(s.isInits.has(t.str)){return}s.isInits.add(t.str);const a=isInit.get(r);if(a!==undefined&&a.has(t.str)){a.delete(t.str);return}const c=type_listenerOptions();for(let e=t.reqCmd.args.length-1;e>0;e--){switch(t.reqCmd.args[e]){case"capture":c.capture=true;continue;case"once":c.once=true;continue;case"passive":c.passive=true;continue}}r.addEventListener(kebabToCamelCase(e),e=>listen(t,r,e),c)}const holdsKeys=new Set(["ctrl","alt","shift","meta"]);function listen(t,r,n){const s=t.reqCmd.args.length,a=new Set;for(let e=1;e<s;e++){const o=t.reqCmd.args[e];switch(o){case"":case"capture":case"once":case"passive":continue;case preventDefaultModName:n.preventDefault();continue;case stopModName:n.stopPropagation();continue;case selfModName:if(n.target===r){continue}return;case"ctrl":if(n.ctrlKey){a.add("ctrl");continue}return;case"alt":if(n.altKey){a.add("alt");continue}return;case"shift":if(n.shiftKey){a.add("shift");continue}return;case"meta":if(n.metaKey){a.add("meat");continue}return;case exactModName:for(const e of holdsKeys){if(a.has(e)){continue}switch(e){case"ctrl":if(n.ctrlKey){return}continue;case"alt":if(n.altKey){return}continue;case"shift":if(n.shiftKey){return}continue;case"meta":if(n.metaKey){return}continue}}continue}if(n.type==="input"){if(n.data!==null&&o===n.data.toLowerCase()){continue}return}if(n.type.indexOf("key")===0){if(o===n.key.toLowerCase()){continue}return}if(n.type.indexOf("mouse")===0&&!isNaN(o)){if(Number(o)===n.button){continue}return}}const e=srcBy$src.get(r),c=e.scopeCache;c[p_target][eventScopeName]=n;e.cache.value=type_cacheValue();eval2(type_req(r,t.str,t.expr,c,null),r,false)}function type_listenerOptions(){return{capture:false,once:false,passive:false}}')],
["/config.js", import('data:text/javascript;text,let attrCmd,execCmd,fetchCmd,foreachCmd,htmlCmd,ifCmd,switchCmd,incCmd,onCmd,scopeCmd,fillingCmd,watchCmd;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/cmd/attr.js"),self.__i.get("/cmd/exec.js"),self.__i.get("/cmd/fetch.js"),self.__i.get("/cmd/foreach.js"),self.__i.get("/cmd/html.js"),self.__i.get("/cmd/if.js"),self.__i.get("/cmd/inc.js"),self.__i.get("/cmd/on.js"),self.__i.get("/cmd/scope.js"),self.__i.get("/cmd/filling.js"),self.__i.get("/cmd/watch.js")]).then(arr=>{let m;m=arr[0];attrCmd=m.default;m=arr[1];execCmd=m.default;m=arr[2];fetchCmd=m.default;m=arr[3];foreachCmd=m.default;m=arr[4];htmlCmd=m.default;m=arr[5];ifCmd=m.ifCmd;switchCmd=m.switchCmd;m=arr[6];incCmd=m.default;m=arr[7];onCmd=m.default;m=arr[8];scopeCmd=m.default;m=arr[9];fillingCmd=m.default;m=arr[10];watchCmd=m.default;}));export const mw_cmd=new Map;export const reqCmd=self.mw_reqCmd||new Map;export const mw_doc=document;export const mw_$src=mw_doc.documentElement;export const p_target=Symbol();export const p_topUrl=Symbol();export const visibleScreenSize=3;export const renderPackSize=100;export const defIdleCallbackOpt={timeout:1e3};export const globVarName="glob";export const locVarName="loc";export const viewVarName="view";export const mountEventName="mount";export const renderEventName="render";export const removeEventName="remove";export const loadEventName="load";export const okEventName="ok";export const errorEventName="error";export const defEventInit={bubbles:true,cancelable:true,composed:false};export const lazyRenderName="lazyrender";export const cmdPref="";export const cmdArgsDiv=".";export const cmdArgsDivLen=cmdArgsDiv.length;export const descrIdName="_did"+cmdArgsDiv;export const asOneIdxName="_aidx"+cmdArgsDiv;export const idxName="_idx"+cmdArgsDiv;export const isFillingName="is_filling";export const isFillingDiv="-";export const attrCmdName=cmdPref+"attr";export const pushModName="push";export const replaceModName="replace";export const execCmdName=cmdPref+"exec";export const fillingCmdName=cmdPref+"filling";export const foreachCmdName=cmdPref+"foreach";export const fetchCmdName=cmdPref+"fetch";export const defRequestInit={headers:{"x-requested-with":"XMLHttpRequest"}};export const resultDetailName="res";export const errorDetailName="err";export const htmlCmdName=cmdPref+"html";export const textCmdName=htmlCmdName+cmdArgsDiv+"t";export const ifCmdName=cmdPref+"if";export const elseifCmdName=cmdPref+"elseif";export const elseCmdName=cmdPref+"else";export const switchCmdName=cmdPref+"switch";export const caseCmdName=cmdPref+"case";export const defaultCmdName=cmdPref+"default";export const incCmdName=cmdPref+"inc";export const onCmdName=cmdPref+"on";export const preventDefaultModName="prevent";export const stopModName="stop";export const selfModName="self";export const exactModName="exact";export const eventScopeName="evt";export const scopeCmdName=cmdPref+"scope";export const watchCmdName=cmdPref+"watch";export function addCommand(e,t){mw_cmd.set(e,t)}function begin(){addCommand(attrCmdName,attrCmd);addCommand(execCmdName,execCmd);addCommand(fetchCmdName,fetchCmd);addCommand(foreachCmdName,foreachCmd);addCommand(htmlCmdName,htmlCmd);addCommand(ifCmdName,ifCmd);addCommand(elseifCmdName,ifCmd);addCommand(elseCmdName,ifCmd);addCommand(switchCmdName,switchCmd);addCommand(caseCmdName,switchCmd);addCommand(defaultCmdName,switchCmd);addCommand(incCmdName,incCmd);addCommand(onCmdName,onCmd);addCommand(scopeCmdName,scopeCmd);addCommand(fillingCmdName,fillingCmd);addCommand(watchCmdName,watchCmd)}if(self.__imports===undefined){begin()}else{self.__imports.then(begin)}FormData.prototype[p_target]=null;Document.prototype[p_target]=null;DocumentFragment.prototype[p_target]=null;HTMLElement.prototype[p_target]=null;Text.prototype[p_target]=null;Promise.prototype[p_target]=null;Date.prototype[p_target]=null;Request.prototype[p_target]=null;Response.prototype[p_target]=null;')],
["/dom.js", import('data:text/javascript;text,let type_req,type_animation,type_cacheValue,type_cacheCurrent,mw_doc,mw_$src,p_topUrl,visibleScreenSize,defIdleCallbackOpt,incCmdName,onCmdName,textCmdName,descrIdName,asOneIdxName,idxName,removeEventName,defEventInit,reqCmd,$srcById,srcById,srcBy$src,descrById,getNewId,createSrc,type_asOneIdx,type_idx,getSrcId,get$els,getNextStr,getErr,loadingCount,varIdByVar,varById,srcIdsByVarId,varIdByVarIdByProp;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/cache.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/err.js"),self.__i.get("/loading.js"),self.__i.get("/proxy.js")]).then(arr=>{let m;m=arr[0];type_req=m.type_req;type_animation=m.type_animation;m=arr[1];type_cacheValue=m.type_cacheValue;type_cacheCurrent=m.type_cacheCurrent;m=arr[2];mw_doc=m.mw_doc;mw_$src=m.mw_$src;p_topUrl=m.p_topUrl;visibleScreenSize=m.visibleScreenSize;defIdleCallbackOpt=m.defIdleCallbackOpt;incCmdName=m.incCmdName;onCmdName=m.onCmdName;textCmdName=m.textCmdName;descrIdName=m.descrIdName;asOneIdxName=m.asOneIdxName;idxName=m.idxName;removeEventName=m.removeEventName;defEventInit=m.defEventInit;reqCmd=m.reqCmd;m=arr[3];$srcById=m.$srcById;srcById=m.srcById;srcBy$src=m.srcBy$src;descrById=m.descrById;getNewId=m.getNewId;createSrc=m.createSrc;type_asOneIdx=m.type_asOneIdx;type_idx=m.type_idx;getSrcId=m.getSrcId;get$els=m.get$els;getNextStr=m.getNextStr;m=arr[4];getErr=m.getErr;m=arr[5];loadingCount=m.loadingCount;m=arr[6];varIdByVar=m.varIdByVar;varById=m.varById;srcIdsByVarId=m.srcIdsByVarId;varIdByVarIdByProp=m.varIdByVarIdByProp;}));export function preRender(e,t){const n=e.parentNode,r=[],o=new Map;do{if(e.firstChild!==null){e=e.firstChild;continue}if(e.nodeName==="TEMPLATE"&&e.content.firstChild!==null){r.push(e);e=e.content.firstChild;continue}e=_preRenderCreate(e,o,t);if(e.parentNode===n){break}if(e.nextSibling!==null){e=e.nextSibling;continue}do{e=e.parentNode;if(e.parentNode===n){_preRenderCreate(e,o,t);e=null;break}if(e.parentNode.nodeType===11){e=r.pop();if(e.parentNode===n){_preRenderCreate(e,o,t);e=null;break}}e=_preRenderCreate(e,o,t);if(e.nextSibling!==null){e=e.nextSibling;break}}while(true)}while(e!==null)}function _preRenderCreate(e,t,n){if(e.nodeType===1){if(!n){createSrc(e);return e}const r=_preRenderGetSrc(e,t);if(!r.isCmd){return e}for(const o of r.descr.attr.keys()){const i=e.getAttribute(asOneIdxName+o),d=e.getAttribute(idxName+o);if(i!==null){const l=t.get(i);if(l===undefined){const c=getNewId();t.set(i,c);if(r.asOneIdx===null){r.asOneIdx=type_asOneIdx([[o,c]])}else{r.asOneIdx.set(o,c)}}else if(r.asOneIdx===null){r.asOneIdx=type_asOneIdx([[o,l]])}else{r.asOneIdx.set(o,l)}}if(d!==null){if(r.idx===null){r.idx=type_idx([[!isNaN(d)?Number(d):d]]);continue}r.idx.set(o,!isNaN(d)?Number(d):d)}}return e}return e.nodeType===3?replaceTextBlocks(e):e}function _preRenderGetSrc(e,t){const n=e.getAttribute(descrIdName);if(n===null){return createSrc(e)}const r=t.get(n);if(r!==undefined){return createSrc(e,r,null,null)}const o=createSrc(e,createDescr(e,0),null,null);o.descr.sId=o.id;t.set(n,o.descr);return o}function replaceTextBlocks(e){const t=e.textContent;if(t.indexOf("${")===-1||e.parentNode.nodeName==="SCRIPT"){return e}if(e.nextSibling===null&&e.previousSibling===null){e.parentNode.setAttribute(textCmdName,"`"+t+"`");return e}const n=mw_doc.createElement("span");n.setAttribute(textCmdName,"`"+t+"`");e.parentNode.replaceChild(n,e);createSrc(n);return n}export function joinText(t){t=t.firstChild;for(let e;t!==null;t=t.nextSibling){while(t.nodeType===3&&(e=t.nextSibling)!==null&&e.nodeType===3){t.textContent+=$e.removeChild(e).textContent}}}export function removeChild(e,t){if(!e.parentNode){console.error(t.sync,e);alert(11)}e.parentNode.removeChild(e);e.dispatchEvent(new CustomEvent(removeEventName,defEventInit));const n=new Map;let r=e;const o=null,i=[];do{const d=srcBy$src.get(r);if(d!==undefined){clearTag(r,d,n)}if(r.firstChild!==null){r=r.firstChild;continue}if(r.nodeName==="TEMPLATE"&&r.content.firstChild!==null){i.push(r);r=r.content.firstChild;continue}if(r.parentNode===o){break}if(r.nextSibling!==null){r=r.nextSibling;continue}do{r=r.parentNode;if(r.parentNode===o){r=null;break}if(r.parentNode.nodeType===11){r=i.pop();if(r.parentNode===o){r=null;break}}if(r.nextSibling!==null){r=r.nextSibling;break}}while(true)}while(r!==null);if(n.size===0){return}requestIdleCallback(()=>{clearVars(n)},defIdleCallbackOpt)}function clearTag(e,t,n){const r=t.id,o=t.descr,i=o.id;$srcById.delete(r);srcById.delete(r);srcBy$src.delete(e);if(!t.isCmd){o.srcIds.delete(r);if(o.srcIds.size===0){descrById.delete(i)}return}loadingCount.delete(r);o.srcIds.delete(r);if(o.sId===r){o.sId=o.srcIds.values().next().value}const d=n.get(i);if(d){d.add(r);return}n.set(i,new Set([r]))}function clearVars(e){const t=new Set,n=new Set,r=new Set;for(const[o,i]of e){const d=descrById.get(o);if(d===undefined){continue}for(const l of d.varIds){t.add(l)}for(const c of i){n.add(c)}}for(const l of t){const i=srcIdsByVarId.get(l);if(!i){continue}const s=varIdByVarIdByProp.get(l);for(const c of n){if(i.has(c)){i.delete(c)}if(s===undefined){continue}for(const[a,f]of s){const u=srcIdsByVarId.get(f);if(u!==undefined&&u.has(c)){i.delete(c);u.delete(c);if(u.size===0){r.add(f);srcIdsByVarId.delete(f);s.delete(a)}}}}if(i.size===0){r.add(l);srcIdsByVarId.delete(l);varIdByVar.delete(varById.get(l));varById.delete(l);if(s!==undefined){varIdByVarIdByProp.delete(l);if(s.size!==0){console.warn("должно быть пусто",l,s)}}}else if(s!==undefined&&s.size===0){varIdByVarIdByProp.delete(l)}}for(const[o,i]of e){const d=descrById.get(o);if(d===undefined){continue}for(const l of r){d.varIds.delete(l)}for(const c of i){d.srcIds.delete(c);if(d.sId===c){console.warn(22222222)}}if(d.srcIds.size===0){descrById.delete(o)}}}export function cloneNode(e,t){if(t.nodeType===11){const d=mw_doc.createDocumentFragment();for(t=t.firstChild;t!==null;t=t.nextSibling){d.appendChild(cloneNode(e,t))}return d}const n=t.cloneNode(true);if(n.nodeType!==1){return n}const r=n.nodeName!=="TEMPLATE"?n:n.content.firstChild,o=srcBy$src.get(e.$src);for(const[l,c]of o.descr.attr){if(l===e.str){break}const s=reqCmd.get(l);if(s.cmdName===onCmdName){s.cmd.render(type_req(r,l,c,e.scope,e.sync))}}const i=loadingCount.get(o.id);if(i!==undefined){loadingCount.set(n,i)}return n}export function q_cloneNode(r,e,t,o){e=getSrcId(r.sync.local,e);const n=$srcById.get(e),i=srcById.get(e),d=getNextStr(i,r.str),l=d!==""?get$els(n,i.descr.get$elsByStr,d):[n],c=l.length,s=new Array(o),a=[];let f;for(let e=0,t;e<c;e++){const g=l[e];f=srcBy$src.get(g);if(f===undefined||!f.isCmd){continue}break}if(f===undefined){console.warn(">>>mw dom:q_cloneNode:",r,l,t,o);throw getErr(new Error(`>>>mw dom:q_cloneNode: среди элементов для клонирования нет элемента с командой, такого не должно быть`),r.$src,r)}const u=f.descr;for(const[h,C]of u.attr){if(h===r.str){break}const I=reqCmd.get(h);if(I.cmdName===onCmdName){a.push(type_q_cloneNodeOn(I.cmd,h,C))}}const p=a.length,m=loadingCount.get(f.id),x=new Set,y=new Array(o),N=u.asOnes.keys();for(let e=N.next();!e.done;e=N.next()){if(e.value!==r.str){continue}for(e=N.next();!e.done;e=N.next()){x.add(e.value)}}for(let e=0;e<o;e++){s[e]=type_q$i(new Array(c),e+t);y[e]=new Map}for(let e,t,n=0;n<c;n++){const b=new Array(o),_=l[n];q_cloneNodeCreate(_,_.nodeName!=="TEMPLATE",b,o,y,0,x);q_cloneNodeCreateChildren(_,b,o,y);for(e=0;e<o;e++){const S=s[e],g=S.$els[n]=b[e],v=srcBy$src.get(g);if(v===undefined){continue}setIdx(v,r.str,S.idx);if(p!==0){for(k=0;k<p;k+=3){const w=a[k];w.cmd.render(type_req(g,w.str,w.expr,r.scope,r.sync))}}if(m!==undefined){loadingCount.set(g,m)}}}return s}function q_cloneNodeCreate(t,e,n,r,o,i,d){const l=srcBy$src.get(t);if(l===undefined){if(i===2){for(let e=0;e<r;e++){n[e]=n[e].parentNode.appendChild(t.cloneNode())}return}if(i===1){if(e){for(let e=0;e<r;e++){n[e]=n[e].appendChild(t.cloneNode())}return}for(let e=0;e<r;e++){n[e]=n[e].content.appendChild(t.cloneNode())}return}for(let e=0;e<r;e++){n[e]=t.cloneNode()}return}const c=l.descr,s=l.idx,a=l.save,f=l.asOneIdx;if(f===null){if(i===2){for(let e=0;e<r;e++){createSrc(n[e]=n[e].parentNode.appendChild(t.cloneNode()),c,null,s===null?null:type_idx(s)).save=a}return}if(i===1){if(e){for(let e=0;e<r;e++){createSrc(n[e]=n[e].appendChild(t.cloneNode()),c,null,s===null?null:type_idx(s)).save=a}return}for(let e=0;e<r;e++){createSrc(n[e]=n[e].content.appendChild(t.cloneNode()),c,null,s===null?null:type_idx(s)).save=a}return}for(let e=0;e<r;e++){createSrc(n[e]=t.cloneNode(),c,null,s===null?null:type_idx(s)).save=a}return}if(i===2){for(let e=0;e<r;e++){createSrc(n[e]=n[e].parentNode.appendChild(t.cloneNode()),c,type_asOneIdx(f),type_idx(l.idx)).save=a}q_cloneNodeChangeAsOne(n,r,o,f);return}if(i===1){if(e){for(let e=0;e<r;e++){createSrc(n[e]=n[e].appendChild(t.cloneNode()),c,type_asOneIdx(f),type_idx(l.idx)).save=a}q_cloneNodeChangeAsOne(n,r,o,f);return}for(let e=0;e<r;e++){createSrc(n[e]=n[e].content.appendChild(t.cloneNode()),c,type_asOneIdx(f),type_idx(l.idx)).save=a}q_cloneNodeChangeAsOne(n,r,o,f);return}for(let e=0;e<r;e++){createSrc(n[e]=t.cloneNode(),c,type_asOneIdx(f),type_idx(l.idx)).save=a}q_cloneNodeChangeAsOne(n,r,o,d)}function q_cloneNodeChangeAsOne(t,n,r,o){for(let e=0;e<n;e++){const i=t[e],d=srcBy$src.get(i);for(const l of o.keys()){const c=d.asOneIdx.get(l),s=r[e].get(c);if(s!==undefined){setAsOneIdx(d,l,s);continue}const a=getNewId();r[e].set(c,a);setAsOneIdx(d,l,a)}}}function q_cloneNodeCreateChildren(e,t,n,r){const o=new Array(n),i=e.parentNode,d=[];for(let e=0;e<n;e++){o[e]=[]}do{if(e.firstChild!==null){q_cloneNodeCreate(e=e.firstChild,true,t,n,r,1,null);continue}if(e.nodeName==="TEMPLATE"&&e.content.firstChild!==null){d.push(e);for(let e=0;e<n;e++){o[e].push(t[e])}q_cloneNodeCreate(e=e.content.firstChild,false,t,n,r,1,null);continue}if(e.parentNode===i){break}if(e.nextSibling!==null){q_cloneNodeCreate(e=e.nextSibling,true,t,n,r,2,null);continue}do{e=e.parentNode;for(let e=0;e<n;e++){t[e]=t[e].parentNode}if(e.parentNode===i){e=null;break}if(e.parentNode.nodeType===11){e=d.pop();for(let e=0;e<n;e++){t[e]=o[e].pop()}if(e.parentNode===i){e=null;break}}if(e.nextSibling!==null){q_cloneNodeCreate(e=e.nextSibling,true,t,n,r,2,null);break}}while(true)}while(e!==null)}export function type_q$i(e,t){return{$els:e,idx:t}}function type_q_cloneNodeOn(e,t,n){return{cmd:e,str:t,expr:n}}export function setAttribute(e,t,n){setAttributeValue(e,t,n);e.setAttribute(t,n)}export function setAttributeValue(e,t,n){switch(t){case"value":if(e===document.activeElement&&typeof e.setSelectionRange==="function"){const r=e.selectionStart;e.value=n;if(e.type!=="number"){e.setSelectionRange(r,r)}}else{e.value=n}break;case"checked":e.checked=!!n;break}}export function removeAttribute(e,t){switch(t){case"value":e.value="";break;case"checked":e.checked=false;break}e.removeAttribute(t)}export function show(e,t){if(t.nodeName!=="TEMPLATE"){return}e.sync.animations.add(type_animation(()=>_show(e,t),e.sync.local,0))}function _show(e,t){const n=t.content.firstChild;if(!n||n.nextSibling!==null){throw getErr(new Error(">>>mw show:01: Template element invalid structure on show function. <template>.content.childNodes.length must be only one element."),t)}if(n.nodeType===1&&srcBy$src.has(t)){moveProps(t,n,true)}if(e.$src===t){e.$src=n}t.parentNode.replaceChild(n,t)}export function hide(e,t){if(t.nodeName==="TEMPLATE"){return}e.sync.animations.add(type_animation(()=>_hide(t),e.sync.local,srcBy$src.get(t).id))}function _hide(e){let t=e;const n=mw_doc.createElement("template"),r=t.parentNode,o=[];do{const i=srcBy$src.get(t);if(i!==undefined){const d=i.cache;if(d!==null){d.value=type_cacheValue();d.current=type_cacheCurrent()}}if(t.firstChild!==null){t=t.firstChild;continue}if(t.nodeName==="TEMPLATE"&&i.isCmd&&t.content.firstChild.firstChild!==null){o.push(t);t=t.content.firstChild.firstChild;continue}if(t.parentNode===r){break}if(t.nextSibling!==null){t=t.nextSibling;continue}do{t=t.parentNode;if(t.parentNode===r){t=null;break}if(t.parentNode.nodeType===11){t=o.pop();if(t.parentNode===r){t=null;break}}if(t.nextSibling!==null){t=t.nextSibling;break}}while(true)}while(t!==null);if(e.nodeType===1){moveProps(e,n,false)}e.parentNode.replaceChild(n,e);n.content.appendChild(e)}function moveProps(e,t,n){const r=srcBy$src.get(e);$srcById.set(r.id,t);srcById.set(r.id,r);srcBy$src.set(t,r);t[p_topUrl]=e[p_topUrl];if(n){return}const o=e.attributes,i=o.length;for(let e=0;e<i;e++){const d=o[e];setAttribute(t,d.name,d.value)}}export function is$hide(e){do{if(e===mw_$src){return false}e=e.parentNode}while(e!==null);return true}export function isAnimationVisible(e){return e.viewedSrcId===0?true:is$visible($srcById.get(getSrcId(e.local,e.viewedSrcId)))}const $scroll=document.scrollingElement;export function is$visible(e){while(e.nodeType!==1){e=e.nextSibling;if(e===null){return true}}const t=1-visibleScreenSize,n=$scroll.clientWidth*t,r=$scroll.clientWidth+n*-1,o=$scroll.clientHeight*t,i=$scroll.clientHeight+o*-1,d=e.getBoundingClientRect();return!(d.top>i||d.top+d.height<o||(d.left>r||d.left+d.width<n))}export function setAsOneIdx(e,t,n){if(e.asOneIdx===null){e.asOneIdx=type_asOneIdx()}e.asOneIdx.set(t,n);if(self.mw_debugLevel===0){return}const r=$srcById.get(e.id),o=asOneIdxName+t;r.setAttribute(o,n);if(r.nodeName==="TEMPLATE"&&r.content.firstChild!==null){r.content.firstChild.setAttribute(o,n)}}export function getIdx(e,t){if(e.idx!==null){return e.idx.get(t)}}export function setIdx(e,t,n){if(e.idx===null){e.idx=type_idx()}e.idx.set(t,n);if(self.mw_debugLevel===0){return}const r=$srcById.get(e.id),o=idxName+t;r.setAttribute(o,n);if(r.nodeName==="TEMPLATE"){r.content.firstChild.setAttribute(o,n)}}export function getTopUrl(t,e){if(e!==""){const n=getAttrTopUrl(t,e);if(n!==""){return n}}for(let e=$srcById.get(t.id).parentNode;e!==mw_$src;e=e.parentNode){const n=getAttrTopUrl(srcBy$src.get(e));if(n!==""){return n}if(e[p_topUrl]!==undefined){return e[p_topUrl]}}return""}function getAttrTopUrl(e,t){if(!e.isCmd){return""}const n=e.descr.attr.keys();let r="";if(t!==""){for(const o of n){if(o===t){break}if(reqCmd.get(o).cmdName===incCmdName){r=getIdx(e,o)}}return r}for(const o of n){if(reqCmd.get(o).cmdName===incCmdName){r=getIdx(e,o)}}return r}')],
["/cmd/html.js", import('data:text/javascript;text,let type_animation,srcBy$src,eval2,q_eval2;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/descr.js"),self.__i.get("/eval2.js")]).then(arr=>{let m;m=arr[0];type_animation=m.type_animation;m=arr[1];srcBy$src=m.srcBy$src;m=arr[2];eval2=m.eval2;q_eval2=m.q_eval2;}));export default{isCustomHtml:true,render(e){return eval2(e,e.$src,true).then(r=>{html_render(e,e.$src,r);return null})},q_render(n,s,c){return q_eval2(n,s,c).then(e=>{const t=s.length;for(let r=0;r<t;r++){if(!c.has(r)){html_render(n,s[r].$src,e[r])}}return null})}};function html_render(e,t,n){const s=srcBy$src.get(t).cache;if(e.sync.renderParam.isLinking){s.current.set(e.str,n);return}if(n===s.current.get(e.str)){return}e.sync.animations.add(type_animation(()=>{s.current.set(e.str,n);const r=e.reqCmd.args[0];if(r!==undefined&&r!==""){t.textContent=n;return}t.innerHTML=n},e.sync.local,srcBy$src.get(t).id))}')],
["/render/render.js", import('data:text/javascript;text,let lazyRenderName,mountEventName,renderEventName,defEventInit,p_target,cmdArgsDiv,cmdArgsDivLen,mw_cmd,reqCmd,srcById,$srcById,srcBy$src,getAttrAfter,srcSetScope,addScrollAnimationsEvent;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/oset.js"),self.__i.get("/render/algo.js")]).then(arr=>{let m;m=arr[0];lazyRenderName=m.lazyRenderName;mountEventName=m.mountEventName;renderEventName=m.renderEventName;defEventInit=m.defEventInit;p_target=m.p_target;cmdArgsDiv=m.cmdArgsDiv;cmdArgsDivLen=m.cmdArgsDivLen;mw_cmd=m.mw_cmd;reqCmd=m.reqCmd;m=arr[1];srcById=m.srcById;$srcById=m.$srcById;srcBy$src=m.srcBy$src;getAttrAfter=m.getAttrAfter;m=arr[2];srcSetScope=m.srcSetScope;m=arr[3];addScrollAnimationsEvent=m.addScrollAnimationsEvent;}));export function renderTag(r,n,t,s){if(s.stat!==0){return r}const e=srcBy$src.get(r),c=e.id;if(!s.local.has(c)){s.local.set(c,type_localCounter())}n=n===null?e.scopeCache:srcSetScope(e,n);const o=t===""?e.descr.attr:getAttrAfter(e.descr.attr,t);if(o===null||o.size===0){return renderChildren(r,n,s,c,r)}return attrRender(r,n,o,s).then(t=>{if(s.stat!==0){return r}if(r!==t.$src){r=t.$src}const e=t.$last===null?r:t.$last;if(t.isLast){return e}return renderChildren(r,n,s,c,e)})}async function attrRender(t,e,r,n){let s=null;for(const[c,o]of r){const a=type_req(t,c,o,e,n),i=await a.reqCmd.cmd.render(a);if(n.stat!==0){return i||type_renderRes(false,t,s)}if(!i){continue}if(i.attrStr!==""){t=await renderTag(i.$attr,e,i.attrStr,n);i.isLast=true;i.$src=i.$last;i.$last=null;i.$attr=null;i.attrStr="";return i}if(i.isLast){return type_renderRes(true,i.$src||t,i.$last)}if(i.$last!==null){s=i.$last}if(i.$src!==null){t=i.$src}}return type_renderRes(false,t,s)}async function renderChildren(t,e,r,n,s){if(r.stat!==0||srcBy$src.get(t).descr.isCustomHtml){return t}if(!r.renderParam.isLazyRender&&t.getAttribute(lazyRenderName)!==null){r.renderParam.isLazyRender=true;addScrollAnimationsEvent(t)}for(t=t.firstChild;t!==null;t=t.nextSibling){const c=srcBy$src.get(t);if(c===undefined){continue}t=await renderTag(t,e,"",r);if(r.stat!==0){return}}testLocalEventsBySrcId(r.local,n);return s}export function q_renderTag(e,t,r,n){if(n.stat!==0){return Promise.resolve(e)}const s=e.length;for(let t=0;t<s;t++){const a=e[t],i=a.$src,d=srcBy$src.get(i),u=d.id;if(!n.local.has(u)){n.local.set(u,type_localCounter())}a.scope=a.scope===null?d.scopeCache:srcSetScope(d,a.scope)}const c=srcBy$src.get(e[0].$src),o=t===""?c.descr.attr:getAttrAfter(c.descr.attr,t);if(o!==null&&o.size!==0){return q_attrRender(e,o,r,type_q_renderCtx(),n).then(t=>t===s?e:_q_renderTag(e,r,n,s))}return _q_renderTag(e,r,n)}function _q_renderTag(e,t,r,n){return q_renderChildren(e,t,r).then(()=>{for(let t=0;t<n;t++){testLocalEventsBySrcId(r.local,srcBy$src.get(e[t].$src).id)}return e})}async function q_attrRender(e,t,r,n,s){const c=e.length;for(const[o,a]of t){const i=await q_execRender(e,o,a,r,s);if(s.stat!==0){return n.lastCount}if(!i){continue}for(let t=0;t<c;t++){if(r.has(t)){continue}const d=await i[t];if(d===null){continue}if(d.attrStr!==""){const u=e[t];q_addAfterAttr(d.$attr,u.scope,d.attrStr,n);u.$src=d.$last||d.$src||d.$attr||u.$src;r.add(t);n.lastCount++;continue}if(d.$last!==null){e[t].$src=d.$last}if(d.isLast){r.add(t);n.lastCount++}}}for(const l of n.afterByDescrByAttr.values()){for(const[f,e]of l){await q_renderTag(e,n.strByAttrKey.get(f),type_isLast(),s)}}return n.lastCount}function q_addAfterAttr(t,e,r,n){const s=getAttrKey(getAttrAfter(srcBy$src.get(t).descr.attr,r)),c=srcBy$src.get(t).descr.id,o=n.afterByDescrByAttr.get(c),a=type_q_arr(t,e);if(!n.strByAttrKey.has(s)){n.strByAttrKey.set(s,r)}if(o!==undefined){const i=o.get(s);if(i){i.push(a);return}o.set(s,[a]);return}n.afterByDescrByAttr.set(c,new Map([[s,[a]]]))}function q_renderChildren(e,r,t){const n=e[0].$src;if(t.stat!==0||srcBy$src.get(n).descr.isCustomHtml){return Promise.resolve(e)}if(!t.renderParam.isLazyRender&&n.getAttribute(lazyRenderName)!==null){t.renderParam.isLazyRender=true}const s=[],c=e.length,o=t.renderParam.isLazyRender;for(let t=0;t<c;t++){if(r.has(t)){continue}const a=e[t];s.push(type_q_arr(a.$src,a.scope));if(o){addScrollAnimationsEvent(a.$src)}}if(s.length===0){return e}return q_renderFlow(s,true,t).then(()=>e)}function q_renderFlow(t,e,r){const n=q_nextGroupByDescr(t,e);const s=new Set;for(const c of n.values()){s.add(q_renderTag(c,"",type_isLast(),r).then(()=>r.stat===0&&q_renderFlow(c,false,r)))}return Promise.all(s)}function q_nextGroupByDescr(r,n){const s=new Map,t=r.length;for(let e=0;e<t;e++){if(r[e].$src.nodeType!==1){continue}for(let t=n?r[e].$src.firstChild:r[e].$src.nextSibling;t!==null;t=t.nextSibling){const c=srcBy$src.get(t);if(c===undefined){continue}r[e].$src=t;const o=c.descr.id,a=s.get(o);if(a!==undefined){a.push(r[e]);break}s.set(o,[r[e]]);break}}return s}function q_execRender(e,r,n,s,c){const o=type_req(e[0].$src,r,n,null,c);if(o.reqCmd.cmd.q_render){return o.reqCmd.cmd.q_render(o,e,s)}const a=e.length,i=new Array(a);for(let t=0;t<a;t++){if(!s.has(t)){i[t]=o.reqCmd.cmd.render(type_req(e[t].$src,r,n,e[t].scope,c))}}return Promise.all(i)}function getAttrKey(t){let e="";for(const[r,n]of t){e+=r+":"+n+";"}return e}export function setReqCmd(t){const e=reqCmd.get(t);if(e!==undefined&&e!==null){return true}const r=t.indexOf(cmdArgsDiv),n=r===-1?t:t.substr(0,r),s=mw_cmd.get(n);if(s===undefined){reqCmd.set(t,null);return false}reqCmd.set(t,type_reqCmd(n,s,r!==-1?t.substr(r+cmdArgsDivLen).split(cmdArgsDiv):[]));return true}export function dispatchLocalEvents(t){for(const[e,r]of t){if(r.animationsCount===0){dispatchLocalEventsBySrcId(e,r)}}}function testLocalEventsBySrcId(t,e){const r=t.get(e);if(r.animationsCount===0){dispatchLocalEventsBySrcId(e,r)}}function dispatchLocalEventsBySrcId(t,e){const r=$srcById.get(t);if(r===undefined){return}e.animationsCount=-1;if(r.nodeName==="TEMPLATE"){return}const n=srcById.get(t);if(!n.isMounted){n.isMounted=true;r.dispatchEvent(new CustomEvent(mountEventName,defEventInit))}r.dispatchEvent(new CustomEvent(renderEventName,defEventInit))}export function type_req(t,e,r,n,s){return{reqCmd:reqCmd.get(e),$src:t,str:e,expr:r,scope:n,sync:s}}function type_reqCmd(t,e,r){return{cmdName:t,cmd:e,args:r}}function type_q_renderCtx(){return{lastCount:0,afterByDescrByAttr:new Map,strByAttrKey:new Map}}export function type_isLast(){return new Set}export function type_q_arr(t,e){return{$src:t,scope:e}}export function type_localCounter(){return{animationsCount:0,newSrcId:0}}export function type_animation(t,e,r){for(const n of e.values()){n.animationsCount++}return{handler:()=>{for(const t of e.values()){if(t.animationsCount>0){t.animationsCount--}}return t()},local:e,viewedSrcId:r}}export function type_renderRes(t,e=null,r=null,n=null,s=""){return{isLast:t,$src:e,$last:r,$attr:n,attrStr:s}}')],
["/render/algo.js", import('data:text/javascript;text,let renderTag,q_renderTag,dispatchLocalEvents,type_isLast,type_q_arr,type_animation,mw_$src,renderPackSize,lazyRenderName,defIdleCallbackOpt,$srcById,srcById,srcBy$src,descrById,getSrcId,get$els,preRender,is$hide,is$visible,isAnimationVisible,loadingCount;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/dom.js"),self.__i.get("/loading.js")]).then(arr=>{let m;m=arr[0];renderTag=m.renderTag;q_renderTag=m.q_renderTag;dispatchLocalEvents=m.dispatchLocalEvents;type_isLast=m.type_isLast;type_q_arr=m.type_q_arr;type_animation=m.type_animation;m=arr[1];mw_$src=m.mw_$src;renderPackSize=m.renderPackSize;lazyRenderName=m.lazyRenderName;defIdleCallbackOpt=m.defIdleCallbackOpt;m=arr[2];$srcById=m.$srcById;srcById=m.srcById;srcBy$src=m.srcBy$src;descrById=m.descrById;getSrcId=m.getSrcId;get$els=m.get$els;m=arr[3];preRender=m.preRender;is$hide=m.is$hide;is$visible=m.is$visible;isAnimationVisible=m.isAnimationVisible;m=arr[4];loadingCount=m.loadingCount;}));const renderParams=new Set;let mw_delay=0,mw_delayId=0,mw_syncId=0,__oldLocHash="";const delayParams=new Set;export const syncInRender=new Set;export let curRender=Promise.resolve();export function getCurRender(){return curRender}export function render(e=mw_$src,n,r,t=false){if(!srcBy$src.has(e)){preRender(e,t)}const s=srcBy$src.get(e).id;renderParams.add(type_renderParam(s,r||null,"",t));return tryRender(n,s)}export function renderBySrcIds(e){for(const n of e){if($srcById.has(n)){renderParams.add(type_renderParam(n,null,"",false))}}tryRender(mw_delay,0)}export function setDelay(e,n){if(!n){mw_delay=e;return}const r=mw_delay;mw_delay=e;n();mw_delay=r}function tryRender(e=mw_delay,t){const s=++mw_delayId;return new Promise((n,r)=>{setTimeout(()=>{if(t!==0){delayParams.add(type_delayParam(t,n,r))}if(s!==mw_delayId||renderParams.size===0){return}const e=new Set(delayParams);delayParams.clear();_tryRender(e).then(n).catch(e=>{for(const n of syncInRender){n.resolve()}syncInRender.clear();curRender=Promise.resolve();loadingCount.clear();r(e)})},e)})}function _tryRender(e){const n=new Set,r=prepareRenderParam(n),t=new Map;if(syncInRender.size!==0){const s=new Set,o=new Set;for(const a of syncInRender){if(a.stat===0){o.add(a)}}for(const a of o){for(const[i,c]of r){const d=a.stat,l=d===0?checkSync(a,c):d;if(l===0){continue}if(d!==0){if(l===3){s.add(i)}continue}n.add(a);s.add(i);if(a.renderParam.isLinking){a.renderParam.isLinking=false}if(l===2){renderParams.add(a.renderParam);for(const f of c.srcIds){renderParams.add(type_renderParam(f,null,"",false))}continue}if(l===3){t.set(srcById.get(a.renderParam.sId).descr.id,a.renderParam);continue}if(c.isLinking){c.isLinking=false}t.set(i,c)}}if(s.size!==0){for(const i of s){r.delete(i)}}if(renderParams.size!==0){for(const[i,c]of prepareRenderParam(n)){t.set(i,c)}}}if(r.size!==0){const u=_render(r,e);if(t.size===0){curRender=curRender.then(()=>u)}else{curRender=curRender.then(()=>_render(t,e)).then(()=>u)}}else if(t.size!==0){curRender=curRender.then(()=>_render(t,e))}return curRender}function _render(e,t){if(self.mw_debugLevel!==0){console.info("render =>",infoBySrcIds(new Set(Array.from(e.values()).map(e=>e.sId))))}const s=new Set,n=new Set;for(const[r,o]of e){const a=type_sync(++mw_syncId,o),i=$srcById.get(o.sId),c=o.srcIds.size;syncInRender.add(a);s.add(a);if(c===1){n.add(renderTag(i,o.scope,o.str,a));continue}const d=new Array(c);let e=0;for(const l of o.srcIds){d[e++]=type_q_arr($srcById.get(l),o.scope)}n.add(_q_renderPack(o,a,d))}return Promise.all(n).then(()=>{const n=new Set;for(const e of s){n.add(e.promise);if(self.mw_debugLevel===0){continue}e.promise.then(()=>{if(e.stat===0){console.warn("0 0 sdfsdfsd")}if(e.stat===7){console.info("ready =>",infoBySrcIds([e.renderParam.sId]));return}console.info("cancel =>",infoBySrcIds([e.renderParam.sId]))})}renderLoop(s);return Promise.all(n)}).then(()=>{for(const r of t){for(const n of s){let e=n.local.get(r.sId);if(e!==undefined){r.resolve(n);break}}}const e=location.hash;if(e===__oldLocHash){return}const n=document.getElementById(e.substr(1));if(n){__oldLocHash=e;n.scrollIntoView()}}).catch(e=>{for(const n of t){n.reject(e)}throw e})}function _q_renderPack(r,t,n){const s=[],o=[],a=n.length;for(let e=0;e<a;e++){const i=n[e];if(is$visible(i.$src)){s.push(i);continue}o.push(i)}if(s.length!==0){return q_renderTag(s,r.str,type_isLast(),t).then(()=>o.length!==0&&t.afterAnimations.add(type_animation(()=>_q_renderPack(r,t,o),t.local,0)))}return new Promise(e=>{const n=requestIdleCallback(()=>{t.idleCallback.delete(n);q_renderTag(o.splice(0,renderPackSize),r.str,type_isLast(),t).then(()=>{if(o.length!==0){return _q_renderPack(r,t,o).then(e)}e()})});t.idleCallback.set(n,e)},defIdleCallbackOpt)}export async function renderLoop(e){const n=new Set;for(const t of e){if(t.stat!==0||t.beforeAnimations.size===0){continue}const s=new Set(t.beforeAnimations),o=new Array(s.size);t.beforeAnimations.clear();let e=0;for(const a of s){o[e++]=a.handler()}n.add(Promise.all(o).then(()=>dispatchLocalEvents(t.local)))}if(n.size!==0){await Promise.all(n)}for(const t of e){if(t.stat!==0||t.animations.size===0){continue}const s=new Set(t.animations);t.animations.clear();const i=addAnimation(t,s,false);if(i!==null){n.add(i)}}if(n.size!==0){await Promise.all(n)}for(const t of e){if(t.stat!==0||t.afterAnimations.size===0){continue}const s=new Set(t.afterAnimations),o=new Array(s.size);t.afterAnimations.clear();let e=0;for(const a of s){o[e++]=a.handler()}n.add(Promise.all(o).then(()=>dispatchLocalEvents(t.local)))}if(n.size!==0){await Promise.all(n)}const r=new Set;for(const t of e){if(t.stat===0){if(t.beforeAnimations.size!==0||t.animations.size!==0||t.afterAnimations.size!==0){r.add(t);continue}if(t.scrollAnimations.size!==0||t.idleCallback.size!==0||t.animationFrame.size!==0){continue}}if(t.stat!==0){syncInRender.delete(t);t.resolve();continue}if(t.onreadies.size!==0){for(const c of t.onreadies){c()}}t.stat=7;syncInRender.delete(t);t.resolve()}if(r.size!==0){return renderLoop(r)}}export function addAnimation(r,e,n){if(r.stat!==0){console.warn(1111111111);return null}const t=n?e:new Set,s=new Set;if(!n){for(const o of e){if(o.promise){console.warn("a.promise !== null");alert(1);continue}if(isAnimationVisible(o)){t.add(o);continue}if(!r.renderParam.isLazyRender){s.add(o);continue}r.scrollAnimations.add(o);o.promise=1}}if(t.size!==0){return new Promise(e=>{const n=requestAnimationFrame(()=>{r.animationFrame.delete(n);if(r.stat!==0){e();return}for(const e of t){e.handler()}dispatchLocalEvents(r.local);if(s.size===0){e();return}requestIdleCallback(()=>{if(r.stat!==0){e();return}addAnimation(r,s,false).then(e)},defIdleCallbackOpt)});r.animationFrame.set(n,e)})}if(s.size===0){return null}return new Promise(e=>{const n=requestIdleCallback(()=>{r.idleCallback.delete(n);requestAnimationFrame(()=>{if(r.stat!==0){e();return}for(const e of s){e.handler()}dispatchLocalEvents(r.local);e();return})},defIdleCallbackOpt);r.idleCallback.set(n,e)})}export function checkScrollAnimations(){const e=new Set,n=new Set;for(const r of syncInRender){if(r.stat!==0||r.scrollAnimations.size===0){continue}const t=new Set;for(const s of r.scrollAnimations){if(!$srcById.has(s.viewedSrcId)){r.scrollAnimations.delete(s);if(r.scrollAnimations.size===0){n.add(r)}continue}if(isAnimationVisible(s)){r.scrollAnimations.delete(s);t.add(s)}}if(t.size!==0){e.add(addAnimation(r,t,true));n.add(r)}}if(e.size!==0){Promise.all(e).then(()=>renderLoop(n));return}if(n.size!==0){console.warn("2animation");renderLoop(n)}}export function addScrollAnimationsEvent(e){e.addEventListener("scroll",checkScrollAnimations,{passive:true})}function prepareRenderParam(r){const t=new Map;for(const i of renderParams){const e=i.sId,c=srcById.get(e);if(c===undefined){continue}const d=c.descr,l=d.id,f=t.get(l);if(f!==undefined){if(d.asOnes===null){f.srcIds.add(e)}continue}t.set(l,i);if(d.asOnes===null){i.srcIds.add(e);continue}const u=new Set;for(const m of d.srcIds){const y=$srcById.get(m).parentNode;if(u.has(y)){continue}u.add(y);i.srcIds.add(m)}}for(const[l,i]of t){const p=$srcById.get(i.sId);if(is$hide(p)){prpDeleteDescrId(t,l,r);continue}const d=descrById.get(l);if(d.asOnes!==null||d.get$elsByStr===null){continue}const I=get$els(p,d.get$elsByStr,""),w=I.length;if(w===1){continue}for(let e=true,n=0;n<w;n++){const g=srcBy$src.get(I[n]);if(g===undefined){continue}const _=g.descr.id;if(_!==l){prpDeleteDescrId(t,_,r)}}i.$els=I}const s=new Map,o=mw_$src.parentNode;for(const[l,i]of t){let e=$srcById.get(i.sId),n=srcBy$src.get(e);const h=type_prepareMerge(0,n.asOneIdx!==null?n.asOneIdx.values().next().value:0);s.set(l,h);for(;e!==o;e=e.parentNode,n=srcBy$src.get(e)){h.len++;if(e.getAttribute(lazyRenderName)!==null){i.isLazyRender=true;addScrollAnimationsEvent(e)}const P=n.descr;if(n.asOneIdx!==null||P.get$elsByStr===null){h.descrId.add(P.id);continue}const I=get$els(e,P.get$elsByStr,"");for(let e=I.length-1;e>-1;e--){const g=srcBy$src.get(I[e]);if(g!==undefined){h.descrId.add(g.descr.id)}}}}const n=Array.from(t.keys()),a=n.length;for(let e=0;e<a;e++){const _=n[e];if(_===0){continue}const h=s.get(_);for(let e=0;e<a;e++){const S=n[e];if(S===0||_===S){continue}const A=s.get(S);if(h.len>A.len){continue}if(A.descrId.has(_)){prpDeleteDescrId(t,S,r);n[e]=0;continue}if(h.firstAsOneIdx!==0&&h.firstAsOneIdx===A.firstAsOneIdx){prpDeleteDescrId(t,S,r);n[e]=0}}}renderParams.clear();return t}function prpDeleteDescrId(e,n,r){if(!e.has(n)){return}const t=e.get(n).srcIds;for(const s of syncInRender){if(t.has(s.renderParam.sId)){s.stat=4;r.add(s)}}e.delete(n)}function checkSync(e,n){if(e.stat!==0){return getPosStat(e,n)}const r=getPosStat(e,n);if(r!==0){cancelSync(e,r)}return r}export function cancelSync(e,n){e.stat=n;for(const[r,t]of e.idleCallback){cancelIdleCallback(r);t()}for(const[r,t]of e.animationFrame){cancelAnimationFrame(r);t()}syncInRender.delete(e);e.resolve();return n}function getPosStat(e,n){const r=getSrcId(e.local,e.renderParam.sId),t=$srcById.get(r);if(t===undefined){console.warn("!!! checkSync - hz "+r);return 5}const s=mw_$src.parentNode;if(n.$els===null){for(let e=t;e!==s;e=e.parentNode){const o=srcBy$src.get(e).id;if(n.srcIds.has(o)){return o===r?2:1}}}else{const a=n.$els,i=a.length;for(let e,n=t;n!==s;n=n.parentNode){for(e=0;e<i;e++){const c=a[e];if(c===n){return srcBy$src.get(n).id===r?2:1}}}}for(let e=$srcById.get(n.sId).parentNode;e!==s;e=e.parentNode){if(srcBy$src.get(e).id===r){return 3}}return 0}function type_delayParam(e,n,r){return{sId:e,resolve:n,reject:r}}function type_renderParam(e,n,r,t){return{sId:e,scope:n,str:r,isLinking:t,isLazyRender:false,srcIds:new Set,$els:null}}function type_prepareMerge(e,n){return{len:e,descrId:new Set,firstAsOneIdx:n}}function type_sync(e,n){let r;const t=new Promise(e=>r=e);return{syncId:e,renderParam:n,local:new Map,beforeAnimations:new Set,animations:new Set,afterAnimations:new Set,scrollAnimations:new Set,onreadies:new Set,idleCallback:new Map,animationFrame:new Map,stat:0,promise:t,resolve:r}}function infoBySrcIds(e){const n={};for(const r of e){n[r]=$srcById.get(r)}return n}')],
["/api.js", import('data:text/javascript;text,let incCache,render,getCurRender,setDelay,syncInRender,cancelSync,p_target,p_topUrl,preRender,removeChild,dispatchCustomEvent,setLoc,getProxy,oset,del,copyToClipboard,getUrl;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/cmd/inc.js"),self.__i.get("/render/algo.js"),self.__i.get("/config.js"),self.__i.get("/dom.js"),self.__i.get("/evt.js"),self.__i.get("/loc.js"),self.__i.get("/proxy.js"),self.__i.get("/oset.js"),self.__i.get("/str.js"),self.__i.get("/url.js")]).then(arr=>{let m;m=arr[0];incCache=m.incCache;m=arr[1];render=m.render;getCurRender=m.getCurRender;setDelay=m.setDelay;syncInRender=m.syncInRender;cancelSync=m.cancelSync;m=arr[2];p_target=m.p_target;p_topUrl=m.p_topUrl;m=arr[3];preRender=m.preRender;removeChild=m.removeChild;m=arr[4];dispatchCustomEvent=m.dispatchCustomEvent;m=arr[5];setLoc=m.setLoc;m=arr[6];getProxy=m.getProxy;m=arr[7];oset=m.oset;del=m.del;m=arr[8];copyToClipboard=m.copyToClipboard;m=arr[9];getUrl=m.getUrl;}));function begin(){self.mw_incCache=incCache;self.mw_render=render;self.mw_getCurRender=getCurRender;self.mw_setDelay=setDelay;self.mw_syncInRender=syncInRender;self.mw_cancelSync=cancelSync;self.mw_p_target=p_target;self.mw_p_topUrl=p_topUrl;self.mw_preRender=preRender;self.mw_removeChild=removeChild;self.mw_setLoc=setLoc;self.mw_getProxy=getProxy;self.mw_oset=oset;self.mw_del=del;self.mw_copyToClipboard=copyToClipboard;self.mw_getUrl=getUrl;self.mw_dispatchCustomEvent=dispatchCustomEvent}if(self.__imports===undefined){begin()}else{self.__imports.then(begin)}')],
["/eval2.js", import('data:text/javascript;text,let type_req,getCacheSrcId,cmdPref,srcById,srcBy$src,getErr,setCur$src,proxyStat;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/cache.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/err.js"),self.__i.get("/proxy.js")]).then(arr=>{let m;m=arr[0];type_req=m.type_req;m=arr[1];getCacheSrcId=m.getCacheSrcId;m=arr[2];cmdPref=m.cmdPref;m=arr[3];srcById=m.srcById;srcBy$src=m.srcBy$src;m=arr[4];getErr=m.getErr;m=arr[5];setCur$src=m.setCur$src;proxyStat=m.proxyStat;}));const func=Object.getPrototypeOf(async function(){}).constructor,_func=self.mw_func||{};export function eval2(r,t,e){const c=getCacheSrcId(r.$src,r.str),s=srcById.get(c).cache;if(s===null){console.warn(111);alert(1)}if(s.value.has(r.str)){return s.value.get(r.str)}const n=getEval2Func(r,r.expr);proxyStat.value=0;if(e){setCur$src(t);const l=n.apply(t,[r,r.scope]).catch(t=>{throw getErr(t,r.$src,r)});if(proxyStat.value!==0){s.value.set(r.str,l)}setCur$src();return l}const l=n.apply(t,[r,r.scope]).catch(t=>{throw getErr(t,r.$src,r)});if(proxyStat.value!==0){s.value.set(r.str,l)}return l}export function q_eval2(r,t,e){return q_getEval2Func(r,r.expr).apply(null,[r,t,e,r.str,setCur$src,proxyStat,srcBy$src]).then(t=>Promise.all(t)).catch(t=>{throw getErr(t,r.$src,r)})}export function getEval2Func(r,t){t=t.trim();const e=t,c=_func[e];if(c){return c}if(t===""){return _func[e]=new func}if(isNeedRet(t)){t="const _tpl_res = "+t+";\\nreturn _tpl_res;"}const s="with (_tpl_scope) {"+t+"\\n}";try{return _func[e]=new func("req","_tpl_scope",s)}catch(t){throw getErr(t,r.$src,r)}}export function q_getEval2Func(r,t){t=t.trim();const e="=q"+t,c=_func[e];if(c){return c}if(t===""){return _func[e]=new func}if(isNeedRet(t)){t="const _tpl_res = "+t+";\\nreturn _tpl_res;"}const s=`const _tpl_len = _tpl_arr.length,\\n	_tpl_val = new Array(_tpl_len);\\nfor (let i = 0; i < _tpl_len; i++) {\\n	if (_tpl_isLast.has(i)) {\\n		continue;\\n	}\\n	const $i = _tpl_arr[i].$src,\\n		src = _tpl_srcBy$src.get($i),\\n		c = src.cache;\\n	if (c.value.has(_tpl_str)) {\\n		_tpl_val[i] = c.value.get(_tpl_str);\\n//console.log(7777, "q", _tpl_val[i]);\\n		continue;\\n	}\\n	_tpl_proxyStat.value = 0;\\n	_tpl_setCur$src($i);\\n	const v = _tpl_val[i] = (function() {\\n//todebug \\n		if (self.mw_debugLevel !== 0) {\\n			req.scope = _tpl_arr[i].scope;\\n		}\\n		with (_tpl_arr[i].scope) {${t}\\n		}\\n	}).apply($i);\\n	if (_tpl_proxyStat.value !== 0) {\\n//--		_tpl_setCacheValue(cacheSrcId, _tpl_str, v);\\n		c.value.set(_tpl_str, v);\\n	}\\n}\\n_tpl_setCur$src();\\n//_tpl_proxyStat.value = 0;\\nreturn _tpl_val;`;try{return _func[e]=new func("req","_tpl_arr","_tpl_isLast","_tpl_str","_tpl_setCur$src","_tpl_proxyStat","_tpl_srcBy$src",s)}catch(t){throw getErr(t,r.$src,r)}}const _e=["with","var","try","catch","switch","do","while","let","const","for","if","return"];function isNeedRet(r){if(r===""){return false}r=clearBlock(clearBlock(clearBlock(clearBlock(clearBlock(r,"\'","\'"),"`","`"),\'"\',\'"\'),"{","}"),"(",")");for(let t=_e.length-1;t>-1;t--){const e=r.indexOf(_e[t]);if(e===-1){continue}switch(r[e+_e[t].length]){case" ":case"(":case"\\n":case"\\t":case"\\r":return false}}return true}function clearBlock(c,s,n){for(let e=c.indexOf(s);e!==-1;e=c.indexOf(s,e+1)){const l=c.length;for(let t=e+1,r=0;t<l;t++){if(c[t]==="\\\\"){t++}if(c[t]===n){if(r===0){c=c.substr(0,e+1)+c.substr(t);e=t;break}r--;continue}if(c[t]===s){r++}}}return c}')],
["/loading.js", import('data:text/javascript;text,let isFillingName,isFillingDiv,srcBy$src,is$hide;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/dom.js")]).then(arr=>{let m;m=arr[0];isFillingName=m.isFillingName;isFillingDiv=m.isFillingDiv;m=arr[1];srcBy$src=m.srcBy$src;m=arr[2];is$hide=m.is$hide;}));export const loadingCount=new Map;export async function showLoading(t,e,n="",i){const o=getLoadingKey(t),d=loadingCount.get(o);if(await e()){if(d!==undefined){decLoading(t,n,d)}return}const g=d===undefined?createLoading(o):d;if(i===undefined||i===""){i=-1}if(i<0){toggleLoading(t,"",true,g);if(n!==""){toggleLoading(t,n,true,g)}return}toggleLoading(t,"",true,g);if(n===""){return}setTimeout(async()=>{if(is$hide(t)){return}if(!await e()){toggleLoading(t,n,true,g)}},i)}function createLoading(t){const e=type_loading();loadingCount.set(t,e);return e}function getLoadingKey(t){const e=srcBy$src.get(t);if(e===undefined){return t}if(loadingCount.has(e.id)){return e.id}const n=loadingCount.get(t);if(n===undefined){return e.id}loadingCount.delete(t);loadingCount.set(e.id,n);return e.id}function decLoading(t,e,n){if(e!==""){const i=n.get(e)-1;n.set(e,i);if(i<=0){toggleLoading(t,e,false,n)}}const i=n.get("")-1;n.set("",i);if(i>0){return}toggleLoading(t,"",false,n);for(const[o,d]of loadingCount){for(const[g,i]of d){if(i>0){continue}if(g===""){loadingCount.delete(o)}}}}function toggleLoading(t,e,n,i){const o=e===""?isFillingName:isFillingName+isFillingDiv+e;if(!n){t.removeAttribute(o,"");if(t.nodeName==="TEMPLATE"){t.content.firstChild.removeAttribute(o,"")}return}if(e===""){const d=i.get("");i.set("",d+1)}else{const d=i.get(e);if(d===undefined){i.set(e,1)}else{i.set(e,d+1)}}t.setAttribute(o,"");if(t.nodeName==="TEMPLATE"){t.content.firstChild.setAttribute(o,"")}}function type_loading(){return new Map([["",0]])}')],
["/url.js", import('data:text/javascript;text,let defRequestInit;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js")]).then(arr=>{let m;m=arr[0];defRequestInit=m.defRequestInit;}));export function getRequest(e,t){if(typeof e==="string"){return e!==""?new Request(getUrl(e,t),defRequestInit):null}return e instanceof Request||e instanceof Response?e:null}const reHost=/^(\\w+\\:\\/\\/|\\/\\/)/;const reSlash=/\\/\\/+/;const reUp=/[^\\/]+\\/+\\.\\.\\//;const reThis=/\\/+\\.\\//;export function getUrl(t,r=location.pathname){if(isUri(t)){if(isUri(r)){r=normalizeUrl(r)}let e=normalizeUrl_get(t.trim());while(e.indexOf(".")===0){if(e.indexOf("./")===0){e=e.substr(2)}else if(e.indexOf("../")===0){e=e.substr(3)}}t=r.endsWith(e)?r:normalizeUrl(r.substr(0,r.lastIndexOf("/")+1)+t)}return t.search(reHost)===-1?location.origin+t:t}function isUri(e){e=e.trimLeft();return e.search(reHost)!==0&&e[0]!=="/"}function normalizeUrl(e){e=e.trim();if(isUri(e)){const t=location.pathname.lastIndexOf("/");if(t===location.pathname.length-1){e=location.pathname+e}else if(t!==-1){e=location.pathname.substr(0,t+1)+e}}return normalizeUrl_get(e)}function normalizeUrl_get(r){for(let e=[reUp,reThis],t=e.length-1;t>-1;t--){while(r.search(e[t])!==-1){r=r.replace(e[t],"/")}}if(r.search(reHost)===-1){return r.replace(reSlash,"/")}const e=r.indexOf("//");return r.substr(0,e+1)+r.substr(e+1).replace(reSlash,"/")}')],
["/proxy.js", import('data:text/javascript;text,let renderBySrcIds,type_cacheValue,p_target,defIdleCallbackOpt,$srcById,srcById,srcBy$src,descrById,getNewId,get$els;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/algo.js"),self.__i.get("/cache.js"),self.__i.get("/config.js"),self.__i.get("/descr.js")]).then(arr=>{let m;m=arr[0];renderBySrcIds=m.renderBySrcIds;m=arr[1];type_cacheValue=m.type_cacheValue;m=arr[2];p_target=m.p_target;defIdleCallbackOpt=m.defIdleCallbackOpt;m=arr[3];$srcById=m.$srcById;srcById=m.srcById;srcBy$src=m.srcBy$src;descrById=m.descrById;getNewId=m.getNewId;get$els=m.get$els;}));export const varIdByVar=new Map;export const varById=new Map;export const varIdByVarIdByProp=new Map;export const srcIdsByVarId=new Map;self._testVars=function(){const r=new Set(Array.from(varIdByVar.values()));for(const[t,n]of srcIdsByVarId){let e;if(!r.has(t)){let e;for(const a of r){const s=varIdByVarIdByProp.get(a);if(s===undefined){continue}for(const d of s.values()){if(d===t){for(const o of n){if(!$srcById.has(o)){console.log(111222,t,o)}}e=true;break}}if(e){break}}if(!e){console.log(0,t,n)}}else{for(const o of n){if(!$srcById.has(o)){console.log(11111,t,o)}}}}for(const t of varIdByVar.keys()){const e=srcIdsByVarId.get(t);if(!e){continue}for(const o of e){if(!$srcById.has(o)){console.log(1,o)}}const s=varIdByVarIdByProp.get(t);if(s!==undefined){for(const d of s.values()){const c=srcIdsByVarId.get(d);if(c){for(const o of c){if(!$srcById.has(o)){console.log(2,o)}}}}}}};const isSkipNameType=new Set(["symbol"]),isSkipValueType=new Set(["function"]),isScalarType=new Set(["boolean","number","string","undefined"]);let cur$src;export function setCur$src(e){cur$src=e}export const proxyStat={value:1};export function getProxy(r){if(typeof r==="object"&&r!==null){const e=r[p_target];if(e===null||e!==undefined){return r}}else{return r}if(Array.isArray(r)){const t=r.length;for(let e=0;e<t;e++){r[e]=getProxy(r[e])}r.push=new Proxy(r.push,changeArrFuncHandler);r.unshift=new Proxy(r.unshift,changeArrFuncHandler);r.shift=new Proxy(r.shift,changeArrFuncHandler);r.pop=new Proxy(r.pop,changeArrFuncHandler);r.splice=new Proxy(r.splice,changeArrFuncHandler);r.sort=new Proxy(r.sort,changeArrFuncHandler);r.reverse=new Proxy(r.reverse,changeArrFuncHandler);return new Proxy(r,proxyHandler)}if(r instanceof Set){const n=new Set(r);r.clear();for(const a of n){r.add(getProxy(a))}r.entries=new Proxy(r.entries,entriesFuncHandler);r.values=new Proxy(r.values,entriesFuncHandler);r.keys=new Proxy(r.keys,entriesFuncHandler);r.add=new Proxy(r.add,addFuncHandler);r.has=new Proxy(r.has,hasFuncHandler);r.clear=new Proxy(r.clear,clearFuncHandler);return new Proxy(r,proxyHandler)}if(r instanceof Map){const n=new Map(r);r.clear();for(const[s,a]of n){r.set(getProxy(s),getProxy(a))}r.entries=new Proxy(r.entries,entriesFuncHandler);r.values=new Proxy(r.values,entriesFuncHandler);r.keys=new Proxy(r.keys,entriesFuncHandler);r.get=new Proxy(r.get,getFuncHandler);r.set=new Proxy(r.set,setFuncHandler);r.delete=new Proxy(r.delete,deleteFuncHandler);r.has=new Proxy(r.has,hasFuncHandler);r.clear=new Proxy(r.clear,clearFuncHandler);return new Proxy(r,proxyHandler)}for(const d in r){const o=r[d];if(typeof o!=="object"||o===null||o===r){continue}const c=Object.getOwnPropertyDescriptor(r,d);if(c!==undefined&&c.writable){r[d]=getProxy(o)}}return new Proxy(r,proxyHandler)}const proxyHandler={get(e,r){if(proxyStat.value===0){proxyStat.value=1}if(r===p_target){return e}const t=e[r],n=typeof t;if(cur$src&&!isSkipNameType.has(typeof r)&&!isSkipValueType.has(n)){addVar(e,r,getTarget(t),cur$src);return t}return r!==Symbol.iterator?t:e instanceof Map?e.entries:e.values},set(e,r,t,n){const a=getTarget(t);if(r in e){const s=getTarget(e[r]);if(a===s){return true}e[r]=getProxy(t);setVal(e,r,a,s);return true}e[r]=getProxy(t);setVal(e,r,a,undefined);return true},deleteProperty(e,r,t){if(r in e){const n=getTarget(e[r]);delete e[r];setVal(e,r,undefined,n);return true}return true}};const changeArrFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=n.length,s=e.apply(n,t);setVal(n,"length",n.length,a);return s}};const entriesFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=e.apply(n,t);if(cur$src){a.next=new Proxy(a.next,iteratorFuncHandler);a[p_target]=r}return a}};const iteratorFuncHandler={apply(e,r,t){const n=e.apply(r,t);if(n.done){return n}const a=r[p_target][p_target];if(n.value.length!==undefined){const[o,s]=n.value;addVar(a,getTarget(o),getTarget(s),cur$src);return n}const s=n.value,d=getTarget(s);addVar(a,d,d,cur$src);return n}};const getFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=e.apply(n,t);if(cur$src){addVar(n,getTarget(t[0]),getTarget(a),cur$src)}return a}};const setFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const[a,s]=t,d=getTarget(s);if(n.has(a)){const c=getTarget(n.get(a));if(d===c){return r}e.apply(n,[a,getProxy(s)]);setVal(n,getTarget(a),d,c);return r}const o=getProxy(a);e.apply(n,[o,getProxy(s)]);setVal(n,getTarget(a),d,undefined);return r}};const addFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=t[0],s=getTarget(a);if(n.has(a)){const d=getTarget(n.get(a));if(s===d){return r}}e.apply(n,[getProxy(a)]);setVal(n,s,s,undefined);return r}};const deleteFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=t[0];if(!n.has(a)||!e.apply(n,t)){return false}const s=getTarget(n.get(a));setVal(n,getTarget(a),undefined,s);return true}};const hasFuncHandler={apply(e,r,t){return e.apply(r[p_target]||r,t)}};const clearFuncHandler={apply(e,r,t){const n=r[p_target];if(n===undefined){return e.apply(r,t)}const a=n.size;e.apply(n,t);setVal(n,"size",0,a)}};function getTarget(e){return typeof e==="object"&&e!==null?e[p_target]||e:e}function addVar(e,r,t,n){const a=varIdByVar.get(e),s=srcBy$src.get(n),d=s.id,o=s.descr;if(isScalarType.has(typeof t)||t===null){if(a){const f=srcIdsByVarId.get(a);if(f!==undefined){f.add(d)}else{srcIdsByVarId.set(a,new Set([d]))}o.varIds.add(a);const y=varIdByVarIdByProp.get(a);if(y!==undefined){const p=y.get(r);if(p!==undefined){o.varIds.add(p);const f=srcIdsByVarId.get(p);if(f!==undefined){f.add(d);return}srcIdsByVarId.set(p,new Set([d]));return}const u=getNewId();y.set(r,u);srcIdsByVarId.set(u,new Set([d]));o.varIds.add(u);return}const u=getNewId();varIdByVarIdByProp.set(a,new Map([[r,u]]));srcIdsByVarId.set(u,new Set([d]));o.varIds.add(u);return}const i=getNewId();varIdByVar.set(e,i);varById.set(i,e);srcIdsByVarId.set(i,new Set([d]));o.varIds.add(i);const u=getNewId();varIdByVarIdByProp.set(i,new Map([[r,u]]));srcIdsByVarId.set(u,new Set([d]));o.varIds.add(u);return}if(a){const f=srcIdsByVarId.get(a);if(f!==undefined){f.add(d)}else{srcIdsByVarId.set(a,new Set([d]))}o.varIds.add(a)}else{const i=getNewId();varIdByVar.set(e,i);varById.set(i,e);srcIdsByVarId.set(i,new Set([d]));o.varIds.add(i)}const c=varIdByVar.get(t);if(c){const f=srcIdsByVarId.get(c);if(f!==undefined){f.add(d)}else{srcIdsByVarId.set(c,new Set([d]))}o.varIds.add(c);return}const l=getNewId();varIdByVar.set(t,l);varById.set(l,t);srcIdsByVarId.set(l,new Set([d]));o.varIds.add(l)}function setVal(e,r,t,n){const a=varIdByVar.get(e);if(!a){return}const s=varIdByVarIdByProp.get(a),d=s!==undefined&&s.get(r)||0,o=d!==0&&varIdByVar.get(n)||0;if(self.mw_debugLevel===2){console.info("mw_proxy => setVar","\\n\\tname=>",r,"\\n\\tvalue=>",t,"\\n\\toldVal=>",n,"\\n\\ttId=>",a,"\\n\\ttarget=>",e,"\\n\\toldId=>",o,"\\n\\toldScalarId=>",d)}if(cur$src){addVar(e,r,t,cur$src)}if(d&&!isScalarType.has(typeof t)&&t!==null){s.delete(r);if(s.size===0){varIdByVarIdByProp.delete(a)}}const c=srcIdsByVarId.get(o||a);if(c===undefined){return}const l=new Set(c),i=new Set;for(const u of c){const f=$srcById.get(u);if(f===undefined||i.has(u)){continue}const y=srcBy$src.get(f).descr;if(y.asOnes===null){i.add(u);setInnerSrcIdSetBy$src(i,f);continue}const p=get$els(f,y.get$elsByStr,"");for(let e=p.length-1;e>-1;e--){const g=p[e],I=srcBy$src.get(g);if(I!==undefined){i.add(I.id);setInnerSrcIdSetBy$src(i,g)}}}if(o!==0){const B=new Set;for(const u of i){const V=srcById.get(u).cache;V.value=type_cacheValue();decVar(e,r,n,u,o,B)}if(B.size!==0){requestIdleCallback(()=>{for(const e of descrById.values()){if(e.varIds===null){continue}for(const r of B){e.varIds.delete(r)}}},defIdleCallbackOpt)}}else{for(const u of i){const V=srcById.get(u).cache;V.value=type_cacheValue()}}renderBySrcIds(l)}function setInnerSrcIdSetBy$src(e,r){const t=r.parentNode;do{const n=srcBy$src.get(r);if(n!==undefined&&n.isCmd){e.add(n.id)}if(r.firstChild!==null){r=r.firstChild;continue}if(r.parentNode===t){break}if(r.nextSibling!==null){r=r.nextSibling;continue}do{r=r.parentNode;if(r.parentNode===t){r=null;break}if(r.nextSibling!==null){r=r.nextSibling;break}}while(true)}while(r!==null)}function decVar(e,r,t,n,a,s){if(a===0){if(isScalarType.has(typeof t)||t===null){const d=varIdByVarIdByProp.get(varIdByVar.get(e));if(d!==undefined){a=d.get(r);if(a===undefined){a=0}}}else{a=varIdByVar.get(t);if(a===undefined){a=0}}}if(a!==0){const o=srcIdsByVarId.get(a);if(o===undefined||!o.has(n)){delVar(a,t,e,r,s);return}o.delete(n);if(o.size===0){delVar(a,t,e,r,s)}}if(Array.isArray(t)){const c=t.length;for(let e=0;e<c;e++){decVar(t,e,getTarget(t[e]),n,0,s)}return}if(typeof t!=="object"||t===null){return}for(const l in t){decVar(t,l,getTarget(t[l]),n,0,s)}}function delVar(e,r,t,n,a){a.add(e);srcIdsByVarId.delete(e);if(isScalarType.has(typeof r)||r===null){const s=varIdByVarIdByProp.get(e=varIdByVar.get(t));if(s===undefined){return}s.delete(n);if(s.size===0){varIdByVarIdByProp.delete(e)}return}varIdByVar.delete(r);varById.delete(e);const s=varIdByVarIdByProp.get(e);if(s!==undefined){varIdByVarIdByProp.delete(e);for(const d of s.values()){srcIdsByVarId.delete(d)}}}')],
["/cmd/fetch.js", import('data:text/javascript;text,let type_animation,type_renderRes,type_cacheValue,type_cacheCurrent,defRequestInit,loadEventName,okEventName,errorEventName,resultDetailName,errorDetailName,srcBy$src,eval2,dispatchCustomEvent,getRequest;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/cache.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/eval2.js"),self.__i.get("/evt.js"),self.__i.get("/url.js")]).then(arr=>{let m;m=arr[0];type_animation=m.type_animation;type_renderRes=m.type_renderRes;m=arr[1];type_cacheValue=m.type_cacheValue;type_cacheCurrent=m.type_cacheCurrent;m=arr[2];defRequestInit=m.defRequestInit;loadEventName=m.loadEventName;okEventName=m.okEventName;errorEventName=m.errorEventName;resultDetailName=m.resultDetailName;errorDetailName=m.errorDetailName;m=arr[3];srcBy$src=m.srcBy$src;m=arr[4];eval2=m.eval2;m=arr[5];dispatchCustomEvent=m.dispatchCustomEvent;m=arr[6];getRequest=m.getRequest;}));export default{render(r){return eval2(r,r.$src,true).then(e=>{const t=getRequest(e,"");if(t===null){return type_renderRes(true)}const n=t instanceof Response?getRes(r,t,null):getFetch(r,t);r.sync.afterAnimations.add(type_animation(()=>n,r.sync.local,0));return null})}};function getFetch(t,e){if(t.sync.stat!==0){clearFetch(t);return}for(const n in defRequestInit){if(n==="headers"){for(const n in defRequestInit.headers){if(e.headers[n]===undefined){e.headers[n]=defRequestInit.headers[n]}}continue}if(e[n]===undefined){e[n]=defRequestInit[n]}}return fetch(e).then(e=>getRes(t,e,null)).catch(e=>getRes(t,null,e))}function getRes(t,n,r){if(t.sync.stat!==0){clearFetch(t);return}t.sync.afterAnimations.add(type_animation(()=>t.sync.beforeAnimations.add(type_animation(()=>{const e=type_fetchDetailEvent(n,r);if(r!==null){dispatchCustomEvent(t.$src,errorEventName,e);return}dispatchCustomEvent(t.$src,loadEventName,e);if(n.ok){dispatchCustomEvent(t.$src,okEventName,e)}},t.sync.local,0)),t.sync.local,0))}function clearFetch(e){if(self.mw_debugLevel!==0){console.info("clear fetch => ",e)}const t=srcBy$src.get(e.$src).cache;t.value=type_cacheValue();t.current=type_cacheCurrent()}function type_fetchDetailEvent(e,t){return{[resultDetailName]:e,[errorDetailName]:t}}')],
["/str.js", import('data:text/javascript;text,export function kebabToCamelCase(t){if(t===""||t===undefined){return t}const n=t.split("-"),o=n.length;if(o==1){return t}t=n[0];for(let e=1;e<o;e++){if(n[e]!==""){t+=n[e][0].toUpperCase()+n[e].substr(1)}}return t}export function copyToClipboard(e){const t=document.createElement("input");t.type="text";t.value=e;t.setSelectionRange(0,this.length);document.execCommand("copy")}')],
["/cmd/scope.js", import('data:text/javascript;text,let p_target,getErr,kebabToCamelCase;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js"),self.__i.get("/err.js"),self.__i.get("/str.js")]).then(arr=>{let m;m=arr[0];p_target=m.p_target;m=arr[1];getErr=m.getErr;m=arr[2];kebabToCamelCase=m.kebabToCamelCase;}));export default{render(e){e.scope[p_target][getName(e)]=e.scope;return null},q_render(e,r,t){const o=getName(e),n=r.length;for(let e=0;e<n;e++){if(!t.has(e)){r[e].scope[p_target][o]=r[e].scope}}return null}};function getName(e){const r=e.reqCmd.args[0];if(r!==undefined&&r!==""){return kebabToCamelCase(r)}throw getErr(new Error(">>>mw scope:render: Need set scope name"),e.$src,e)}')],
["/cache.js", import('data:text/javascript;text,let srcBy$src,get$first,getNextStr;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/descr.js")]).then(arr=>{let m;m=arr[0];srcBy$src=m.srcBy$src;get$first=m.get$first;getNextStr=m.getNextStr;}));export function type_cache(){return{isInits:type_cacheInit(),current:type_cacheCurrent(),value:type_cacheValue(),attrSyncCur:type_cacheAttrSyncCur()}}function type_cacheInit(){return new Set}export function type_cacheCurrent(){return new Map}export function type_cacheValue(){return new Map}function type_cacheAttrSyncCur(){return new Map}export function type_cacheAttrSyncCurI(e,t){return{syncId:e,value:t}}export function getCacheSrcId(e,t){const r=srcBy$src.get(e);if(r===undefined){console.warn("2323",e,t);return 0}const n=r.descr;if(n.asOnes===null||!n.asOnes.has(t)){return r.id}const c=getNextStr(r,t);e=get$first(e,n.get$elsByStr,c);do{const u=srcBy$src.get(e);if(u!==undefined&&u.isCmd){return u.id}e=e.nextSibling}while(e!==null);throw new Error("getCacheSrcId")}')],
["/cmd/exec.js", import('data:text/javascript;text,let p_target,eval2,q_eval2,getProxy,kebabToCamelCase;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js"),self.__i.get("/eval2.js"),self.__i.get("/proxy.js"),self.__i.get("/str.js")]).then(arr=>{let m;m=arr[0];p_target=m.p_target;m=arr[1];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[2];getProxy=m.getProxy;m=arr[3];kebabToCamelCase=m.kebabToCamelCase;}));export default{render(t){return eval2(t,t.$src,true).then(e=>{const r=getName(t);if(r!==undefined){t.scope[p_target][r]=getProxy(e)}return null})},q_render(e,o,a){return q_eval2(e,o,a).then(r=>{const t=getName(e);if(t===undefined){return null}const n=o.length;for(let e=0;e<n;e++){if(!a.has(e)){o[e].scope[p_target][t]=getProxy(r[e])}}return null})}};function getName(e){const r=e.reqCmd.args[0];if(r!==undefined&&r!==""){return kebabToCamelCase(r)}}')],
["/descr.js", import('data:text/javascript;text,let setReqCmd,type_cache,reqCmd,incCmdName,setAsOneIdx,getIdx,setIdx,loadingCount,getProxy;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/cache.js"),self.__i.get("/config.js"),self.__i.get("/dom.js"),self.__i.get("/loading.js"),self.__i.get("/proxy.js")]).then(arr=>{let m;m=arr[0];setReqCmd=m.setReqCmd;m=arr[1];type_cache=m.type_cache;m=arr[2];reqCmd=m.reqCmd;incCmdName=m.incCmdName;m=arr[3];setAsOneIdx=m.setAsOneIdx;getIdx=m.getIdx;setIdx=m.setIdx;m=arr[4];loadingCount=m.loadingCount;m=arr[5];getProxy=m.getProxy;}));export const $srcById=new Map;export const srcById=new Map;export const srcBy$src=new WeakMap;export const descrById=self.mw_descrById||new Map;export let idCurVal=self.mw_idCurVal||0;export function getNewId(){return++idCurVal}export function createSrc(e,t,r,n){const s=getNewId();if(t===undefined){t=createDescr(e,s);const o=t.attr!==null?type_src(s,t,true,null,null,type_cache()):type_src(s,t,false,null,null,null);$srcById.set(s,e);srcById.set(s,o);srcBy$src.set(e,o);return o}t.srcIds.add(s);const o=t.attr!==null?type_src(s,t,true,r,n,type_cache()):type_src(s,t,false,null,null,null);$srcById.set(s,e);srcById.set(s,o);srcBy$src.set(e,o);if(!o.isCmd){return o}moveLoading(e,s);return o}export function createDescr(e,t){const r=getNewId(),n=createAttr(e);if(n.size===0){const s=type_descr(r,t,null,null);descrById.set(r,s);return s}const s=type_descr(r,t,n,new Set);let o=0;for(const[c,u]of n){const d=reqCmd.get(c);if(d.cmd.get$els){if(s.get$elsByStr===null){s.get$elsByStr=type_get$elsByStr()}s.get$elsByStr.set(c,type_get$elsByStrI(u,o))}o++;if(d.cmd.isCustomHtml&&s.isCustomHtml===false){s.isCustomHtml=true}if(d.cmd.isAsOne){if(s.asOnes===null){s.asOnes=new Set}s.asOnes.add(c)}}descrById.set(r,s);return s}function moveLoading(e,t){const r=loadingCount.get(e);if(r===undefined){return}loadingCount.set(t,r);loadingCount.delete(e)}function type_src(e,t,r,n,s,o){return{id:e,descr:t,isCmd:r,asOneIdx:n,idx:s,save:null,cache:o,scopeCache:getProxy({}),isMounted:false}}export function type_asOneIdx(e){return new Map(e)}export function type_idx(e){return new Map(e)}export function type_save(e){if(e===undefined){return new Map}const t=new Map;for(const[r,n]of e){t.set(r,type_saveI(n))}return t}export function type_saveI(e){return new Map(e)}function type_descr(e,t,r,n){return{id:e,sId:t,attr:r,varIds:n,srcIds:new Set([t]),isCustomHtml:false,asOnes:null,get$elsByStr:null}}function type_get$elsByStr(){return new Map}function type_get$elsByStrI(e,t){return{expr:e,pos:t}}export function createAttr(e){const t=new Map,r=e.attributes,n=r.length;for(let e=0;e<n;e++){const s=r[e];if(setReqCmd(s.name)){t.set(s.name,s.value)}}return t}export function getSrcId(t,r){if(srcById.has(r)){return r}for(let e=t.get(r);e!==undefined&&e.newSrcId!==0;e=t.get(r)){r=e.newSrcId}return r}export function get$els(e,t,r){const n=srcBy$src.get(e).descr.attr.keys();let s=n.next();if(r!==""){for(;!s.done;s=n.next()){if(s.value===r){break}}}while(!s.done){const o=s.value,c=t.get(o);if(c!==undefined){return reqCmd.get(o).cmd.get$els(e,o,c.expr,c.pos)}s=n.next()}return[e]}export function get$first(e,t,r){const n=srcBy$src.get(e).descr.attr.keys();let s=n.next();if(r!==""){for(;!s.done;s=n.next()){if(s.value===r){break}}}while(!s.done){const o=s.value,c=t.get(r);if(c!==undefined){return reqCmd.get(r).cmd.get$first(e,r,c.expr,c.pos)}s=n.next()}return e}export function getNextStr(e,t){const r=e.descr.attr.keys();for(let e=r.next();!e.done;e=r.next()){if(e.value!==t){continue}e=r.next();if(e.done){return""}return e.value}return""}export function getAttrAfter(e,t){const r=new Map,n=getAttrItAfter(e.entries(),t,true);for(let e=n.next();!e.done;e=n.next()){r.set(e.value[0],e.value[1])}return r}export function getAttrItAfter(t,r,e){if(r===""){return t}if(e){for(let e=t.next();!e.done;e=t.next()){if(e.value[0]===r){return t}}return t}for(let e=t.next();!e.done;e=t.next()){if(e.value===r){return t}}return t}')],
["/addons.js", import('data:text/javascript;text,if(!self.requestIdleCallback){self.requestIdleCallback=function(e){const t=Date.now();return setTimeout(()=>{e({didTimeout:false,timeRemaining(){return Math.max(0,50-(Date.now()-t))}})},1)}}')],
["/loc.js", import('data:text/javascript;text,let locVarName,oset,getProxy;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js"),self.__i.get("/oset.js"),self.__i.get("/proxy.js")]).then(arr=>{let m;m=arr[0];locVarName=m.locVarName;m=arr[1];oset=m.oset;m=arr[2];getProxy=m.getProxy;}));export function setLoc(o){oset(self,locVarName,getLoc(o))}export function getLoc(o){o=new URL(o);const t=new Map;for(const[e,r]of o.searchParams){t.set(e,r)}return type_loc(o.pathname,t,o.hash)}function type_loc(o,t,e){return{path:o,query:t,hash:{path:e.substr(1)}}}')],
["/cmd/if.js", import('data:text/javascript;text,let renderTag,type_req,type_animation,type_renderRes,p_target,ifCmdName,elseifCmdName,elseCmdName,switchCmdName,caseCmdName,defaultCmdName,foreachCmdName,incCmdName,reqCmd,$srcById,srcBy$src,getAttrAfter,get$els,get$first,getNextStr,show,hide,getIdx,getErr,eval2,q_eval2,ocopy,srcSetScope,getProxy,kebabToCamelCase;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/dom.js"),self.__i.get("/err.js"),self.__i.get("/eval2.js"),self.__i.get("/oset.js"),self.__i.get("/proxy.js"),self.__i.get("/str.js")]).then(arr=>{let m;m=arr[0];renderTag=m.renderTag;type_req=m.type_req;type_animation=m.type_animation;type_renderRes=m.type_renderRes;m=arr[1];p_target=m.p_target;ifCmdName=m.ifCmdName;elseifCmdName=m.elseifCmdName;elseCmdName=m.elseCmdName;switchCmdName=m.switchCmdName;caseCmdName=m.caseCmdName;defaultCmdName=m.defaultCmdName;foreachCmdName=m.foreachCmdName;incCmdName=m.incCmdName;reqCmd=m.reqCmd;m=arr[2];$srcById=m.$srcById;srcBy$src=m.srcBy$src;getAttrAfter=m.getAttrAfter;get$els=m.get$els;get$first=m.get$first;getNextStr=m.getNextStr;m=arr[3];show=m.show;hide=m.hide;getIdx=m.getIdx;m=arr[4];getErr=m.getErr;m=arr[5];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[6];ocopy=m.ocopy;srcSetScope=m.srcSetScope;m=arr[7];getProxy=m.getProxy;m=arr[8];kebabToCamelCase=m.kebabToCamelCase;}));export const ifCmd={get$els(e,t,r,s){return if_get$els(ifCmdName,elseifCmdName,elseCmdName,e,t,r,s)},get$first(e,t,r,s){return if_get$first(ifCmdName,elseifCmdName,elseCmdName,e,t,r,s)},render(t){make$first(t,ifCmdName,elseifCmdName,elseCmdName);return eval2(t,t.$src,true).then(e=>if_render(t,e,ifCmdName,elseifCmdName,elseCmdName))},q_render(s,n,i){let c=0;while(i.has(c)){c++}const m=n.length;if(c===m){return null}return q_eval2(s,n,i).then(e=>{const t=new Array(m);do{const r=type_req(n[c].$src,s.str,s.expr,n[c].scope,s.sync);make$first(r,ifCmdName,elseifCmdName,elseCmdName);t[c]=if_render(r,e[c],ifCmdName,elseifCmdName,elseCmdName);while(i.has(++c));if(c===m){break}}while(true);return t})}};export const switchCmd={get$els(e,t,r,s){return if_get$els(switchCmdName,caseCmdName,defaultCmdName,e,t,r,s)},get$first(e,t,r,s){return if_get$first(switchCmdName,caseCmdName,defaultCmdName,e,t,r,s)},render(r){make$first(r,switchCmdName,caseCmdName,defaultCmdName);let e=true;for(const[s,n]of srcBy$src.get(r.$src).descr.attr){if(e){if(s===r.str){e=false}continue}const i=reqCmd.get(s);if(i.cmdName!==caseCmdName){continue}return eval2(r,r.$src,true).then(t=>{r.reqCmd=i;r.str=s;r.expr=n;return eval2(r,r.$src,true).then(e=>if_render(r,e,switchCmdName,caseCmdName,defaultCmdName,e=>e===t))})}throw getErr(new Error(">>>mw switch:01:Invalide structure: case-cmmand not found"),r.$src,r)}};async function if_render(s,n,e,i,c,m=e=>e,t){const r=srcBy$src.get(s.$src.parentNode),f=r!==undefined?r.scopeCache:{},a=type_req(s.$src,s.str,s.expr,srcSetScope(srcBy$src.get(s.$src),f),s.sync);let d=m(n);if(d){const C=a.reqCmd.args[0];if(C!==undefined&&C!==""){a.scope[p_target][kebabToCamelCase(C)]=getProxy(n)}}let[o,l,u]=makeShow(a,a.$src,a.str,d);const g=isSingle(a.$src,srcBy$src.get(a.$src),a.str,e);if(g===-1){return type_renderRes(u==="",l,o,l,u)}for(let r=o.nextSibling;r!==null;r=r.nextSibling){const N=srcBy$src.get(r);if(N===undefined){continue}if(!N.isCmd){break}let e=true,t=0;for(const[$,p]of N.descr.attr){if(t++<g){continue}const h=reqCmd.get($);if(h.cmdName!==i&&h.cmdName!==c){break}const a=type_req(r,$,p,srcSetScope(N,f),s.sync);e=false;if(d){[o]=makeShow(a,r,$,false);r=o;break}if(h.cmdName===c){[o,l,u]=makeShow(a,r,$,true);r=o;break}n=await eval2(a,r,true);if(d=m(n)){const C=a.reqCmd.args[0];if(C!==undefined&&C!==""){a.scope[p_target][kebabToCamelCase(C)]=getProxy(n)}[o,l,u]=makeShow(a,r,$,true);r=o;n=true;break}[o,l,u]=makeShow(a,r,$,false);r=o;break}if(e){break}}return type_renderRes(u==="",l,o,l,u)}function make$first(e,t,r,s){let n=0;for(const c of srcBy$src.get(e.$src).descr.attr.keys()){if(c===e.str){break}n++}const i=if_get$first(t,r,s,e.$src,e.str,e.expr,n);if(reqCmd.get(e.str).cmdName===t){e.$src=i;return}for(const[c,m]of srcBy$src.get(i).descr.attr){const f=reqCmd.get(c);if(f.cmdName===t){e.reqCmd=f;e.str=c;e.expr=m;e.$src=i;return}}}function if_get$first(m,f,a,d,o,e,t,l){const u=o!==""&&reqCmd.get(o).cmdName===m;for(let c=d;c!==null;c=c.previousSibling){const g=srcBy$src.get(c);if(g===undefined){continue}if(!g.isCmd){break}let e=true,i=0;for(const C of g.descr.attr.keys()){const N=reqCmd.get(C);if(N.cmdName===incCmdName){i=0;continue}i++;if(u){if(C!==o){continue}}else if(N.cmdName===f||N.cmdName===a){if(i!==1){throw getErr(new Error(">>>mw if:make$first:01 Invalid structure: elseif and else command can be first in this attributes"),c)}e=false;break}else if(N.cmdName!==m){continue}if(l){l.str=C}let t=0,r=[],s="",n;const $=g.descr.attr.keys();for(let e=$.next();!e.done;e=$.next()){if(t===0){const C=e.value,N=reqCmd.get(C);if(N.cmdName===foreachCmdName){r.push([C,getIdx(g,C)])}}if(e.value!==o){continue}for(e=$.next();!e.done;e=$.next()){const C=e.value,N=reqCmd.get(C);if(s===""&&N.cmdName===incCmdName){if(getIdx(g,C)!==undefined){t++}}else if(t===0&&s===""&&N.cmdName===foreachCmdName){n=getIdx(g,C);if(n!==undefined){s=C}}}break}if(t!==0){for(c=c.previousSibling;c!==null;c=c.previousSibling){if(c.nodeType===8&&c.textContent==="inc_begin"){if(--t){continue}for(c=c.nextSibling;c!==null;c=c.nextSibling){const g=srcBy$src.get(c);if(g!==undefined&&g.isCmd){return c}}}}throw getErr(new Error(">>>mw if:make$first:02 Invalid structure: inc_begin not found"),d)}if(s!==""){const p=r.length;for(let e=c.previousSibling;e!==null;e=e.previousSibling){const h=srcBy$src.get(e);if(h===undefined||!h.isCmd){continue}const y=getIdx(h,s);if(y===undefined||n<y){return c}if(p>0){for(let e=0;e<p;e++){const b=r[e];if(getIdx(h,b[0])!==b[1]){return c}}}c=e;n=y}return c}return c}if(e){break}}throw getErr(new Error(`>>>mw if:ifGet$first:02 Invalid structure: if-command not found - str => "${o}"`),d)}function if_get$els(e,r,s,t,n,i,c){const m={str:""};let f=if_get$first(e,r,s,t,n,i,c,m);for(let e=srcBy$src.get(f);e!==undefined&&!e.isCmd&&f!==null;f=f.nextSibling,e=srcBy$src.get(f)){f=f.nextSibling}const a=srcBy$src.get(f),d=if_getNextStr(a,m.str),o=d!==""?get$els(f,a.descr.get$elsByStr,d):[f],l=isSingle(f,a,m.str,e);if(l===-1){return o}if(d!==""){f=o[o.length-1]}let u=[];for(f=f.nextSibling;f!==null;f=f.nextSibling){const a=srcBy$src.get(f);if(a===undefined){u.push(f);continue}if(!a.isCmd){return o}let e=true,t=0;const g=a.descr;for(const C of g.attr.keys()){if(t++<l){continue}const N=reqCmd.get(C);if(N.cmdName!==r&&N.cmdName!==s){break}e=false;const d=if_getNextStr(a,C),$=d!==""?get$els(f,g.get$elsByStr,d):[f];if($.length===1){if(u.length!==0){o.push(...u);u=[]}o.push(f);break}f=$[0].previousSibling;u=[];while(true){const a=srcBy$src.get(f);if(a===undefined){break}u.push(f);f=f.previousSibling}const p=u.length;if(p!==0){for(let e=p-1;e>-1;e--){o.push(u[e])}u=[]}f=o[o.push(...$)-1];break}if(e){return o}}return o}function isSingle(e,t,r,s){let n=0,i=false;for(const c of t.descr.attr.keys()){if(c===r){break}const m=reqCmd.get(c).cmdName;if(s===switchCmdName&&m===switchCmdName){continue}n++;switch(m){case s:case elseifCmdName:case elseCmdName:case foreachCmdName:case caseCmdName:case defaultCmdName:i=true;break;case incCmdName:i=false;break}}return i?-1:n}function makeShow(t,r,s,e){const n=srcBy$src.get(r),i=if_getNextStr(n,s),c=i!==""?get$els(r,n.descr.get$elsByStr,i):[r],m=c.length,f=c[m-1];if(!e){for(let e=0;e<m;e++){r=c[e];if(r.nodeType===1){hide(t,r)}}return[f,null,""]}let a=null,d="",o=true;for(let e=0;e<m;e++){r=c[e];if(r.nodeType===8){continue}if(a===null){const u=srcBy$src.get(r);if(u!==undefined&&u.isCmd){a=r;d=s}}if(r.nodeName==="TEMPLATE"){show(t,r);o=false}}if(o){return[f,a,d]}const l=srcBy$src.get(a).id;t.sync.afterAnimations.add(type_animation(()=>renderTag($srcById.get(l),t.scope,s,t.sync),t.sync.local,0));return[f,null,""]}function if_getNextStr(e,t){return t!==switchCmdName?getNextStr(e,t):getNextStr(e,getNextStr(e,t))}')],
["/cmd/watch.js", import('data:text/javascript;text,let type_renderRes,p_target,srcBy$src,get$els,eval2,q_eval2,getProxy,kebabToCamelCase;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/eval2.js"),self.__i.get("/proxy.js"),self.__i.get("/str.js")]).then(arr=>{let m;m=arr[0];type_renderRes=m.type_renderRes;m=arr[1];p_target=m.p_target;m=arr[2];srcBy$src=m.srcBy$src;get$els=m.get$els;m=arr[3];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[4];getProxy=m.getProxy;m=arr[5];kebabToCamelCase=m.kebabToCamelCase;}));export default{render(r){return eval2(r,r.$src,true).then(e=>watch_render(r,r.scope,getName(r),e))},q_render(a,c,d){return q_eval2(a,c,d).then(r=>{const t=getName(a),n=c.length,s=new Array(n);for(let e=0;e<n;e++){if(!d.has(e)){s[e]=watch_render(a,c[e].scope,t,r[e])}}return s})}};function getName(e){const r=e.reqCmd.args[0];if(r!==undefined&&r!==""){return kebabToCamelCase(r)}}function watch_render(e,r,t,n){const s=srcBy$src.get(e.$src),a=s.cache;if(!a.current.has(e.str)){a.current.set(e.str,type_watchCur())}const c=a.current.get(e.str);if(e.sync.renderParam.isLinking){a.isInits.add(e.str);c.watch=n;return type_renderRes(true)}if(a.isInits.has(e.str)){if(n===c.watch){const d=s.descr.get$elsByStr;if(d===null){return type_renderRes(true)}const o=get$els(e.$src,s.descr.get$elsByStr,e.str);return type_renderRes(true,o[o.length-1])}e.sync.onreadies.add(()=>{c.watch=n})}else{e.sync.onreadies.add(()=>{a.isInits.add(e.str);c.watch=n})}if(t!==undefined){r[p_target][t]=getProxy(n)}return null}function type_watchCur(){return{watch:undefined}}')],
["/oset.js", import('data:text/javascript;text,let p_target;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/config.js")]).then(arr=>{let m;m=arr[0];p_target=m.p_target;}));export function oset(t,e,o){const n=t[e];if(typeof n!=="object"||n===null||typeof o!=="object"||o===null){t[e]=o;return true}if(Array.isArray(n)){return osetArray(t,e,o)}if(n instanceof Set){return osetSet(t,e,o)}if(n instanceof Map){return osetMap(t,e,o)}return osetObject(t,e,o)}function osetArray(t,e,o){if(!Array.isArray(o)){t[e]=o;return true}const n=t[e],r=n.length,f=o.length;for(let t=0;t<r&&t<f;t++){oset(n,t,o[t])}const c=r-f;if(c>0){n.splice(f,c);return true}for(let t=r;t<f;t++){n.push(o[t])}return true}function osetObject(t,e,o){if(typeof o!=="object"||o===null){t[e]=o;return true}const n=t[e];for(const r in n){if(!(r in o)){delete n[r]}}for(const r in o){oset(n,r,o[r])}return true}function osetSet(t,e,o){const n=t[e];if(o instanceof Set){for(const r of n){if(!o.has(r)){n.delete(r)}}for(const r of o){n.add(r)}}n.clear();return Reflect.set(t,e,o)}function osetMap(t,e,o){const n=t[e];if(o instanceof Map){for(const[r,f]of n){if(!o.has(r)){n.delete(r)}}for(const[r,f]of o){const c=n.get(r);if(typeof c==="object"){if(Array.isArray(c)){c.splice(0,c.length)}else if(c instanceof Set||c instanceof Map){c.clear()}else if(c!==null){for(const s of c){delete c[s]}}}n.set(r,f)}}n.clear();return Reflect.set(t,e,o)}export function del(t,e){const o=t[e];delete t[e];return o}export function ocopy(t){const e={};for(const o in t){e[o]=t[o]}return e}export function srcSetScope(t,e){const o=t.scopeCache,n=o[p_target],r=e[p_target],f=r!==undefined?r:e;for(const c in f){n[c]=f[c]}return o}')],
["/cmd/attr.js", import('data:text/javascript;text,let curRender,type_animation,type_cacheAttrSyncCurI,lazyRenderName,pushModName,replaceModName,srcBy$src,setAttribute,setAttributeValue,removeAttribute,getErr,eval2,q_eval2,setLoc;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/algo.js"),self.__i.get("/render/render.js"),self.__i.get("/cache.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/dom.js"),self.__i.get("/err.js"),self.__i.get("/eval2.js"),self.__i.get("/loc.js")]).then(arr=>{let m;m=arr[0];curRender=m.curRender;m=arr[1];type_animation=m.type_animation;m=arr[2];type_cacheAttrSyncCurI=m.type_cacheAttrSyncCurI;m=arr[3];lazyRenderName=m.lazyRenderName;pushModName=m.pushModName;replaceModName=m.replaceModName;m=arr[4];srcBy$src=m.srcBy$src;m=arr[5];setAttribute=m.setAttribute;setAttributeValue=m.setAttributeValue;removeAttribute=m.removeAttribute;m=arr[6];getErr=m.getErr;m=arr[7];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[8];setLoc=m.setLoc;}));export default{render(r){return eval2(r,r.$src,true).then(e=>{attr_render(r,r.$src,getName(r),e);return null})},q_render(s,a,i){return q_eval2(s,a,i).then(r=>{const t=a.length,n=getName(s);for(let e=0;e<t;e++){if(!i.has(e)){attr_render(s,a[e].$src,n,r[e])}}return null})}};function attr_render(e,r,t,n){const s=e.reqCmd.args[1],a=srcBy$src.get(r).cache,i=a.isInits.has(e.str);if(!i){a.isInits.add(e.str);setClick(e,r,t)}if(e.sync.renderParam.isLinking){a.current.set(e.str,r.getAttribute(t));return}const c=a.current.has(e.str)?a.current.get(e.str):r.getAttribute(t),o=a.attrSyncCur.get(t),u=o!==undefined&&o.syncId===e.sync.syncId?o.value:c;if(s&&s!==pushModName&&s!==replaceModName){if(u){const f=u.indexOf(s),l=s.length;if(f!==-1&&(u[f-1]===" "||f===0)&&(u[f+l]===" "||f+l===u.length)){n=n?u:u.substr(0,f)+u.substr(f+l+1)}else if(n){n=u[u.length-1]===" "?u+s:u+" "+s}else{n=u}}else if(n){n=s}else{n=u}}if(n===true){n=t}if(o!==undefined){o.syncId=e.sync.syncId;o.value=n}else{a.attrSyncCur.set(t,type_cacheAttrSyncCurI(e.sync.syncId,n))}const d=!!(n||n==="");if(t===lazyRenderName){e.sync.renderParam.isLazyRender=d}if(i&&c===n){setAttributeValue(r,t,n);return}e.sync.animations.add(type_animation(()=>{a.current.set(e.str,n);if(d){setAttribute(r,t,n);return}removeAttribute(r,t)},e.sync.local,srcBy$src.get(r).id))}function setClick(t,n,e){if(n.tagName!=="A"||e.toLowerCase()!=="href"||n.target){return}n.addEventListener("click",async e=>{if(!n.href||e.ctrlKey||e.metaKey){return}e.preventDefault();const r=t.reqCmd.args[1];if(r===pushModName){history.pushState(undefined,undefined,n.href)}else if(r===replaceModName){history.replaceState(undefined,undefined,n.href)}else{location.href=n.href;return}document.scrollingElement.scrollTop=0;setLoc(location.href)})}function getName(e){const r=e.reqCmd.args[0];if(r){return r}throw getErr(new Error(">>>mw attr:render:01: Need set attribute name"),e.$src,e)}')],
["/getlineno.js", import('data:text/javascript;text,export default new Promise(t=>{const n=location.pathname;fetch(n).then(e=>{if(!e.ok){console.error(`Mark lines error: request ${n} stat ${e.status}`);return}return e.text().then(e=>{createLineNo(n,e,document.documentElement);if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",t);return}t()})})});const lineNoAttrName="debug:line";function createLineNo(e,t,n){let i=1,o=n;const r=o.parentNode,l=[];do{if(o.nodeType===1){const a=t.indexOf("<"+o.localName);if(a===-1){return}i+=t.substr(0,a).split("\\n").length-1;o.setAttribute(lineNoAttrName,`${e}:${i}`);t=t.substr(a+1)}if(o.firstChild!==null){o=o.firstChild;continue}if(o.nodeName==="TEMPLATE"&&o.content.firstChild!==null){l.push(o);o=o.content.firstChild;continue}if(o.parentNode===r){break}if(o.nextSibling!==null){o=o.nextSibling;continue}do{o=o.parentNode;if(o.parentNode===r){o=null;break}if(o.parentNode.nodeType===11&&o.parentNode!==n){o=l.pop();if(o.parentNode===r){o=null;break}}if(o.nextSibling!==null){o=o.nextSibling;break}}while(true)}while(o!==null)}function getLineNo(e){return e.getAttribute(lineNoAttrName)}self.mw_createLineNo=createLineNo;self.mw_getLineNo=getLineNo;')],
["/cmd/foreach.js", import('data:text/javascript;text,let q_renderTag,type_req,type_isLast,type_q_arr,type_animation,type_renderRes,mw_doc,p_target,visibleScreenSize,defIdleCallbackOpt,foreachCmdName,renderPackSize,srcBy$src,$srcById,getNewId,type_asOneIdx,getSrcId,get$els,get$first,getNextStr,show,hide,is$visible,removeChild,q_cloneNode,type_q$i,setAsOneIdx,getIdx,setIdx,eval2,q_eval2,ocopy,kebabToCamelCase;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/render/render.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/dom.js"),self.__i.get("/eval2.js"),self.__i.get("/oset.js"),self.__i.get("/str.js")]).then(arr=>{let m;m=arr[0];q_renderTag=m.q_renderTag;type_req=m.type_req;type_isLast=m.type_isLast;type_q_arr=m.type_q_arr;type_animation=m.type_animation;type_renderRes=m.type_renderRes;m=arr[1];mw_doc=m.mw_doc;p_target=m.p_target;visibleScreenSize=m.visibleScreenSize;defIdleCallbackOpt=m.defIdleCallbackOpt;foreachCmdName=m.foreachCmdName;renderPackSize=m.renderPackSize;m=arr[2];srcBy$src=m.srcBy$src;$srcById=m.$srcById;getNewId=m.getNewId;type_asOneIdx=m.type_asOneIdx;getSrcId=m.getSrcId;get$els=m.get$els;get$first=m.get$first;getNextStr=m.getNextStr;m=arr[3];show=m.show;hide=m.hide;is$visible=m.is$visible;removeChild=m.removeChild;q_cloneNode=m.q_cloneNode;type_q$i=m.type_q$i;setAsOneIdx=m.setAsOneIdx;getIdx=m.getIdx;setIdx=m.setIdx;m=arr[4];eval2=m.eval2;q_eval2=m.q_eval2;m=arr[5];ocopy=m.ocopy;m=arr[6];kebabToCamelCase=m.kebabToCamelCase;}));export default{isAsOne:true,get$els(e,t,n,r){const s=foreach_get$els(foreach_get$first(e,t,n,r),t,n,r),l=s.length,i=[];for(let t=0;t<l;t++){const o=s[t].length;for(let e=0;e<o;e++){i.push(s[t][e])}}return i},get$first:foreach_get$first,render(t){return eval2(t,t.$src,true).then(e=>foreach_render(t,e))},q_render(s,l,i){return q_eval2(s,l,i).then(t=>{const n=l.length,r=new Array(n);for(let e=0;e<n;e++){if(!i.has(e)){r[e]=foreach_render(type_req(l[e].$src,s.str,s.expr,l[e].scope,s.sync),t[e])}}return r})}};function foreach_render(e,t){const n=srcBy$src.get(e.$src);if(n.asOneIdx===null){n.asOneIdx=type_asOneIdx()}if(!n.asOneIdx.has(e.str)){setAsOneIdx(n,e.str,getNewId());setIdx(n,e.str,0)}const r=getCtx(e,t),s=r.els.length,l=r.keys.length,i=r.els[s-1].$els,o=i[i.length-1];if(l===0){show$first(e,r,hide);e.sync.animations.add(type_animation(()=>{for(let e,t=s-1;t>0;t--){const n=r.els[t].$els;for(e=n.length-1;e>-1;e--){removeChild(n[e])}}},e.sync.local,0));return type_renderRes(true,null,o)}const c=type_renderRes(true,null,o);if(s===1){const d=r.els[0].$els;if(d[0].nodeName==="TEMPLATE"){const f=srcBy$src.get(d[0]);if(f!==undefined&&f.isCmd){show$first(e,r,show);for(let e=d.length-1;e>-1;e--){d[e]=d[e].content.firstChild}e.sync.afterAnimations.add(type_animation(()=>q_forRender(e,r,r.els,s<l?()=>q_add(e,r):null),e.sync.local,0));return c}}}if(s===l){const u=q_forRender(e,r,r.els,null);return u===undefined?c:u.then(()=>c)}if(s<l){const u=q_forRender(e,r,r.els,()=>q_add(e,r));return u===undefined?c:u.then(()=>c)}const a=new Set;for(let e=l;e<s;e++){const i=r.els[e].$els.length,g=r.els[e].$els;for(let e=0;e<i;e++){a.add(g[e])}}r.els.splice(l,s-l);e.sync.animations.add(type_animation(()=>{for(const e of a){removeChild(e)}},e.sync.local,0));e.sync.afterAnimations.add(type_animation(()=>q_forRender(e,r,r.els,null),e.sync.local,0));return c}function getCtx(e,t){const n=-1,r=foreach_get$first(e.$src,e.str,e.expr,n),s=foreach_get$els(r,e.str,e.expr,n),l=kebabToCamelCase(e.reqCmd.args[0]),i=kebabToCamelCase(e.reqCmd.args[1]);if(!t){return type_ctx([],[],s,l,i)}if(Array.isArray(t)){const a=t.length,o=new Array(a);for(let e=0;e<a;e++){o[e]=e}return type_ctx(o,t,s,l,i)}if(t instanceof Set||t instanceof Map){const o=new Array(t.size),c=new Array(t.size);let e=0;for(const[d,f]of t.entries()){o[e]=d;c[e++]=f}return type_ctx(o,c,s,l,i)}const o=[],c=[];for(const u in t){o.push(u);c.push(t[u])}return type_ctx(o,c,s,l,i)}function type_ctx(e,t,n,r,s){const l=n.length,i=new Array(l);for(let e=0;e<l;e++){i[e]=type_q$i(n[e],e)}return{keys:e,value:t,els:i,valName:r,keyName:s}}function show$first(t,e,n){const r=e.els[0].$els,s=r.length;for(let e=s-1;e>-1;e--){n(t,r[e])}}function foreach_get$first(t,n,e,r){for(let e=t;e!==null;e=e.previousSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}if(s.asOneIdx===null){return t}const l=getNextStr(s,n),i=s.asOneIdx.get(n);t=l!==""?get$first(e,s.descr.get$elsByStr,l):e;for(e=t.previousSibling;e!==null;e=e.previousSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}if(s.asOneIdx===null||s.asOneIdx.get(n)!==i){return t}if(l===""){t=e;continue}t=e=get$first(e,s.descr.get$elsByStr,l)}return t}return t}function foreach_get$els(t,n,e,r){for(let e=t;e!==null;e=e.nextSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}const l=getNextStr(s,n),i=s.asOneIdx.get(n),o=[];do{if(l!==""){const t=o[o.push(get$els(e,s.descr.get$elsByStr,l))-1];e=t[t.length-1]}else{o.push([e])}for(e=e.nextSibling;e!==null;e=e.nextSibling){const s=srcBy$src.get(e);if(s===undefined||!s.isCmd){continue}if(s.asOneIdx===null||s.asOneIdx.get(n)!==i){return o}break}}while(e!==null);return o}return[[t]]}function q_add(e,t){const n=t.els.length,r=t.keys.length,s=t.els[n-1],l=s.$els.length,i=n;let o=0,c=0;for(let e=0;e<l;e++){const d=s.$els[e],f=srcBy$src.get(d);if(c===0&&f!==undefined){c=f.id}o+=d.offsetHeight}const a=o!==0?Math.ceil(document.scrollingElement.clientHeight*visibleScreenSize/o):renderPackSize;if(is$visible(s.$els[l-1])){e.sync.animations.add(type_animation(()=>q_addInsert(e,t,getSrcId(e.sync.local,c),r,i,a),e.sync.local,0));return}e.sync.afterAnimations.add(type_animation(()=>q_addDeferred(e,t,c,r,i,a),e.sync.local,0))}function q_addDeferred(n,r,s,l,i,o){return new Promise(e=>{const t=requestIdleCallback(()=>{n.sync.idleCallback.delete(t);n.sync.animations.add(type_animation(()=>q_addInsert(n,r,getSrcId(n.sync.local,s),l,i,o),n.sync.local,s));e()},defIdleCallbackOpt);n.sync.idleCallback.set(t,e)})}function q_addInsert(t,n,r,s,l,i){const o=mw_doc.createDocumentFragment(),c=q_addI(t,r,o,s,l,i),e=c.length,a=get$last(t,$srcById.get(r),l-1);l+=e;if(l>=s){a.parentNode.insertBefore(o,a.nextSibling);t.sync.afterAnimations.add(type_animation(()=>q_forRenderI(t,n,c),t.sync.local,0));return}const d=c[e-1].$els;for(let e=d[d.length-1];e!==null;e=e.previousSibling){const f=srcBy$src.get(e);if(f===undefined){continue}r=f.id;a.parentNode.insertBefore(o,a.nextSibling);t.sync.afterAnimations.add(type_animation(()=>q_forRenderI(t,n,c).then(()=>q_addDeferred(t,n,r,s,l,i)),t.sync.local,0));return}throw new Error("foreach.js")}function get$last(t,n,r){const s=srcBy$src.get(n).asOneIdx.get(t.str),l=get$els(n,srcBy$src.get(n).descr.get$elsByStr,t.str);n=l[l.length-1];for(let e=n.nextSibling;e!==null;e=e.nextSibling){const i=srcBy$src.get(e);if(i===undefined||!i.isCmd){continue}if(i.asOneIdx===null||i.asOneIdx.get(t.str)!==s||getIdx(i,t.str)!==r){return n}const l=get$els(e,srcBy$src.get(e).descr.get$elsByStr,t.str);n=l[l.length-1]}return n}function q_addI(e,t,n,r,s,l){const i=s+l>r?r-s:l,o=q_cloneNode(e,t,s,i),c=o[0].$els.length;for(let e,t=0;t<i;t++){const a=o[t].$els;for(e=0;e<c;e++){n.appendChild(a[e])}}return o}function q_forRender(n,r,s,l){const i=[],o=[],t=s.length;if(!n.sync.renderParam.isLinking){for(let e=0;e<t;e++){const c=s[e],a=c.$els,d=a.length;let t=false;for(let e=0;e<d;e++){if(is$visible(a[e])){t=true;break}}if(t){i.push(c)}else{o.push(c)}}}else{for(let e=0;e<t;e++){i.push(s[e])}}if(i.length!==0){return q_forRenderI(n,r,i).then(()=>{if(o.length!==0){n.sync.afterAnimations.add(type_animation(()=>q_forRender(n,r,o,l),n.sync.local,0));return}if(l!==null){l()}})}return new Promise(e=>{const t=requestIdleCallback(()=>{n.sync.idleCallback.delete(t);q_forRenderI(n,r,o.splice(0,renderPackSize)).then(()=>{if(o.length!==0){return q_forRender(n,r,o,l).then(e)}if(l!==null){l()}e()})});n.sync.idleCallback.set(t,e)},defIdleCallbackOpt)}function q_forRenderI(r,s,l){const i=l.length,o=new Array(i);for(let e,t,n=0;n<i;n++){const c=l[n],a=c.$els,d=a.length;e=a[0];if(!srcBy$src.has(e)){t=1;do{e=a[t++]}while(!srcBy$src.has(e))}const f=ocopy(r.scope),u=c.idx;if(s.valName){f[s.valName]=s.value[u]}if(s.keyName){f[s.keyName]=s.keys[u]}o[n]=type_q_arr(e,f)}return q_renderTag(o,r.str,type_isLast(),r.sync)}')],
["/cmd/filling.js", import('data:text/javascript;text,let eval2,showLoading;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/eval2.js"),self.__i.get("/loading.js")]).then(arr=>{let m;m=arr[0];eval2=m.eval2;m=arr[1];showLoading=m.showLoading;}));export default{render(r){return showLoading(r.$src,()=>eval2(r,r.$src,true),r.reqCmd.args[0],r.reqCmd.args[1]).then(()=>null)}};')]]);self.__imports=Promise.all(self.__i.values()).then(()=>Promise.all(self.__p)).then(()=>{for(const u of self.__i.keys()) URL.revokeObjectURL(u)})
let syncInRender,render,setDelay,renderLoop,addAnimation,checkScrollAnimations,globVarName,locVarName,viewVarName,$srcById,isAnimationVisible,getLoc,setLoc,getProxy,getView,setView;self.__p.add(import.meta.__imports=Promise.all([self.__i.get("/addons.js"),self.__i.get("/api.js"),self.__i.get("/render/algo.js"),self.__i.get("/config.js"),self.__i.get("/descr.js"),self.__i.get("/dom.js"),self.__i.get("/loc.js"),self.__i.get("/proxy.js"),self.__i.get("/view.js")]).then(arr=>{let m;m=arr[2];syncInRender=m.syncInRender;render=m.render;setDelay=m.setDelay;renderLoop=m.renderLoop;addAnimation=m.addAnimation;checkScrollAnimations=m.checkScrollAnimations;m=arr[3];globVarName=m.globVarName;locVarName=m.locVarName;viewVarName=m.viewVarName;m=arr[4];$srcById=m.$srcById;m=arr[5];isAnimationVisible=m.isAnimationVisible;m=arr[6];getLoc=m.getLoc;setLoc=m.setLoc;m=arr[7];getProxy=m.getProxy;m=arr[8];getView=m.getView;setView=m.setView;}));self.__imports.then(()=>{delete self.__i;delete self.__p;delete self.__imports;setTimeout(()=>{(()=>{const e=import.meta.url;self.mw_debugLevel=e.indexOf("debug=1")!==-1?1:e.indexOf("debug=2")!==-1?2:0;self[globVarName]=getProxy(self[globVarName]||{});self[locVarName]=getProxy(getLoc(location.href));self[viewVarName]=getProxy(getView(document));if(e.indexOf("load=skip")!==-1){if(self.mw_debugLevel!==0){import(e.replace(/([^\/]+?\.js)/,"getlineno.js"))}return}const t=()=>{if(self.mw_debugLevel===0){render(undefined,undefined,undefined,e.indexOf("linking=1")!==-1);return}import(e.replace(/([^\/]+?\.js)/,"getlineno.js")).then(e=>e.default).then(()=>render(undefined,undefined,undefined,e.indexOf("linking=1")!==-1))};if(e.indexOf("load=onload")===-1){if(document.readyState==="interactive"||document.readyState==="complete"){t();return}document.addEventListener("DOMContentLoaded",t,{once:true});return}if(document.readyState==="complete"){t();return}self.addEventListener("load",t,{once:true})})();const view=self[viewVarName],$scroll=document.scrollingElement,evtOpt={passive:true};if($scroll.clientWidth===980){setTimeout(()=>setView(document),500)}self.addEventListener("scroll",()=>{checkScrollAnimations();setDelay(100,()=>{view.scrollTop=$scroll.scrollTop;view.scrollLeft=$scroll.scrollLeft})},evtOpt);self.addEventListener("resize",()=>{setDelay(100,()=>setView(document))},evtOpt);self.addEventListener("popstate",()=>{setLoc(location.href)},evtOpt);}, 0)})
!function(){"use strict";const e=Symbol(),t=Symbol(),n={timeout:1e3},r="view",s={bubbles:!0,cancelable:!0,composed:!1},o="lazyrender",i=".",c=i.length,l="_did.",a="_hide",d="_aidx.",u="_idx.",f="is_filling",y="push",m="replace",v="foreach",h={headers:{"x-requested-with":"XMLHttpRequest"}},p="html",g="html.t",w="if",b="elseif",I="else",$="switch",x="case",B="default",C="inc",S="on",A="prevent",N="stop",_="self",P="exact";function q(){return++my.env.idCurVal}function E(e,t){if(my.env.srcById.has(t))return t;for(let n=e.get(t);void 0!==n&&0!==n.newSrcId;n=e.get(t))t=n.newSrcId;return t}function O(e,t,n){const r=my.env.srcBy$src.get(e).descr.attr.keys();let s=r.next();if(""!==n)for(;!s.done&&s.value!==n;s=r.next());for(;!s.done;){const n=s.value,o=t.get(n);if(void 0!==o)return my.env.reqCmd.get(n).cmd.get$els(e,n,o.expr,o.pos);s=r.next()}return[e]}function L(e,t,n){const r=my.env.srcBy$src.get(e).descr.attr.keys();let s=r.next();if(""!==n)for(;!s.done&&s.value!==n;s=r.next());for(;!s.done;){s.value;const o=t.get(n);if(void 0!==o)return my.env.reqCmd.get(n).cmd.get$first(e,n,o.expr,o.pos);s=r.next()}return e}function V(e,t){const n=e.descr.attr.keys();for(let e=n.next();!e.done;e=n.next())if(e.value===t)return e=n.next(),e.done?"":e.value;return""}function M(e,t){const n=new Map,r=z(e.entries(),t,!0);for(let e=r.next();!e.done;e=r.next())n.set(e.value[0],e.value[1]);return n}function z(e,t,n){if(""===t)return e;if(n){for(let n=e.next();!n.done;n=e.next())if(n.value[0]===t)return e;return e}for(let n=e.next();!n.done;n=e.next())if(n.value===t)return e;return e}function T(e,t,n,r,s){return{reqCmd:my.env.reqCmd.get(t),$src:e,str:t,expr:n,scope:r,sync:s}}function R(){return new Set}function j(e,t){return{$src:e,scope:t}}function H(e,t,n){for(const e of t.values())e.animationsCount++;return{handler:()=>{for(const e of t.values())e.animationsCount>0&&e.animationsCount--;return e()},local:t,viewedSrcId:n}}function D(e,t=null,n=null,r=null,s=""){return{isLast:e,$src:t,$last:n,$attr:r,attrStr:s}}function F(e,t,n,r){return{sId:e,scope:t,str:n,isLinking:r,isLazyRender:!1,srcIds:new Set,$els:null}}function K(e,t){let n;const r=new Promise((e=>n=e));return{syncId:e,renderParam:t,local:new Map,beforeAnimations:new Set,animations:new Set,afterAnimations:new Set,scrollAnimations:new Set,onreadies:new Set,idleCallback:new Map,animationFrame:new Map,stat:0,promise:r,resolve:n}}function U(){return{isInits:new Set,current:W(),value:G(),attrSyncCur:new Map}}function W(){return new Map}function G(){return new Map}function X(e,t,n,r,s,o){return{render:e,q_render:t,get$first:n,get$els:r,isCustomHtml:s,isAsOne:o}}function J(e,t){my.env.cmd.set(e,t)}function Q(e){const t=my.env.reqCmd.get(e);if(null!=t)return!0;const n=e.indexOf(i),r=-1===n?e:e.substr(0,n),s=my.env.cmd.get(r);return void 0===s?(my.env.reqCmd.set(e,null),!1):(my.env.reqCmd.set(e,function(e,t,n){return{cmdName:e,cmd:t,args:n}}(r,s,-1!==n?e.substr(n+c).split(i):[])),!0)}FormData.prototype[e]=null,Document.prototype[e]=null,DocumentFragment.prototype[e]=null,HTMLElement.prototype[e]=null,Text.prototype[e]=null,Promise.prototype[e]=null,Date.prototype[e]=null,Request.prototype[e]=null,Response.prototype[e]=null,self._testVars=function(){const e=new Set(Array.from(my.env.varIdByVar.values()));for(const[t,n]of my.env.srcIdsByVarId)if(e.has(t))for(const e of n)my.env.$srcById.has(e)||console.log(11111,t,e);else{let r;for(const s of e){const e=my.env.varIdByVarIdByProp.get(s);if(void 0!==e){for(const s of e.values())if(s===t){for(const e of n)my.env.$srcById.has(e)||console.log(111222,t,e);r=!0;break}if(r)break}}r||console.log(0,t,n)}for(const e of my.env.varIdByVar.keys()){const t=my.env.srcIdsByVarId.get(e);if(!t)continue;for(const e of t)my.env.$srcById.has(e)||console.log(1,e);const n=my.env.varIdByVarIdByProp.get(e);if(void 0!==n)for(const e of n.values()){const t=my.env.srcIdsByVarId.get(e);if(t)for(const e of t)my.env.$srcById.has(e)||console.log(2,e)}}};const Y=new Set(["symbol"]),Z=new Set(["function"]),ee=new Set(["boolean","number","string","undefined"]);let te=null;function ne(e){te=e}const re={value:1};function se(t){if("object"!=typeof t||null===t)return t;{const n=t[e];if(null===n||void 0!==n)return t}if(Array.isArray(t)){const e=t.length;for(let n=0;n<e;n++)t[n]=se(t[n]);return t.push=new Proxy(t.push,ie),t.unshift=new Proxy(t.unshift,ie),t.shift=new Proxy(t.shift,ie),t.pop=new Proxy(t.pop,ie),t.splice=new Proxy(t.splice,ie),t.sort=new Proxy(t.sort,ie),t.reverse=new Proxy(t.reverse,ie),new Proxy(t,oe)}if(t instanceof Set){const e=new Set(t);t.clear();for(const n of e)t.add(se(n));return t.entries=new Proxy(t.entries,ce(!0)),t.values=new Proxy(t.values,ce(!1)),t.keys=new Proxy(t.keys,ce(!1)),t.add=new Proxy(t.add,ae),t.has=new Proxy(t.has,fe),t.delete=new Proxy(t.delete,ue(!0)),t.clear=new Proxy(t.clear,ye),new Proxy(t,oe)}if(t instanceof Map){const e=new Map(t);t.clear();for(const[n,r]of e)t.set(se(n),se(r));return t.entries=new Proxy(t.entries,ce(!0)),t.values=new Proxy(t.values,ce(!1)),t.keys=new Proxy(t.keys,ce(!1)),t.get=new Proxy(t.get,le),t.set=new Proxy(t.set,de),t.delete=new Proxy(t.delete,ue(!1)),t.has=new Proxy(t.has,fe),t.clear=new Proxy(t.clear,ye),new Proxy(t,oe)}for(const e in t){const n=t[e];if("object"!=typeof n||null===n||n===t)continue;const r=Object.getOwnPropertyDescriptor(t,e);void 0!==r&&r.writable&&(t[e]=se(n))}return new Proxy(t,oe)}const oe={get(t,n){if(0===re.value&&(re.value=1),n===e)return t;const r=t[n],s=typeof r;return null===te||Y.has(typeof n)||Z.has(s)?n!==Symbol.iterator?r:t instanceof Map?t.entries:t.values:(ve(t,n,me(r),te),r)},set(e,t,n,r){const s=me(n);if(t in e){const r=me(e[t]);return s===r||(e[t]=se(n),he(e,t,s,r)),!0}return e[t]=se(n),he(e,t,s,void 0),!0},deleteProperty(e,t,n){if(t in e){const n=me(e[t]);return delete e[t],he(e,t,void 0,n),!0}return!0}},ie={apply(t,n,r){const s=n[e];if(void 0===s)return console.warn(1111111111,t,n,r),t.apply(n,r);for(let e=r.length-1;e>-1;e--)r[e]=se(r[e]);const o=s.length,i=t.apply(s,r);return he(s,"length",s.length,o),i}};function ce(t){const n=function(t){return{apply(n,r,s){const o=n.apply(r,s);if(null!==!te||o.done)return o;const i=r[e][e];if(t){const[e,t]=o.value;return ve(i,me(e),me(t),te),o}const c=me(o.value);return ve(i,c,c,te),o}}}(t);return{apply(t,r,s){const o=r[e];if(void 0===o)return t.apply(r,s);const i=t.apply(o,s);return null!==te&&(i.next=new Proxy(i.next,n),i[e]=r),i}}}const le={apply(t,n,r){const s=n[e];if(void 0===s)return t.apply(n,r);const o=t.apply(s,r);return null!==te&&ve(s,me(r[0]),me(o),te),o}},ae={apply(t,n,r){const s=n[e];if(void 0===s)return console.warn(8888,t,n,r),t.apply(n,r);const o=r[0],i=me(o);return s.has(i)||(t.apply(s,[se(o)]),he(s,i,i,void 0)),n}},de={apply(t,n,r){const s=n[e];if(void 0===s)return console.warn(8888,t,n,r),t.apply(n,r);const[o,i]=r,c=me(i);if(s.has(o)){const e=me(s.get(o));return c===e||(t.apply(s,[o,se(i)]),he(s,me(o),c,e)),n}const l=se(o);return t.apply(s,[l,se(i)]),he(s,me(o),c,void 0),n}};function ue(t){return{apply(n,r,s){const o=r[e];if(void 0===o)return console.warn(8888,n,r,s),n.apply(r,s);const i=s[0];return!(!o.has(i)||!n.apply(o,s))&&(he(o,me(i),void 0,t?i:me(o.get(i))),!0)}}}const fe={apply:(t,n,r)=>t.apply(n[e]||n,r)},ye={apply(t,n,r){const s=n[e];if(void 0===s)return console.warn(8888,t,n,r),t.apply(n,r);const o=s.size;t.apply(s,r),he(s,"size",0,o)}};function me(t){return"object"==typeof t&&null!==t&&t[e]||t}function ve(e,t,n,r){const s=my.env.varIdByVar.get(e),o=my.env.srcBy$src.get(r),i=o.id,c=o.descr;if(ee.has(typeof n)||null===n){if(s){const e=my.env.srcIdsByVarId.get(s);void 0!==e?e.add(i):my.env.srcIdsByVarId.set(s,new Set([i])),c.varIds.add(s);const n=my.env.varIdByVarIdByProp.get(s);if(void 0!==n){const e=n.get(t);if(void 0!==e){c.varIds.add(e);const t=my.env.srcIdsByVarId.get(e);return void 0!==t?void t.add(i):void my.env.srcIdsByVarId.set(e,new Set([i]))}const r=q();return n.set(t,r),my.env.srcIdsByVarId.set(r,new Set([i])),void c.varIds.add(r)}const r=q();return my.env.varIdByVarIdByProp.set(s,new Map([[t,r]])),my.env.srcIdsByVarId.set(r,new Set([i])),void c.varIds.add(r)}const n=q();my.env.varIdByVar.set(e,n),my.env.varById.set(n,e),my.env.srcIdsByVarId.set(n,new Set([i])),c.varIds.add(n);const r=q();return my.env.varIdByVarIdByProp.set(n,new Map([[t,r]])),my.env.srcIdsByVarId.set(r,new Set([i])),void c.varIds.add(r)}if(s){const e=my.env.srcIdsByVarId.get(s);void 0!==e?e.add(i):my.env.srcIdsByVarId.set(s,new Set([i])),c.varIds.add(s)}else{const t=q();my.env.varIdByVar.set(e,t),my.env.varById.set(t,e),my.env.srcIdsByVarId.set(t,new Set([i])),c.varIds.add(t)}const l=my.env.varIdByVar.get(n);if(l){const e=my.env.srcIdsByVarId.get(l);return void 0!==e?e.add(i):my.env.srcIdsByVarId.set(l,new Set([i])),void c.varIds.add(l)}const a=q();my.env.varIdByVar.set(n,a),my.env.varById.set(a,n),my.env.srcIdsByVarId.set(a,new Set([i])),c.varIds.add(a)}function he(e,t,r,s){const o=my.env.varIdByVar.get(e);if(!o)return;const i=my.env.varIdByVarIdByProp.get(o),c=void 0!==i&&i.get(t)||0,l=0!==c&&my.env.varIdByVar.get(s)||0;2===my.envdebugLevel&&console.info("my.proxy => setVar","\n\tname=>",t,"\n\tvalue=>",r,"\n\toldVal=>",s,"\n\ttId=>",o,"\n\ttarget=>",e,"\n\toldId=>",l,"\n\toldScalarId=>",c),null!==te&&ve(e,t,r,te),c&&!ee.has(typeof r)&&null!==r&&(i.delete(t),0===i.size&&my.env.varIdByVarIdByProp.delete(o));const a=my.env.srcIdsByVarId.get(l||o);if(void 0===a)return;const d=new Set(a),u=new Set,f=my.env.srcBy$src;for(const e of a){const t=my.env.$srcById.get(e);if(void 0===t||u.has(e))continue;const n=f.get(t).descr;if(null===n.asOnes){u.add(e),pe(u,t);continue}const r=O(t,n.get$elsByStr,"");for(let e=r.length-1;e>-1;e--){const t=r[e],n=f.get(t);void 0!==n&&(u.add(n.id),pe(u,t))}}if(0!==l){const r=new Set;for(const n of u){my.env.srcById.get(n).cache.value=G(),ge(e,t,s,n,l,r)}0!==r.size&&requestIdleCallback((()=>{for(const e of my.env.descrById.values())if(null!==e.varIds)for(const t of r)e.varIds.delete(t)}),n)}else for(const e of u){my.env.srcById.get(e).cache.value=G()}!function(e){for(const t of e)my.env.$srcById.has(t)&&ht.add(F(t,null,"",!1));St(pt,0)}(d)}function pe(e,t){const n=my.env.srcBy$src,r=t.parentNode;do{const s=n.get(t);if(void 0!==s&&s.isCmd&&e.add(s.id),null===t.firstChild){if(t.parentNode===r)break;if(null===t.nextSibling)for(;;){if((t=t.parentNode).parentNode===r){t=null;break}if(null!==t.nextSibling){t=t.nextSibling;break}}else t=t.nextSibling}else t=t.firstChild}while(null!==t)}function ge(e,t,n,r,s,o){if(0===s)if(ee.has(typeof n)||null===n){const n=my.env.varIdByVarIdByProp.get(my.env.varIdByVar.get(e));void 0!==n&&void 0===(s=n.get(t))&&(s=0)}else void 0===(s=my.env.varIdByVar.get(n))&&(s=0);if(0!==s){const i=my.env.srcIdsByVarId.get(s);if(void 0===i||!i.has(r))return void we(s,n,e,t,o);i.delete(r),0===i.size&&we(s,n,e,t,o)}if(Array.isArray(n)){const e=n.length;for(let t=0;t<e;t++)ge(n,t,me(n[t]),r,0,o)}else if("object"==typeof n&&null!==n)for(const e in n)ge(n,e,me(n[e]),r,0,o)}function we(e,t,n,r,s){if(s.add(e),my.env.srcIdsByVarId.delete(e),ee.has(typeof t)||null===t){const t=my.env.varIdByVarIdByProp.get(e=my.env.varIdByVar.get(n));if(void 0===t)return;return t.delete(r),void(0===t.size&&my.env.varIdByVarIdByProp.delete(e))}my.env.varIdByVar.delete(t),my.env.varById.delete(e);const o=my.env.varIdByVarIdByProp.get(e);if(void 0!==o){my.env.varIdByVarIdByProp.delete(e);for(const e of o.values())my.env.srcIdsByVarId.delete(e)}}function be(e,t,n,r,s,o,i){return{id:e,descr:t,isCmd:n,isHide:r,asOneIdx:s,idx:o,save:null,cache:i,scopeCache:se({}),isMounted:!1}}function Ie(e,t,n,r){return{id:e,sId:t,attr:n,varIds:r,srcIds:new Set([t]),isCustomHtml:!1,asOnes:null,get$elsByStr:null}}function xe(e,t){return{expr:e,pos:t}}function Be(e){return new Map(e)}function Ce(e){return new Map(e)}function Se(e){if(void 0===e)return new Map;const t=new Map;for(const[n,r]of e)t.set(n,ke(r));return t}function ke(e){return new Map(e)}function Ae(e,t,n,r){const s=q(),o=null!==e.getAttribute(a);if(void 0===t){const n=null!==(t=Ne(e,s)).attr?be(s,t,!0,o,null,null,U()):be(s,t,!1,o,null,null,null);return my.env.$srcById.set(s,e),my.env.srcById.set(s,n),my.env.srcBy$src.set(e,n),n}t.srcIds.add(s);const i=null!==t.attr?be(s,t,!0,o,n,r,U()):be(s,t,!1,o,null,null,null);return my.env.$srcById.set(s,e),my.env.srcById.set(s,i),my.env.srcBy$src.set(e,i),i.isCmd,i}function Ne(e,t){const n=q(),r=function(e){const t=new Map,n=e.attributes,r=n.length;for(let e=0;e<r;e++){const r=n[e];Q(r.name)&&t.set(r.name,r.value)}return t}(e);if(0===r.size){const e=Ie(n,t,null,null);return my.env.descrById.set(n,e),e}const s=Ie(n,t,r,new Set);let o=0;for(const[e,t]of r){const n=my.env.reqCmd.get(e);null!==n.cmd.get$els&&(null===s.get$elsByStr&&(s.get$elsByStr=new Map),s.get$elsByStr.set(e,xe(t,o))),o++,!0===n.cmd.isCustomHtml&&!1===s.isCustomHtml&&(s.isCustomHtml=!0),!0===n.cmd.isAsOne&&(null===s.asOnes&&(s.asOnes=new Set),s.asOnes.add(e))}return my.env.descrById.set(n,s),s}function _e(e,t,n,r,s,o,i){let c=">>>mw error";if(void 0!==my.getLineNo){const e=my.getLineNo(t);e&&(c+=` in ${e}`)}c+="\n"+e.toString();const l=[];return l.push("\n$src =>",t,"\nsId =>",my.env.srcBy$src.get(t)?.id),n&&(l.push("\nreq =>",n),l.push("\n"+n.str+" =>",n.expr)),r&&l.push("\nscope =>",r),0!==my.debugLevel&&console.info(c,...l),s?new Error(e,s,o,i):e}const Pe=new Map;async function qe(e,t,n="",r){const s=my.env.srcBy$src.get(e).id,o=Pe.get(s);if(await t())return void(void 0!==o?function(e,t,n){if(""!==t){const e=n.get(t)-1;n.set(t,e)}const r=n.get("")-1;if(n.set("",r),r>0)return;for(const[e,t]of Pe){if(t!==n)continue;Pe.delete(e);const r=my.env.$srcById.get(e);if(void 0!==r)for(const e of n.keys())Ee(r,e,!1,n)}}(0,n,o):Ee(e,n,!1,o));const i=void 0===o?function(e){const t=new Map([["",0]]);return Pe.set(e,t),t}(s):o;Ee(e,"",!0,i),""!==n&&(void 0!==r&&""!==r||(r=-1),r<0?Ee(e,n,!0,i):setTimeout((async()=>{Xe(e)||await t()||Ee(e,n,!0,i)}),r))}function Ee(e,t,n,r){const s=""===t?f:"is_filling-"+t;if(!n)return e.removeAttribute(s,""),void(my.env.srcBy$src.get(e).isHide&&e.content.firstChild.removeAttribute(s,""));if(""===t){const e=r.get("");r.set("",e+1)}else{const e=r.get(t);void 0===e?r.set(t,1):r.set(t,e+1)}e.setAttribute(s,""),my.env.srcBy$src.get(e).isHide&&e.content.firstChild.setAttribute(s,"")}function Oe(e,t){return{$els:e,idx:t}}function Le(e,t,n){return{cmd:e,str:t,expr:n}}function Ve(e,t){const n=e.parentNode,r=[],s=new Map;do{if(null===e.firstChild)if("TEMPLATE"!==e.nodeName||null===e.getAttribute(a)){if((e=Me(e,s,t)).parentNode===n)break;if(null===e.nextSibling)for(;;){if(11===(e=e.parentNode).nodeType&&(e=r.pop()),(e=Me(e,s,t)).parentNode===n){e=null;break}if(null!==e.nextSibling){e=e.nextSibling;break}}else e=e.nextSibling}else r.push(e),e=e.content.firstChild;else e=e.firstChild}while(null!==e)}function Me(e,t,n){if(1!==e.nodeType)return 3===e.nodeType?function(e){const t=e.textContent;if(-1===t.indexOf("${")||"SCRIPT"===e.parentNode.nodeName)return e;if(null===e.nextSibling&&null===e.previousSibling)return e.parentNode.setAttribute(g,"`"+t+"`"),e;const n=my.document.createElement("span");return n.setAttribute(g,"`"+t+"`"),e.parentNode.replaceChild(n,e),Ae(n),n}(e):e;if(!n)return Ae(e),e;const r=function(e,t){const n=e.getAttribute(l);if(null===n)return Ae(e);const r=t.get(n);if(void 0!==r)return Ae(e,r,null,null);const s=Ae(e,Ne(e,0),null,null);return s.descr.sId=s.id,t.set(n,s.descr),s}(e,t);if(!r.isCmd)return e;for(const n of r.descr.attr.keys()){const s=e.getAttribute(d+n),o=e.getAttribute(u+n);if(null!==s){const e=t.get(s);if(void 0===e){const e=q();t.set(s,e),null===r.asOneIdx?r.asOneIdx=Be([[n,e]]):r.asOneIdx.set(n,e)}else null===r.asOneIdx?r.asOneIdx=Be([[n,e]]):r.asOneIdx.set(n,e)}if(null!==o){if(null===r.idx){r.idx=Ce([[isNaN(o)?o:Number(o)]]);continue}r.idx.set(n,isNaN(o)?o:Number(o))}}return e}function ze(e,t){e.parentNode.removeChild(e),e.dispatchEvent(new CustomEvent("remove",s));const r=new Map,o=my.env.srcBy$src;let i=e;const c=[];do{const e=o.get(i);if(void 0!==e){if(Te(i,e,r),e.descr.isCustomHtml)continue;if(null!==i.firstChild){i=i.firstChild;continue}if(e.isHide&&e.isCmd&&null!==i.content.firstChild.firstChild){c.push(i),i=i.content.firstChild.firstChild;continue}}if(null===i.parentNode)break;if(null===i.nextSibling)for(;;){if(i=i.parentNode,11===i.nodeType&&(i=c.pop()),null===i.parentNode){i=null;break}if(null!==i.nextSibling){i=i.nextSibling;break}}else i=i.nextSibling}while(null!==i);0!==r.size&&requestIdleCallback((()=>{!function(e){const t=my.env.varIdByVar,n=my.env.varById,r=my.env.varIdByVarIdByProp,s=my.env.srcIdsByVarId,o=my.env.descrById,i=new Set,c=new Set,l=new Set;for(const[t,n]of e){const e=o.get(t);if(void 0!==e){for(const t of e.varIds)i.add(t);for(const e of n)c.add(e)}}for(const e of i){const o=s.get(e);if(!o)continue;const i=r.get(e);for(const e of c)if(o.has(e)&&o.delete(e),void 0!==i)for(const[t,n]of i){const r=s.get(n);void 0!==r&&r.has(e)&&(o.delete(e),r.delete(e),0===r.size&&(l.add(n),s.delete(n),i.delete(t)))}0===o.size?(l.add(e),s.delete(e),t.delete(n.get(e)),n.delete(e),void 0!==i&&(r.delete(e),0!==i.size&&console.warn("должно быть пусто",e,i))):void 0!==i&&0===i.size&&r.delete(e)}for(const[t,n]of e){const e=o.get(t);if(void 0!==e){for(const t of l)e.varIds.delete(t);for(const t of n)e.srcIds.delete(t),e.sId===t&&console.warn(22222222);0===e.srcIds.size&&o.delete(t)}}}(r)}),n)}function Te(e,t,n){const r=t.id,s=t.descr,o=s.id;if(my.env.$srcById.delete(r),my.env.srcById.delete(r),my.env.srcBy$src.delete(e),!t.isCmd)return s.srcIds.delete(r),void(0===s.srcIds.size&&my.env.descrById.delete(o));Pe.delete(r),s.srcIds.delete(r),s.sId===r&&(s.sId=s.srcIds.values().next().value);const i=n.get(o);i?i.add(r):n.set(o,new Set([r]))}function Re(e,t,n,r){const s=new Array(n),o=e.parentNode,i=[];for(let e=0;e<n;e++)s[e]=[];do{if(null===e.firstChild)if("TEMPLATE"!==e.nodeName||null===e.getAttribute(a)){if(e.parentNode===o)break;if(null===e.nextSibling)for(;;){if(11!==(e=e.parentNode).nodeType)for(let e=0;e<n;e++)t[e]=t[e].parentNode;else{e=i.pop();for(let e=0;e<n;e++)t[e]=s[e].pop()}if(e.parentNode===o){e=null;break}if(null!==e.nextSibling){je(e=e.nextSibling,!0,t,n,r,2,null);break}}else je(e=e.nextSibling,!0,t,n,r,2,null)}else{i.push(e);for(let e=0;e<n;e++)s[e].push(t[e]);je(e=e.content.firstChild,!1,t,n,r,1,null)}else je(e=e.firstChild,!0,t,n,r,1,null)}while(null!==e)}function je(e,t,n,r,s,o,i){const c=my.env.srcBy$src.get(e);if(void 0===c){if(2===o){for(let t=0;t<r;t++)n[t]=n[t].parentNode.appendChild(e.cloneNode());return}if(1===o){if(t){for(let t=0;t<r;t++)n[t]=n[t].appendChild(e.cloneNode());return}for(let t=0;t<r;t++)n[t]=n[t].content.appendChild(e.cloneNode());return}for(let t=0;t<r;t++)n[t]=e.cloneNode();return}const l=c.descr;c.idx;const a=c.save,d=c.asOneIdx;if(2!==o)if(1!==o){for(let t=0;t<r;t++)Ae(n[t]=e.cloneNode(),l,Be(d),Ce(c.idx)).save=a;null!==d&&He(n,r,s,i)}else{if(t){for(let t=0;t<r;t++)Ae(n[t]=n[t].appendChild(e.cloneNode()),l,Be(d),Ce(c.idx)).save=a;return void(null!==d&&He(n,r,s,d))}for(let t=0;t<r;t++)Ae(n[t]=n[t].content.appendChild(e.cloneNode()),l,Be(d),Ce(c.idx)).save=a;null!==d&&He(n,r,s,d)}else{for(let t=0;t<r;t++)Ae(n[t]=n[t].parentNode.appendChild(e.cloneNode()),l,Be(d),Ce(c.idx)).save=a;null!==d&&He(n,r,s,d)}}function He(e,t,n,r){const s=my.env.srcBy$src;for(let o=0;o<t;o++){const t=e[o],i=s.get(t);for(const e of r.keys()){const t=i.asOneIdx.get(e),r=n[o].get(t);if(void 0!==r){Ze(i,e,r);continue}const s=q();n[o].set(t,s),Ze(i,e,s)}}}function De(e,t,n){Fe(e,t,n),e.setAttribute(t,n)}function Fe(e,t,n){switch(t){case"value":if(e===document.activeElement&&"function"==typeof e.setSelectionRange){const t=e.selectionStart;e.value=n,"text"!==e.type&&"search"!==e.type||e.setSelectionRange(t,t)}else e.value=n;break;case"checked":e.checked=!!n}}function Ke(e,t){const n=my.env.srcBy$src.get(t);(void 0!==n?n.isHide:"TEMPLATE"===t.nodeName&&null!==t.getAttribute(a))&&e.sync.animations.add(H((()=>function(e,t,n){const r=t.content.firstChild;if(!r||null!==r.nextSibling)throw _e(new Error(">>>mw show:01: Template element invalid structure on show function. <template>.content.childNodes.length must be only one element."),t);void 0!==n&&Ge(t,n,r,!1);e.$src===t&&(e.$src=r);t.parentNode.replaceChild(r,t)}(e,t,n)),e.sync.local,0))}function Ue(e,t){const n=my.env.srcBy$src.get(t);void 0===n?(1===t.nodeType?"TEMPLATE"===t.nodeName&&null!==t.getAttribute(a):8!==t.nodeType)&&e.sync.animations.add(H((()=>We(t,n)),e.sync.local,0)):n.isHide||e.sync.animations.add(H((()=>We(t,n)),e.sync.local,n.id))}function We(e,t){let n=e;const r=my.env.srcBy$src,s=my.document.createElement("template"),o=n.parentNode,i=[];s.setAttribute(a,"");do{const e=r.get(n);if(void 0!==e){const t=e.cache;if(null!==t&&(t.value=G(),t.current=W()),null!==n.firstChild){n=n.firstChild;continue}if(e.isHide&&null!==n.content.firstChild.firstChild){i.push(n),n=n.content.firstChild.firstChild;continue}}if(n.parentNode===o)break;if(null===n.nextSibling)for(;;){if(n=n.parentNode,11===n.nodeType&&(n=i.pop()),n.parentNode===o){n=null;break}if(null!==n.nextSibling){n=n.nextSibling;break}}else n=n.nextSibling}while(null!==n);void 0!==t&&Ge(e,t,s,!0),e.parentNode.replaceChild(s,e),s.content.appendChild(e)}function Ge(e,n,r,s){if(n.isHide=s,my.env.$srcById.set(n.id,r),my.env.srcById.set(n.id,n),my.env.srcBy$src.set(r,n),r[t]=e[t],0===my.debugLevel)return;if(!s)return;const o=e.attributes,i=o.length;for(let e=0;e<i;e++){const t=o[e];De(r,t.name,t.value)}}function Xe(e){do{if(e===my.rootElement)return!1;e=e.parentNode}while(null!==e);return!0}function Je(e){return 0===e.viewedSrcId||Ye(my.env.$srcById.get(E(e.local,e.viewedSrcId)))}const Qe=document.scrollingElement;function Ye(e){for(;1!==e.nodeType;)if(null===(e=e.nextSibling))return!0;const t=-2*Qe.clientWidth,n=Qe.clientWidth+-1*t,r=-2*Qe.clientHeight,s=Qe.clientHeight+-1*r,o=e.getBoundingClientRect();return!(o.top>s||o.top+o.height<r||o.left>n||o.left+o.width<t)}function Ze(e,t,n){if(null===e.asOneIdx&&(e.asOneIdx=Be()),e.asOneIdx.set(t,n),0===my.debugLevel)return;const r=my.env.$srcById.get(e.id),s=d+t;r.setAttribute(s,n),e.isHide&&null!==r.content.firstChild&&r.content.firstChild.setAttribute(s,n)}function et(e,t){if(null!==e.idx)return e.idx.get(t)}function tt(e,t,n){if(null===e.idx&&(e.idx=Ce()),e.idx.set(t,n),0===my.debugLevel)return;const r=my.env.$srcById.get(e.id),s=u+t;r.setAttribute(s,n),e.isHide&&r.content.firstChild.setAttribute(s,n)}function nt(e,t){if(!e.isCmd)return"";const n=e.descr.attr.keys();let r="";if(""!==t){for(const s of n){if(s===t)break;my.env.reqCmd.get(s).cmdName===C&&(r=et(e,s))}return r}for(const t of n)my.env.reqCmd.get(t).cmdName===C&&(r=et(e,t));return r}function rt(e,t,n){const r=e[t];return"object"!=typeof r||null===r||"object"!=typeof n||null===n?(e[t]=n,!0):Array.isArray(r)?function(e,t,n){if(!Array.isArray(n))return e[t]=n,!0;const r=e[t],s=r.length,o=n.length;for(let e=0;e<s&&e<o;e++)rt(r,e,n[e]);const i=s-o;if(i>0)return r.splice(o,i),!0;for(let e=s;e<o;e++)r.push(n[e]);return!0}(e,t,n):r instanceof Set?function(e,t,n){const r=e[t];if(n instanceof Set){for(const e of r)n.has(e)||r.delete(e);for(const e of n)r.add(e)}return r.clear(),Reflect.set(e,t,n)}(e,t,n):r instanceof Map?function(e,t,n){const r=e[t];if(n instanceof Map){for(const[e,t]of r)n.has(e)||r.delete(e);for(const[e,t]of n){const n=r.get(e);if("object"==typeof n)if(Array.isArray(n))n.splice(0,n.length);else if(n instanceof Set||n instanceof Map)n.clear();else if(null!==n)for(const e of n)delete n[e];r.set(e,t)}}return r.clear(),Reflect.set(e,t,n)}(e,t,n):function(e,t,n){if("object"!=typeof n||null===n)return e[t]=n,!0;const r=e[t];for(const e in r)e in n||delete r[e];for(const e in n)rt(r,e,n[e]);return!0}(e,t,n)}function st(e){const t={};for(const n in e)t[n]=e[n];return t}function ot(t,n){const r=t.scopeCache,s=r[e],o=n[e],i=void 0!==o?o:n;for(const e in i)s[e]=i[e];return r}function it(e,t,n,r){if(0!==r.stat)return e;const s=my.env.srcBy$src.get(e),o=s.id;r.local.has(o)||r.local.set(o,{animationsCount:0,newSrcId:0}),t=null===t?s.scopeCache:ot(s,t);const i=""===n?s.descr.attr:M(s.descr.attr,n);return null===i||0===i.size?ct(e,t,r,o,e):async function(e,t,n,r){let s=null;for(const[o,i]of n){const n=T(e,o,i,t,r),c=await n.reqCmd.cmd.render(n);if(0!==r.stat)return c||D(!1,e,s);if(c){if(""!==c.attrStr)return e=await it(c.$attr,t,c.attrStr,r),c.isLast=!0,c.$src=c.$last,c.$last=null,c.$attr=null,c.attrStr="",c;if(c.isLast)return D(!0,c.$src||e,c.$last);null!==c.$last&&(s=c.$last),null!==c.$src&&(e=c.$src)}}return D(!1,e,s)}(e,t,i,r).then((n=>{if(0!==r.stat)return e;e!==n.$src&&(e=n.$src);const s=null===n.$last?e:n.$last;return n.isLast?s:ct(e,t,r,o,s)}))}async function ct(e,t,n,r,s){const i=my.env.srcBy$src;if(0!==n.stat||i.get(e).descr.isCustomHtml)return e;for(n.renderParam.isLazyRender||null===e.getAttribute(o)||(n.renderParam.isLazyRender=!0,qt(e)),e=e.firstChild;null!==e;e=e.nextSibling){if(void 0!==i.get(e)&&(e=await it(e,t,"",n),0!==n.stat))return}return mt(n.local,r),s}function lt(e,t,n,r){if(0!==r.stat)return Promise.resolve(e);const s=e.length,o=my.env.srcBy$src;for(let t=0;t<s;t++){const n=e[t],s=n.$src,i=o.get(s),c=i.id;r.local.has(c)||r.local.set(c,{animationsCount:0,newSrcId:0}),n.scope=null===n.scope?i.scopeCache:ot(i,n.scope)}const i=o.get(e[0].$src),c=""===t?i.descr.attr:M(i.descr.attr,t);return null!==c&&0!==c.size?async function(e,t,n,r,s){const o=e.length;for(const[i,c]of t){const t=await ft(e,i,c,n,s);if(0!==s.stat)return r.lastCount;if(t)for(let s=0;s<o;s++){if(n.has(s))continue;const o=await t[s];if(null!==o)if(""===o.attrStr)null!==o.$last&&(e[s].$src=o.$last),o.isLast&&(n.add(s),r.lastCount++);else{const t=e[s];dt(o.$attr,t.scope,o.attrStr,r),t.$src=o.$last||o.$src||o.$attr||t.$src,n.add(s),r.lastCount++}}}for(const e of r.afterByDescrByAttr.values())for(const[t,n]of e)await lt(n,r.strByAttrKey.get(t),R(),s);return r.lastCount}(e,c,n,{lastCount:0,afterByDescrByAttr:new Map,strByAttrKey:new Map},r).then((t=>t===s?e:at(e,n,r,s))):at(e,n,r)}function at(e,t,n,r){return function(e,t,n){const r=e[0].$src;if(0!==n.stat||my.env.srcBy$src.get(r).descr.isCustomHtml)return Promise.resolve(e);n.renderParam.isLazyRender||null===r.getAttribute(o)||(n.renderParam.isLazyRender=!0);const s=[],i=e.length,c=n.renderParam.isLazyRender;for(let n=0;n<i;n++){if(t.has(n))continue;const r=e[n];s.push(j(r.$src,r.scope)),c&&qt(r.$src)}if(0===s.length)return e;return ut(s,!0,n).then((()=>e))}(e,t,n).then((()=>{const t=my.env.srcBy$src;for(let s=0;s<r;s++)mt(n.local,t.get(e[s].$src).id);return e}))}function dt(e,t,n,r){const s=function(e){let t="";for(const[n,r]of e)t+=n+":"+r+";";return t}(M(my.env.srcBy$src.get(e).descr.attr,n)),o=my.env.srcBy$src.get(e).descr.id,i=r.afterByDescrByAttr.get(o),c=j(e,t);if(r.strByAttrKey.has(s)||r.strByAttrKey.set(s,n),void 0!==i){const e=i.get(s);return e?void e.push(c):void i.set(s,[c])}r.afterByDescrByAttr.set(o,new Map([[s,[c]]]))}function ut(e,t,n){const r=function(e,t){const n=new Map,r=e.length,s=my.env.srcBy$src;for(let o=0;o<r;o++)if(1===e[o].$src.nodeType)for(let r=t?e[o].$src.firstChild:e[o].$src.nextSibling;null!==r;r=r.nextSibling){const t=s.get(r);if(void 0===t)continue;e[o].$src=r;const i=t.descr.id,c=n.get(i);if(void 0!==c){c.push(e[o]);break}n.set(i,[e[o]]);break}return n}(e,t),s=new Set;for(const e of r.values())s.add(lt(e,"",R(),n).then((()=>0===n.stat&&ut(e,!1,n))));return Promise.all(s)}function ft(e,t,n,r,s){const o=T(e[0].$src,t,n,null,s);if(null!==o.reqCmd.cmd.q_render)return o.reqCmd.cmd.q_render(o,e,r);const i=e.length,c=new Array(i);for(let l=0;l<i;l++)r.has(l)||(c[l]=o.reqCmd.cmd.render(T(e[l].$src,t,n,e[l].scope,s)));return Promise.all(c)}function yt(e){for(const[t,n]of e)0===n.animationsCount&&vt(t,n)}function mt(e,t){const n=e.get(t);0===n.animationsCount&&vt(t,n)}function vt(e,t){const n=my.env.$srcById.get(e);if(void 0===n)return;if(t.animationsCount=-1,"TEMPLATE"===n.nodeName)return;const r=my.env.srcById.get(e);r.isMounted||(r.isMounted=!0,n.dispatchEvent(new CustomEvent("mount",s))),n.dispatchEvent(new CustomEvent("render",s))}const ht=new Set;let pt=0,gt=0,wt=0,bt="";const It=new Set,$t=new Set;let xt=Promise.resolve();function Bt(e=my.rootElement,t,n,r=!1){my.env.srcBy$src.has(e)||Ve(e,r);const s=my.env.srcBy$src.get(e).id;return ht.add(F(s,n||null,"",r)),St(t,s)}function Ct(e,t){if(!t)return void(pt=e);const n=pt;pt=e,t(),pt=n}function St(e=pt,t){const n=++gt;return new Promise(((r,s)=>{setTimeout((()=>{if(0!==t&&It.add(function(e,t,n){return{sId:e,resolve:t,reject:n}}(t,r,s)),n!==gt||0===ht.size)return;const e=new Set(It);It.clear(),function(e){const t=new Set,n=Et(t),r=new Map;if(0!==$t.size){const e=new Set,s=new Set;for(const e of $t)0===e.stat&&s.add(e);for(const o of s)for(const[s,i]of n){const n=o.stat,c=0===n?Lt(o,i):n;if(0!==c)if(0===n)if(t.add(o),e.add(s),o.renderParam.isLinking&&(o.renderParam.isLinking=!1),2!==c)3!==c?(i.isLinking&&(i.isLinking=!1),r.set(s,i)):r.set(my.env.srcById.get(o.renderParam.sId).descr.id,o.renderParam);else{ht.add(o.renderParam);for(const e of i.srcIds)ht.add(F(e,null,"",!1))}else 3===c&&e.add(s)}if(0!==e.size)for(const t of e)n.delete(t);if(0!==ht.size)for(const[e,n]of Et(t))r.set(e,n)}if(0!==n.size){const t=kt(n,e);xt=0===r.size?xt.then((()=>t)):xt.then((()=>kt(r,e))).then((()=>t))}else 0!==r.size&&(xt=xt.then((()=>kt(r,e))));return xt}(e).then(r).catch((e=>{for(const e of $t)e.resolve();$t.clear(),xt=Promise.resolve(),Pe.clear(),s(e)}))}),e)}))}function kt(e,t){if(0!==my.debugLevel){const t=new Set;for(const n of e.values())if(0!==n.srcIds.size)for(const e of n.srcIds)t.add(e);else t.add(n.sId);console.info("render =>",Mt(t))}const n=new Set,r=new Set;for(const[t,s]of e){const e=K(++wt,s),t=my.env.$srcById.get(s.sId),o=s.srcIds.size;if($t.add(e),n.add(e),1===o){r.add(it(t,s.scope,s.str,e));continue}const i=new Array(o);let c=0;for(const e of s.srcIds)i[c++]=j(my.env.$srcById.get(e),s.scope);r.add(At(s,e,i))}return Promise.all(r).then((()=>{const e=new Set;for(const t of n)e.add(t.promise),0!==my.debugLevel&&t.promise.then((()=>{0===t.stat&&console.warn("0 0 sdfsdfsd");const e=0===t.renderParam.srcIds.size?[t.renderParam.sId]:t.renderParam.srcIds;7!==t.stat?console.info("cancel =>",Mt(e)):console.info("ready =>",Mt(e))}));return Nt(n),Promise.all(e)})).then((()=>{for(const e of t)for(const t of n){if(void 0!==t.local.get(e.sId)){e.resolve(t);break}}const e=location.hash;if(e===bt)return;const r=document.getElementById(e.substr(1));r&&(bt=e,r.scrollIntoView())})).catch((e=>{for(const n of t)n.reject(e);throw e}))}function At(e,t,r){const s=[],o=[],i=r.length;for(let e=0;e<i;e++){const t=r[e];Ye(t.$src)?s.push(t):o.push(t)}return 0!==s.length?lt(s,e.str,R(),t).then((()=>0!==o.length&&t.afterAnimations.add(H((()=>At(e,t,o)),t.local,0)))):new Promise((n=>{const r=requestIdleCallback((()=>{t.idleCallback.delete(r),lt(o.splice(0,100),e.str,R(),t).then((()=>{if(0!==o.length)return At(e,t,o).then(n);n()}))}));t.idleCallback.set(r,n)}),n)}async function Nt(e){const t=new Set;for(const n of e){if(0!==n.stat||0===n.beforeAnimations.size)continue;const e=new Set(n.beforeAnimations),r=new Array(e.size);n.beforeAnimations.clear();let s=0;for(const t of e)r[s++]=t.handler();t.add(Promise.all(r).then((()=>yt(n.local))))}0!==t.size&&await Promise.all(t);for(const n of e){if(0!==n.stat||0===n.animations.size)continue;const e=new Set(n.animations);n.animations.clear();const r=_t(n,e,!1);null!==r&&t.add(r)}0!==t.size&&await Promise.all(t);for(const n of e){if(0!==n.stat||0===n.afterAnimations.size)continue;const e=new Set(n.afterAnimations),r=new Array(e.size);n.afterAnimations.clear();let s=0;for(const t of e)r[s++]=t.handler();t.add(Promise.all(r).then((()=>yt(n.local))))}0!==t.size&&await Promise.all(t);const n=new Set;for(const t of e){if(0===t.stat){if(0!==t.beforeAnimations.size||0!==t.animations.size||0!==t.afterAnimations.size){n.add(t);continue}if(0!==t.scrollAnimations.size||0!==t.idleCallback.size||0!==t.animationFrame.size)continue}if(0===t.stat){if(0!==t.onreadies.size)for(const e of t.onreadies)e();t.stat=7,$t.delete(t),t.resolve()}else $t.delete(t),t.resolve()}if(0!==n.size)return Nt(n)}function _t(e,t,r){if(0!==e.stat)return console.warn(1111111111),null;const s=r?t:new Set,o=new Set;if(!r)for(const n of t)n.promise?(console.warn("a.promise !== null"),alert(1)):Je(n)?s.add(n):e.renderParam.isLazyRender?(e.scrollAnimations.add(n),n.promise=1):o.add(n);return 0!==s.size?new Promise((t=>{const r=requestAnimationFrame((()=>{e.animationFrame.delete(r);for(const e of s)e.handler();if(yt(e.local),0===o.size)return void t();const i=requestIdleCallback((()=>{e.idleCallback.delete(i),_t(e,o,!1).then(t)}),n);e.idleCallback.set(i,t)}));e.animationFrame.set(r,t)})):0===o.size?null:new Promise((t=>{const r=requestIdleCallback((()=>{e.idleCallback.delete(r);const n=requestAnimationFrame((()=>{e.animationFrame.delete(n);for(const e of o)e.handler();yt(e.local),t()}));e.animationFrame.set(n,t)}),n);e.idleCallback.set(r,t)}))}function Pt(){const e=new Set,t=new Set,n=my.env.$srcById;for(const r of $t){if(0!==r.stat||0===r.scrollAnimations.size)continue;const s=new Set;for(const e of r.scrollAnimations)n.has(e.viewedSrcId)?Je(e)&&(r.scrollAnimations.delete(e),s.add(e)):(r.scrollAnimations.delete(e),0===r.scrollAnimations.size&&t.add(r));0!==s.size&&(e.add(_t(r,s,!0)),t.add(r))}0===e.size?0!==t.size&&(console.warn("2animation"),Nt(t)):Promise.all(e).then((()=>Nt(t)))}function qt(e){e.addEventListener("scroll",Pt,{passive:!0})}function Et(e){const t=my.env.srcById,n=my.env.descrById,r=my.env.srcBy$src,s=my.env.$srcById,i=new Map;for(const e of ht){const n=e.sId,r=t.get(n);if(void 0===r)continue;const o=r.descr,c=o.id,l=i.get(c);if(void 0!==l){null===o.asOnes&&l.srcIds.add(n);continue}if(i.set(c,e),null===o.asOnes){e.srcIds.add(n);continue}const a=new Set;for(const t of o.srcIds){const n=s.get(t).parentNode;a.has(n)||(a.add(n),e.srcIds.add(t))}}for(const[t,o]of i){const c=s.get(o.sId);if(Xe(c)){Ot(i,t,e);continue}const l=n.get(t);if(null!==l.asOnes||null===l.get$elsByStr)continue;const a=O(c,l.get$elsByStr,""),d=a.length;if(1!==d){for(let n=0;n<d;n++){const s=r.get(a[n]);if(void 0===s)continue;const o=s.descr.id;o!==t&&Ot(i,o,e)}o.$els=a}}const c=new Map,l=my.rootElement.parentNode;for(const[e,t]of i){let n=s.get(t.sId),i=r.get(n);const u=(a=0,d=null!==i.asOneIdx?i.asOneIdx.values().next().value:0,{len:a,descrId:new Set,firstAsOneIdx:d});for(c.set(e,u);n!==l;n=n.parentNode,i=r.get(n)){u.len++,null!==n.getAttribute(o)&&(t.isLazyRender=!0,qt(n));const e=i.descr;if(null!==i.asOneIdx||null===e.get$elsByStr){u.descrId.add(e.id);continue}const s=O(n,e.get$elsByStr,"");for(let e=s.length-1;e>-1;e--){const t=r.get(s[e]);void 0!==t&&u.descrId.add(t.descr.id)}}}var a,d;const u=Array.from(i.keys()),f=u.length;for(let t,r,o,l=0;l<f;l++){const a=u[l];if(0===a)continue;const d=c.get(a);for(o=0;o<f;o++){const l=u[o];if(0===l||a===l)continue;const f=c.get(l);if(!(d.len>f.len))if(f.descrId.has(a)){const c=s.get(i.get(a).sId).parentNode,y=f.len-d.len;for(const a of n.get(l).srcIds){for(t=s.get(a),r=y;null!==t&&-1!==r;r--)t=t.parentNode;if(t===c){Ot(i,l,e),u[o]=0;break}}}else 0!==d.firstAsOneIdx&&d.firstAsOneIdx===f.firstAsOneIdx&&(Ot(i,l,e),u[o]=0)}}return ht.clear(),i}function Ot(e,t,n){if(!e.has(t))return;const r=e.get(t).srcIds;for(const e of $t)r.has(e.renderParam.sId)&&(e.stat=4,n.add(e));e.delete(t)}function Lt(e,t){const n=function(e,t){const n=E(e.local,e.renderParam.sId),r=my.env.$srcById.get(n);if(void 0===r)return console.warn("!!! checkSync - hz "+n),5;const s=my.env.srcBy$src,o=my.rootElement.parentNode;if(null===t.$els)for(let e=r;e!==o;e=e.parentNode){const r=s.get(e).id;if(t.srcIds.has(r))return r===n?2:1}else{const e=t.$els,i=e.length;for(let t,c=r;c!==o;c=c.parentNode)for(t=0;t<i;t++){if(e[t]===c)return s.get(c).id===n?2:1}}for(let e=my.env.$srcById.get(t.sId).parentNode;e!==o;e=e.parentNode)if(s.get(e).id===n)return 3;return 0}(e,t);return 0!==e.stat||0!==n&&Vt(e,n),n}function Vt(e,t){e.stat=t;for(const[t,n]of e.idleCallback)cancelIdleCallback(t),n();for(const[t,n]of e.animationFrame)cancelAnimationFrame(t),n();return $t.delete(e),e.resolve(),t}function Mt(e){const t={};for(const n of e)t[n]=my.env.$srcById.get(n);return t}self.requestIdleCallback||(self.requestIdleCallback=function(e){const t=Date.now();return setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)},self.cancelIdleCallback=function(e){});const zt=Object.getPrototypeOf((async function(){})).constructor;function Tt(e,t,n){const r=function(e,t){const n=my.env.srcBy$src,r=n.get(e);if(void 0===r)return console.warn("2323",e,t),0;const s=r.descr;if(null===s.asOnes||!s.asOnes.has(t))return r.id;const o=V(r,t);e=L(e,s.get$elsByStr,o);do{const t=n.get(e);if(void 0!==t&&t.isCmd)return t.id;e=e.nextSibling}while(null!==e);throw new Error("getCacheSrcId")}(e.$src,e.str),s=my.env.srcById.get(r).cache;if(null===s&&(console.warn(111),alert(1)),s.value.has(e.str))return s.value.get(e.str);const o=jt(e,e.expr);if(re.value=0,n){ne(t);const n=o.apply(t,[e,e.scope]).catch((t=>{throw _e(t,e.$src,e)}));return 0!==re.value&&s.value.set(e.str,n),ne(null),n}const i=o.apply(t,[e,e.scope]).catch((t=>{throw _e(t,e.$src,e)}));return 0!==re.value&&s.value.set(e.str,i),i}function Rt(e,t,n){return function(e,t){const n="=q"+(t=t.trim()),r=my.env._func.get(n);if(void 0!==r)return r;if(""===t){const e=new zt;return my.env._func.set(n,e),e}Dt(t)&&(t="const _tpl_res = "+t+";\nreturn _tpl_res;");const s=`const _tpl_len = _tpl_arr.length,\n\t_tpl_val = new Array(_tpl_len);\nfor (let i = 0; i < _tpl_len; i++) {\n\tif (_tpl_isLast.has(i)) {\n\t\tcontinue;\n\t}\n\tconst $i = _tpl_arr[i].$src,\n\t\tsrc = _tpl_srcBy$src.get($i),\n\t\tc = src.cache;\n\tif (c.value.has(_tpl_str)) {\n\t\t_tpl_val[i] = c.value.get(_tpl_str);\n//console.log(7777, "q", _tpl_val[i]);\n\t\tcontinue;\n\t}\n\t_tpl_proxyStat.value = 0;\n\t_tpl_setCur$src($i);\n\tconst v = _tpl_val[i] = (function() {\n//todebug \n\t\tif (my.debugLevel !== 0) {\n\t\t\treq.scope = _tpl_arr[i].scope;\n\t\t}\n\t\twith (_tpl_arr[i].scope) {${t}\n\t\t}\n\t}).apply($i);\n\tif (_tpl_proxyStat.value !== 0) {\n//--\t\t_tpl_setCacheValue(cacheSrcId, _tpl_str, v);\n\t\tc.value.set(_tpl_str, v);\n\t}\n}\n_tpl_setCur$src(null);\n//_tpl_proxyStat.value = 0;\nreturn _tpl_val;`;try{const e=new zt("req","_tpl_arr","_tpl_isLast","_tpl_str","_tpl_setCur$src","_tpl_proxyStat","_tpl_srcBy$src",s);return my.env._func.set(n,e),e}catch(t){throw _e(t,e.$src,e)}}(e,e.expr).apply(null,[e,t,n,e.str,ne,re,my.env.srcBy$src]).then((e=>Promise.all(e))).catch((t=>{throw _e(t,e.$src,e)}))}function jt(e,t){const n=t=t.trim(),r=my.env._func.get(n);if(void 0!==r)return r;if(""===t){const e=new zt;return my.env._func.set(n,e),e}Dt(t)&&(t="const _tpl_res = "+t+";\nreturn _tpl_res;");const s="with (_tpl_scope) {"+t+"\n}";try{const e=new zt("req","_tpl_scope",s);return my.env._func.set(n,e),e}catch(t){throw _e(t,e.$src,e)}}const Ht=["with","var","try","catch","switch","do","while","let","const","for","if","return"];function Dt(e){if(""===e)return!1;e=Ft(Ft(Ft(Ft(Ft(e,"'","'"),"`","`"),'"','"'),"{","}"),"(",")");for(let t=Ht.length-1;t>-1;t--){const n=e.indexOf(Ht[t]);if(-1!==n)switch(e[n+Ht[t].length]){case" ":case"(":case"\n":case"\t":case"\r":return!1}}return!0}function Ft(e,t,n){for(let r=e.indexOf(t);-1!==r;r=e.indexOf(t,r+1)){const s=e.length;for(let o=r+1,i=0;o<s;o++)if("\\"===e[o]&&o++,e[o]!==n)e[o]===t&&i++;else{if(0===i){e=e.substr(0,r+1)+e.substr(o),r=o;break}i--}}return e}function Kt(e,t){return"string"==typeof e?""!==e?new Request(Jt(e,t),h):null:e instanceof Request||e instanceof Response?e:null}const Ut=/^(\w+\:\/\/|\/\/)/,Wt=/\/\/+/,Gt=/[^\/]+\/+\.\.\//,Xt=/\/+\.\//;function Jt(e,t=location.pathname){if(Qt(e)){Qt(t)&&(t=Yt(t));let n=Zt(e.trim());for(;0===n.indexOf(".");)0===n.indexOf("./")?n=n.substr(2):0===n.indexOf("../")&&(n=n.substr(3));e=t.endsWith(n)?t:Yt(t.substr(0,t.lastIndexOf("/")+1)+e)}return-1===e.search(Ut)?location.origin+e:e}function Qt(e){return 0!==(e=e.trimLeft()).search(Ut)&&"/"!==e[0]}function Yt(e){if(Qt(e=e.trim())){const t=location.pathname.lastIndexOf("/");t===location.pathname.length-1?e=location.pathname+e:-1!==t&&(e=location.pathname.substr(0,t+1)+e)}return Zt(e)}function Zt(e){for(let t=[Gt,Xt],n=t.length-1;n>-1;n--)for(;-1!==e.search(t[n]);)e=e.replace(t[n],"/");if(-1===e.search(Ut))return e.replace(Wt,"/");const t=e.indexOf("//");return e.substr(0,t+1)+e.substr(t+1).replace(Wt,"/")}const en=new Map,tn=new Map,nn=new Map;var rn=X((function(e){return Tt(e,e.$src,!0).then((t=>sn(e,t)))}),(function(e,t,n){return Rt(e,t,n).then((r=>{const s=t.length,o=new Array(s);for(let i=0;i<s;i++)n.has(i)||(o[i]=sn(T(t[i].$src,e.str,e.expr,t[i].scope,e.sync),r[i]));return o}))}),(function(e,t,n,r){return pn(e,t,n,r)}),(function(e,t,n,r){return hn(e,t,n,r)}),!1,!1);function sn(e,n){const r=function(e,n){if("string"!=typeof n){const e=Kt(n,"");if(null===e)return null;if("GET"===e.method||void 0===e.method){const t=tn.get(e.url);if(void 0!==t)return t}const t=e instanceof Request?on("loading",e.url,e,null):on("loading",e.url,null,e);return tn.set(t.key,t),t}if(""===n)return null;const r=Kt(n,function(e,n){if(""!==n){const t=nt(e,n);if(""!==t)return t}const r=my.env.srcBy$src;for(let n=my.env.$srcById.get(e.id).parentNode;n!==my.rootElement;n=n.parentNode){const e=nt(r.get(n));if(""!==e)return e;if(void 0!==n[t])return n[t]}return""}(my.env.srcBy$src.get(e.$src),e.str)),s=tn.get(r.url);if(void 0!==s)return s;const o=on("loading",r.url,r,null);return tn.set(o.url,o),o}(e,n);if(null===r)return D(!0);const s=hn(e.$src,e.str,e.expr,-1),o=s.length,i=et(my.env.srcBy$src.get(e.$src),e.str);for(let t=0;t<o;t++){const n=my.env.srcBy$src.get(s[t]);void 0===n||e.sync.local.has(n.id)||e.sync.local.set(n.id,{animationsCount:0,newSrcId:0})}if(1!==o&&i===r.key)return o>3?mn(e,s[0],s[o-1],yn).then((t=>vn(e,r,t))):null;const c=s[o-1];if("complete"===r.readyState)return un(e,r,i,s,o,null),D(!0,null,c);const l=function(e){const t=e.reqCmd.args[0],n=e.reqCmd.args[1],r=""!==t&&void 0!==t?t:"",s=""!==n&&void 0!==n?n:"";return{type:r,waitTime:s,isShow:""!==s||""!==r}}(e);l.isShow&&qe(e.$src,(()=>!1),l.type,l.waitTime),en.has(r.key)||en.set(r.key,(null===r.res?fetch(r.req).then((e=>e.text())):r.res.text()).then((t=>(en.delete(r.key),async function(e,t,n){const r=my.document.createDocumentFragment(),s=my.document.createElement("div");s.innerHTML=n;for(let e=s.firstChild;null!==e;e=s.firstChild)r.appendChild(e);my.createLineNo&&my.createLineNo(t.url,n,r);(function(e){e=e.firstChild;for(let t;null!==e;e=e.nextSibling)for(;3===e.nodeType&&null!==(t=e.nextSibling)&&3===t.nodeType;)e.textContent+=$e.removeChild(t).textContent})(r),t.$tags=[];const o=r.querySelectorAll("link"),i=o.length;for(let e=0;e<i;e++){const n=o[e];null!==n.getAttribute("rel")&&t.$tags.push(n)}for(const e of t.$tags){const n=e.getAttribute("href");if(n){const r=Jt(n,t.url);n!==r&&e.setAttribute("href",r)}}const c=r.querySelectorAll("style"),l=c.length;for(let e=0;e<l;e++)t.$tags.push(c[e]);const a=r.querySelectorAll("script");0!==a.length&&await function(e,t,n){const r=n.length,s=new Array(r);for(let o=0;o<r;o++)s[o]=cn(e,t,n[o]);return Promise.all(s)}(e,t,a);if(0!==t.$tags.length){t.$tags[0].parentNode===my.document.head&&console.warn("applyIncFragment",t.$tags,e);for(const e of t.$tags)my.document.head.appendChild(e)}t.$fr=r,t.readyState="complete"}(e,r,t)))));const a=en.get(r.key);return e.sync.afterAnimations.add(H((()=>a.then((()=>0===e.sync.stat&&un(e,r,i,s,o,l)))),e.sync.local,0)),D(!0,null,c)}function on(e,t,n,r){return{key:null===n||"GET"===n.method?t:n,readyState:e,url:t,req:n,res:r,$fr:null,$tags:null,scope:null}}function cn(e,t,n){n.parentNode.removeChild(n);const r=n.getAttribute("src"),s=null!==r?Jt(r,t.url):null;if(s!==r&&n.setAttribute("src",s),"module"===n.type){if(null!==s)return import(s).then((e=>ln(e,t))).catch((t=>{throw dn(t,n,e,s)}));const r=URL.createObjectURL(new Blob([n.textContent],{type:"text/javascript"}));return import(r).then((e=>{URL.revokeObjectURL(r),ln(e,t)})).catch((t=>{throw URL.revokeObjectURL(r),dn(t,n,e)}))}if(null===s)return void an(e,n.textContent,n,s);const o=nn.get(s);if(void 0===o)return fetch(s,h).then((t=>{if(t.ok)return t.text();throw _e(new Error(`>>>mw inc:createIncScript: Request stat ${t.status}`),e.$src,e)})).then((t=>{nn.set(s,t),an(e,t,n,s)}));an(e,o,n,s)}function ln(e,t){t.scope={};for(const n in e){const r=e[n];t.scope[void 0!==r.name?r.name:n]=r}}function an(e,t,n,r){try{self.eval(t)}catch(t){throw dn(t,n,e,r)}}function dn(e,t,n,r){if(r)return _e(e,t,n,null,r,e.lineNumber,e.columnNumber);if(void 0===my.getLineNo)return _e(e,t,n);const s=my.getLineNo(t),o=s.lastIndexOf(":");return _e(e,t,n,null,s.substr(0,o),Number(s.substr(o+1))-1+e.lineNumber)}function un(t,n,r,s,o,c){t.sync.animations.add(H((()=>{const l=function(e,t,n,r){const s=t.$fr.cloneNode(!0),o=my.env.srcBy$src.get(e.$src),c=o.descr,l=e.$src.attributes,a=l.length,y=new Map,m=void 0!==n,v=null!==o.asOneIdx?o.asOneIdx:Be(),h=null!==o.idx?o.idx:Ce(),p=null!==o.save?o.save:Se(),g=[];for(const t of z(c.attr.keys(),e.str,!1))v.delete(t),h.delete(t);if(m)for(const[t,n]of p.get(e.str))y.set(t,n);else{const t=new Set;if(null!==r&&r.isShow){const e=o.id,n=Pe.get(e),s=n.get("")-1;if(n.set("",s),s<=0&&t.add(f),""!==r.type){const e=n.get(r.type)-1;n.set(r.type,e),e<=0&&t.add("is_filling-"+r.type)}}const n=ke();p.set(e.str,n);for(let e=0;e<a;e++){const r=l[e];t.has(r.name)||(y.set(r.name,r.value),(0!==my.debugLevel||0!==r.name.indexOf(u)&&0!==r.name.indexOf(d))&&0!==r.name.indexOf(f)&&n.set(r.name,r.value))}}for(const[t,n]of c.attr){if(t===e.str)break;const r=my.env.reqCmd.get(t);r.cmdName===S&&g.push(Le(r.cmd,t,n))}const w=g.length;for(let n,r,o,c=s.firstChild;null!==c;c=c.nextSibling){if(1!==c.nodeType)continue;const s=c.attributes,l=s.length,a=new Map;for(let e=0;e<l;e++){const t=s[e];a.set(t.name,t.value)}for(const e of a.keys())c.removeAttribute(e);const f=y.entries(),m=new Set;for(o=f.next();!o.done;o=f.next()){const[t,n]=o.value;if(c.removeAttribute(t),c.setAttribute(t,n),m.add(t),t===e.str){for(const[e,t]of a)if(Q(e)){for(r=e;m.has(r);)r+=i;m.add(r),c.setAttribute(r,t)}else c.removeAttribute(e),c.setAttribute(e,t);for(o=f.next();!o.done;o=f.next()){const[e,t]=o.value;if(Q(e)){for(r=e;m.has(r);)r+=i;c.setAttribute(r,t)}else c.removeAttribute(e),c.setAttribute(e,t)}break}}Ve(c,!1);const b=my.env.srcBy$src.get(c);if(0!==v.size&&(b.asOneIdx=Be(v)),b.idx=Ce(h),b.save=Se(p),0!==w)for(n=0;n<w;n++){const t=g[n];t.cmd.render(T(c,t.str,t.expr,e.scope,e.sync))}if(0!==my.debugLevel){for(const[e,t]of v)c.setAttribute(d+e,t);for(const[e,t]of h)c.setAttribute(u+e,t)}tt(b,e.str,t.key)}let b=!1;for(let e=s.firstChild;null!==e;e=e.nextSibling)if(1===e.nodeType){b=!0;break}if(!b)return s;m||function(e,t){const n=t.querySelectorAll("slot"),r=n.length;let s=null;for(let t=0;t<r;t++){const r=n[t],o=r.name;if(""===o&&!s){s=r;continue}const i=c.parentNode;let c=e.$src.firstChild;do{if(c.getAttribute("slot")===o){const e=c,t=my.env.srcBy$src.get(e).descr.get$elsByStr;if(c=c.previousSibling,null===c&&(c=e.parentNode),null===t){r.appendChild(e);continue}const n=O(e,t,""),s=n.length;for(let e=0;e<s;e++)r.appendChild(n[e])}if(null===c.firstChild){if(c.parentNode===i)break;if(null===c.nextSibling)for(;;){if(c=c.parentNode,c.parentNode===i){c=null;break}if(null!==c.nextSibling){c=c.nextSibling;break}}else c=c.nextSibling}else c=c.firstChild}while(null!==c)}if(null===s)return;for(let t=e.$src.firstChild;null!==t;t=e.$src.firstChild)s.appendChild(t)}(e,s);return s.insertBefore(my.document.createComment("inc_begin"),s.firstChild),s.appendChild(my.document.createComment("inc_end")),s}(t,n,r,c),a=l.firstChild,y=l.lastChild;!function(e,t,n,r,s,o){const i=my.env.srcBy$src;let c=0;for(let e=s.firstChild;null!==e;e=e.nextSibling){const t=i.get(e);if(void 0!==t){c=t.id;break}}const l=n[0].parentNode,a=n[r-1].nextSibling;i.get(e.$src);for(let t,s=0;;s++){if(t=i.get(n[s]),void 0===t){ze(n[s]);continue}const o=my.env.srcById.get(c).descr.varIds;for(const e of t.descr.varIds)o.add(e),my.env.srcIdsByVarId.get(e).add(c);do{if(void 0!==t){const n=e.sync.local.get(t.id);n.animationsCount=-1,n.newSrcId=c,t.id===e.sync.renderParam.sId&&(e.sync.renderParam.sId=c)}ze(n[s]),t=i.get(n[s])}while(++s<r);break}l.insertBefore(s,a)}(t,0,s,o,l),t.sync.afterAnimations.add(H((()=>(function(t,n){if(null!==t.scope)for(const r in t.scope)n.scope[e][r]=t.scope[r]}(n,t),mn(t,a,y,fn).then((e=>vn(t,n,e))))),t.sync.local,0))}),t.sync.local,0))}async function fn(e,t){return it(t,e.scope,e.str,e.sync)}function yn(e,t){return it(t,e.scope,e.str,e.sync)}async function mn(e,t,n,r){do{const s=my.env.srcBy$src.get(t);if(void 0!==s&&s.isCmd&&(t=await r(e,t),0!==e.sync.stat))return n;if(t===n)return n;t=t.nextSibling}while(null!==t);throw new Error("inc.js")}function vn(e,t,n){return D(!0,null,n)}function hn(e,t,n,r){if(1===e.nodeType&&!wn(e,t))return[e];const s=[],o=my.env.srcBy$src;for(let i=pn(e,t,n,r),c=0;null!==i;i=i.nextSibling){s.push(i);const e=o.get(i);if(void 0!==e&&e.isCmd){for(c=gn(i,t),i=i.nextSibling;null!==i;i=i.nextSibling){s.push(i);const e=o.get(i);if(void 0!==e&&e.isCmd||8!==i.nodeType)continue;const t=i.textContent;if("inc_end"===t){if(0===c)return s;c--}else"inc_begin"===t&&c++}break}}throw _e(new Error(`>>>mw inc:incGet$els: Not found \x3c!--inc_begin--\x3e: "${t}", "${n}", ${r}`),e)}function pn(e,t,n,r){if(1===e.nodeType&&!wn(e,t))return e;if(8===e.nodeType&&"inc_begin"===e.textContent)return e;const s=my.env.srcBy$src;for(let n=e,r=0;null!==n;n=n.previousSibling){const e=s.get(n);if(void 0!==e&&e.isCmd){for(r=gn(n,t),n=n.previousSibling;null!==n;n=n.previousSibling){const e=s.get(n);if(void 0!==e&&e.isCmd||8!==n.nodeType)continue;const t=n.textContent;if("inc_begin"===t){if(0===r)return n;r--}else"inc_end"===t&&r++}break}}throw _e(new Error(`>>>mw inc:incGet$first: Not found \x3c!--inc_begin--\x3e: "${t}", "${n}", ${r}`),e)}function gn(e,t,n,r){let s=0;const o=z(my.env.srcBy$src.get(e).descr.attr.keys(),t,!1);for(let t=o.next();!t.done;t=o.next())if(my.env.reqCmd.get(t.value).cmdName===C){if(!wn(e,t.value))return s;s++}return s}function wn(e,t){const n=my.env.srcBy$src;if(8===e.nodeType&&"inc_end"===e.textContent)for(;!n.has(e)&&null!==e;)e=e.previousSibling;else for(;!n.has(e)&&null!==e;)e=e.nextSibling;const r=n.get(e);if(t)return void 0!==et(r,t);for(const e of r.descr.attr.keys())if(my.env.reqCmd.get(e).cmdName===C)return void 0!==et(r,e)}function bn(e,t,n){const r={detail:n};for(const e in s)r[e]=s[e];e.dispatchEvent(new CustomEvent(t,r))}function In(e){rt(self,"loc",$n(e))}function $n(e){e=new URL(e);const t=new Map;for(const[n,r]of e.searchParams)t.set(n,r);return function(e,t,n,r,s){return{origin:e,href:t,pathname:n,query:r,hash:{path:s.substr(1)}}}(e.origin,e.href,e.pathname,t,e.hash)}function xn(e){if(""===e||void 0===e)return e;const t=e.split("-"),n=t.length;if(1==n)return e;e=t[0];for(let r=1;r<n;r++)""!==t[r]&&(e+=t[r][0].toUpperCase()+t[r].substr(1));return e}function Bn(e){this.val=e}function Cn(e){rt(self,r,Sn(e))}function Sn(e){const t=e.scrollingElement;return{scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,clientWidth:t.clientWidth,clientHeight:t.clientHeight}}Bn.prototype={eq(e){if(this.val===e)return this;throw new Error("Value "+this.val+" !== "+e)},of(e){if(this.val instanceof e)return this;throw new Error("Value "+this.val+" isn't instanceof "+e)},elsOf(e){if(!Array.isArray(this.val))throw new Error("Value "+this.val+" isn't array");for(const t of this.val)if(!(t instanceof e))throw new Error("Value "+t+", array items isn't instanceof "+e);return this},propsOf(e){if("object"!=typeof this.val||null===this.val)throw new Error("Value "+this.val+" isn't object");for(const t in this.val)if(!(this.val[t]instanceof e))throw new Error("Value "+this.val[t]+", object props isn't instanceof "+e);return this},array(){if(Array.isArray(this.val))return this;throw new Error("Value "+this.val+" isn't array")},object(){if("object"==typeof this.val&&null!==this.val)return this;throw new Error("Value "+this.val+" isn't object")},bool(){if(!0===this.val||!1===this.val)return this;throw new Error("Value "+this.val+" isn't bool")},number(){if("number"==typeof this.val)return this;throw new Error("Value "+this.val+" isn't number")},string(){if("string"==typeof this.val)return this;throw new Error("Value "+this.val+" isn't string")},null(){if(null===this.val)return this;throw new Error("Value "+this.val+" isn't null")},notNull(){if(null!==this.val)return this;throw new Error("Value "+this.val+" is null")},undef(){if(void 0===this.val)return this;throw new Error("Value "+this.val+" isn't undefined")},notUndef(){if(void 0!==this.val)return this;throw new Error("Value "+this.val+" is undefined")},func(){if("function"==typeof this.val)return this;throw new Error("Value "+this.val+" isn't function")},test(e){if(e(this.val))return this;throw new Error("Value "+this.val+" didn't pass the functional test")}},self.my||(self.my={}),my.incCache=tn,my.render=Bt,my.getCurRender=function(){return xt},my.setDelay=Ct,my.cancelSync=Vt,my.p_target=e,my.p_topUrl=t,my.preRender=Ve,my.removeChild=ze,my.setLoc=In,my.getProxy=se,my.oset=rt,my.del=function(e,t){const n=e[t];return delete e[t],n},my.copyToClipboard=function(e){const t=document.createElement("input");t.type="text",t.value=e,t.setSelectionRange(0,this.length),document.execCommand("copy")},my.typedef=function(e){return new Bn(e)},my.getUrl=Jt,my.dispatchCustomEvent=bn;var kn=X((function(e){return Tt(e,e.$src,!0).then((t=>(An(e,e.$src,Nn(e),t),null)))}),(function(e,t,n){return Rt(e,t,n).then((r=>{const s=t.length,o=Nn(e);for(let i=0;i<s;i++)n.has(i)||An(e,t[i].$src,o,r[i]);return null}))}),null,null,!1,!1);function An(e,t,n,r){const s=e.reqCmd.args[1],i=my.env.srcBy$src.get(t).cache,c=i.isInits.has(e.str);if(c||(i.isInits.add(e.str),function(e,t,n){if("A"!==t.tagName||"href"!==n.toLowerCase()||t.target)return;t.addEventListener("click",(async n=>{if(!t.href||n.ctrlKey||n.metaKey)return;n.preventDefault();const r=e.reqCmd.args[1];if(r===y)history.pushState(void 0,void 0,t.href);else{if(r!==m)return void(location.href=t.href);history.replaceState(void 0,void 0,t.href)}document.scrollingElement.scrollTop=0,In(location.href)}))}(e,t,n)),e.sync.renderParam.isLinking)return void i.current.set(e.str,t.getAttribute(n));const l=i.current.has(e.str)?i.current.get(e.str):t.getAttribute(n),a=i.attrSyncCur.get(n),d=void 0!==a&&a.syncId===e.sync.syncId?a.value:l;if(s&&s!==y&&s!==m)if(d){const e=d.indexOf(s),t=s.length;r=-1===e||" "!==d[e-1]&&0!==e||" "!==d[e+t]&&e+t!==d.length?r?" "===d[d.length-1]?d+s:d+" "+s:d:r?d:d.substr(0,e)+d.substr(e+t+1)}else r=r?s:d;!0===r&&(r=n),void 0!==a?(a.syncId=e.sync.syncId,a.value=r):i.attrSyncCur.set(n,{syncId:e.sync.syncId,value:r});const u=!(!r&&""!==r);n===o&&(e.sync.renderParam.isLazyRender=u),c&&l===r?Fe(t,n,r):e.sync.animations.add(H((()=>{i.current.set(e.str,r),u?De(t,n,r):function(e,t){switch(t){case"value":e.value="";break;case"checked":e.checked=!1}e.removeAttribute(t)}(t,n)}),e.sync.local,my.env.srcBy$src.get(t).id))}function Nn(e){const t=e.reqCmd.args[0];if(t)return t;throw _e(new Error(">>>mw attr:render:01: Need set attribute name"),e.$src,e)}var _n=X((function(t){return Tt(t,t.$src,!0).then((n=>{const r=Pn(t);return void 0!==r&&(t.scope[e][r]=se(n)),null}))}),(function(t,n,r){return Rt(t,n,r).then((s=>{const o=Pn(t);if(void 0===o)return null;const i=n.length;for(let t=0;t<i;t++)r.has(t)||(n[t].scope[e][o]=se(s[t]));return null}))}),null,null,!1,!1);function Pn(e){const t=e.reqCmd.args[0];if(void 0!==t&&""!==t)return xn(t)}var qn=X((function(e){return Tt(e,e.$src,!0).then((t=>{const n=Kt(t,"");if(null===n)return D(!0);const r=n instanceof Response?En(e,n,null):function(e,t){if(0!==e.sync.stat)return void On(e);for(const e in h)if("headers"!==e)void 0===t[e]&&(t[e]=h[e]);else for(const e in h.headers)void 0===t.headers[e]&&(t.headers[e]=h.headers[e]);return fetch(t).then((t=>En(e,t,null))).catch((t=>En(e,null,t)))}(e,n);return e.sync.afterAnimations.add(H((()=>r),e.sync.local,0)),null}))}),null,null,null,!1,!1);function En(e,t,n){0===e.sync.stat?e.sync.afterAnimations.add(H((()=>e.sync.beforeAnimations.add(H((()=>{const r=function(e,t){return{res:e,err:t}}(t,n);null===n?(bn(e.$src,"load",r),t.ok&&bn(e.$src,"ok",r)):bn(e.$src,"error",r)}),e.sync.local,0))),e.sync.local,0)):On(e)}function On(e){0!==my.debugLevel&&console.info("clear fetch => ",e);const t=my.env.srcBy$src.get(e.$src).cache;t.value=G(),t.current=W()}var Ln=X((function(e){return Tt(e,e.$src,!0).then((t=>Vn(e,t)))}),(function(e,t,n){return Rt(e,t,n).then((r=>{const s=t.length,o=new Array(s);for(let i=0;i<s;i++)n.has(i)||(o[i]=Vn(T(t[i].$src,e.str,e.expr,t[i].scope,e.sync),r[i]));return o}))}),Tn,(function(e,t,n,r){const s=Rn(Tn(e,t),t),o=s.length,i=[];for(let e=0;e<o;e++){const t=s[e].length;for(let n=0;n<t;n++)i.push(s[e][n])}return i}),!1,!0);function Vn(e,t){const n=my.env.srcBy$src,r=n.get(e.$src);null===r.asOneIdx&&(r.asOneIdx=Be()),r.asOneIdx.has(e.str)||(Ze(r,e.str,q()),tt(r,e.str,0));const s=function(e,t){const n=Rn(Tn(e.$src,e.str,e.expr),e.str,e.expr),r=xn(e.reqCmd.args[0]),s=xn(e.reqCmd.args[1]);if(!t)return Mn([],[],n,r,s);if(Array.isArray(t)){const e=t.length,o=new Array(e);for(let t=0;t<e;t++)o[t]=t;return Mn(o,t,n,r,s)}if(t instanceof Set||t instanceof Map){const e=new Array(t.size),o=new Array(t.size);let i=0;for(const[n,r]of t.entries())e[i]=n,o[i++]=r;return Mn(e,o,n,r,s)}const o=[],i=[];for(const e in t)o.push(e),i.push(t[e]);return Mn(o,i,n,r,s)}(e,t),o=s.els.length,i=s.keys.length,c=s.els[o-1].$els,l=c[c.length-1];if(0===i)return zn(e,s,Ue),e.sync.animations.add(H((()=>{for(let e,t=o-1;t>0;t--){const n=s.els[t].$els;for(e=n.length-1;e>-1;e--)ze(n[e])}}),e.sync.local,0)),D(!0,null,l);const a=D(!0,null,l);if(1===o){const t=s.els[0].$els;for(let r=t[0];;r=r.nextSibling){const c=n.get(r);if(void 0!==c){if(!c.isHide)break;zn(e,s,Ke);for(let e=t.length-1;e>-1;e--)t[e]=t[e].content.firstChild;return e.sync.afterAnimations.add(H((()=>Fn(e,s,s.els,o<i?()=>jn(e,s):null)),e.sync.local,0)),a}}}if(o===i){const t=Fn(e,s,s.els,null);return void 0===t?a:t.then((()=>a))}if(o<i){const t=Fn(e,s,s.els,(()=>jn(e,s)));return void 0===t?a:t.then((()=>a))}const d=new Set;for(let e=i;e<o;e++){const t=s.els[e].$els.length,n=s.els[e].$els;for(let e=0;e<t;e++)d.add(n[e])}return s.els.splice(i,o-i),e.sync.animations.add(H((()=>{for(const e of d)ze(e)}),e.sync.local,0)),e.sync.afterAnimations.add(H((()=>Fn(e,s,s.els,null)),e.sync.local,0)),a}function Mn(e,t,n,r,s){const o=n.length,i=new Array(o);for(let e=0;e<o;e++)i[e]=Oe(n[e],e);return{keys:e,value:t,els:i,valName:r,keyName:s}}function zn(e,t,n){const r=t.els[0].$els,s=r.length;for(let t=0;t<s;t++)n(e,r[t])}function Tn(e,t,n,r){const s=my.env.srcBy$src;for(let n=e;null!==n;n=n.previousSibling){const r=s.get(n);if(void 0===r||!r.isCmd)continue;if(null===r.asOneIdx)return e;const o=V(r,t),i=r.asOneIdx.get(t);for(n=(e=""!==o?L(n,r.descr.get$elsByStr,o):n).previousSibling;null!==n;n=n.previousSibling){const r=s.get(n);if(void 0!==r&&r.isCmd){if(null===r.asOneIdx||r.asOneIdx.get(t)!==i)return e;e=""!==o?n=L(n,r.descr.get$elsByStr,o):n}}return e}throw new Error("foreach.js")}function Rn(e,t,n,r){const s=my.env.srcBy$src;for(let n=e;null!==n;n=n.nextSibling){const r=s.get(n);if(void 0===r||!r.isCmd)continue;if(null===r.asOneIdx)return[[e]];const o=V(r,t),i=r.asOneIdx.get(t),c=[];do{if(""!==o){const e=c[c.push(O(n,r.descr.get$elsByStr,o))-1];n=e[e.length-1]}else c.push([n]);for(n=n.nextSibling;null!==n;n=n.nextSibling){const e=s.get(n);if(void 0!==e&&e.isCmd){if(null===e.asOneIdx||e.asOneIdx.get(t)!==i)return c;break}}}while(null!==n);return c}throw new Error("foreach.js")}function jn(e,t){const n=t.els.length,r=t.keys.length,s=t.els[n-1],o=s.$els.length,i=n;let c=0,l=0;for(let e=0;e<o;e++){const t=s.$els[e],n=my.env.srcBy$src.get(t);0===l&&void 0!==n&&(l=n.id),1===t.nodeType&&(c+=t.offsetHeight)}const a=0!==c?Math.ceil(3*document.scrollingElement.clientHeight/c):100;Ye(s.$els[o-1])?e.sync.animations.add(H((()=>Dn(e,t,E(e.sync.local,l),r,i,a)),e.sync.local,0)):e.sync.afterAnimations.add(H((()=>Hn(e,t,l,r,i,a)),e.sync.local,0))}function Hn(e,t,r,s,o,i){return new Promise((c=>{const l=requestIdleCallback((()=>{e.sync.idleCallback.delete(l),e.sync.animations.add(H((()=>Dn(e,t,E(e.sync.local,r),s,o,i)),e.sync.local,r)),c()}),n);e.sync.idleCallback.set(l,c)}))}function Dn(e,t,n,r,s,o){const i=my.document.createDocumentFragment(),c=function(e,t,n,r,s,o){const i=s+o>r?r-s:o,c=function(e,t,n,r){t=E(e.sync.local,t);const s=my.env.srcBy$src,o=my.env.$srcById.get(t),i=my.env.srcById.get(t),c=V(i,e.str),l=""!==c?O(o,i.descr.get$elsByStr,c):[o],d=l.length,u=new Array(r),f=[];let y;for(let e=0;e<d;e++){const t=l[e];if(y=s.get(t),void 0!==y&&y.isCmd)break}if(void 0===y)throw console.warn(">>>mw dom:q_cloneNode:",e,l,n,r),_e(new Error(">>>mw dom:q_cloneNode: среди элементов для клонирования нет элемента с командой, такого не должно быть"),e.$src,e);const m=y.descr;for(const[t,n]of m.attr){if(t===e.str)break;const r=my.env.reqCmd.get(t);r.cmdName===S&&f.push(Le(r.cmd,t,n))}const v=f.length,h=Pe.get(y.id),p=new Set,g=new Array(r),w=m.asOnes.keys();for(let t=w.next();!t.done;t=w.next())if(t.value===e.str)for(t=w.next();!t.done;t=w.next())p.add(t.value);for(let e=0;e<r;e++)u[e]=Oe(new Array(d),e+n),g[e]=new Map;for(let t,n=0;n<d;n++){const o=new Array(r),i=l[n];for(je(i,"TEMPLATE"!==i.nodeName||null===i.getAttribute(a),o,r,g,0,p),Re(i,o,r,g),t=0;t<r;t++){const r=u[t],i=r.$els[n]=o[t],c=s.get(i);if(void 0!==c){if(tt(c,e.str,r.idx),0!==v)for(k=0;k<v;k++){const t=f[k];t.cmd.render(T(i,t.str,t.expr,e.scope,e.sync))}void 0!==h&&Pe.set(c.id,h)}}}return u}(e,t,s,i),l=c[0].$els.length;for(let e,t=0;t<i;t++){const r=c[t].$els;for(e=0;e<l;e++)n.appendChild(r[e])}return c}(e,n,i,r,s,o),l=c.length,d=function(e,t,n){const r=my.env.srcBy$src,s=r.get(t).asOneIdx.get(e.str),o=O(t,r.get(t).descr.get$elsByStr,e.str);for(let i=(t=o[o.length-1]).nextSibling;null!==i;i=i.nextSibling){const o=r.get(i);if(void 0===o||!o.isCmd)continue;if(null===o.asOneIdx||o.asOneIdx.get(e.str)!==s||et(o,e.str)!==n)return t;const c=O(i,r.get(i).descr.get$elsByStr,e.str);t=c[c.length-1]}return t}(e,my.env.$srcById.get(n),s-1);if((s+=l)>=r)return d.parentNode.insertBefore(i,d.nextSibling),void e.sync.afterAnimations.add(H((()=>Kn(e,t,c)),e.sync.local,0));const u=c[l-1].$els,f=my.env.srcBy$src;for(let l=u[u.length-1];null!==l;l=l.previousSibling){const a=f.get(l);if(void 0!==a)return n=a.id,d.parentNode.insertBefore(i,d.nextSibling),void e.sync.afterAnimations.add(H((()=>Kn(e,t,c).then((()=>Hn(e,t,n,r,s,o)))),e.sync.local,0))}throw new Error("foreach.js")}function Fn(e,t,r,s){const o=[],i=[],c=r.length;if(e.sync.renderParam.isLinking)for(let e=0;e<c;e++)o.push(r[e]);else for(let e=0;e<c;e++){const t=r[e],n=t.$els,s=n.length;let c=!1;for(let e=0;e<s;e++)if(Ye(n[e])){c=!0;break}c?o.push(t):i.push(t)}return 0!==o.length?Kn(e,t,o).then((()=>{0===i.length?null!==s&&s():e.sync.afterAnimations.add(H((()=>Fn(e,t,i,s)),e.sync.local,0))})):new Promise((n=>{const r=requestIdleCallback((()=>{e.sync.idleCallback.delete(r),Kn(e,t,i.splice(0,100)).then((()=>{if(0!==i.length)return Fn(e,t,i,s).then(n);null!==s&&s(),n()}))}));e.sync.idleCallback.set(r,n)}),n)}function Kn(e,t,n){const r=n.length,s=new Array(r),o=my.env.srcBy$src;for(let i,c,l=0;l<r;l++){const r=n[l],a=r.$els;if(a.length,i=a[0],!o.has(i)){c=1;do{i=a[c++]}while(!o.has(i))}const d=st(e.scope),u=r.idx;t.valName&&(d[t.valName]=t.value[u]),t.keyName&&(d[t.keyName]=t.keys[u]),s[l]=j(i,d)}return lt(s,e.str,R(),e.sync)}var Un=X((function(e){return Tt(e,e.$src,!0).then((t=>(Wn(e,e.$src,t),null)))}),(function(e,t,n){return Rt(e,t,n).then((r=>{const s=t.length;for(let o=0;o<s;o++)n.has(o)||Wn(e,t[o].$src,r[o]);return null}))}),null,null,!0,!1);function Wn(e,t,n){const r=my.env.srcBy$src.get(t).cache;e.sync.renderParam.isLinking?r.current.set(e.str,n):n!==r.current.get(e.str)&&e.sync.animations.add(H((()=>{r.current.set(e.str,n);const s=e.reqCmd.args[0];void 0===s||""===s?t.innerHTML=n:t.textContent=n}),e.sync.local,my.env.srcBy$src.get(t).id))}const Gn=X((function(e){return Qn(e,w,b,I),Tt(e,e.$src,!0).then((t=>Jn(e,t,w,b,I)))}),(function(e,t,n){let r=0;for(;n.has(r);)r++;const s=t.length;if(r===s)return null;return Rt(e,t,n).then((o=>{const i=new Array(s);for(;;){const c=T(t[r].$src,e.str,e.expr,t[r].scope,e.sync);for(Qn(c,w,b,I),i[r]=Jn(c,o[r],w,b,I);n.has(++r););if(r===s)break}return i}))}),(function(e,t,n,r){return Yn(w,b,I,e,t)}),(function(e,t,n,r){return Zn(w,b,I,e,t,n,r)}),!1,!1),Xn=X((function(e){Qn(e,$,x,B);let t=!0;for(const[n,r]of my.env.srcBy$src.get(e.$src).descr.attr){if(t){n===e.str&&(t=!1);continue}const s=my.env.reqCmd.get(n);if(s.cmdName===x)return Tt(e,e.$src,!0).then((t=>(e.reqCmd=s,e.str=n,e.expr=r,Tt(e,e.$src,!0).then((n=>Jn(e,n,$,x,B,(e=>e===t)))))))}throw _e(new Error(">>>mw switch:01:Invalide structure: case-cmmand not found"),e.$src,e)}),null,(function(e,t,n,r){return Yn($,x,B,e,t)}),(function(e,t,n,r){return Zn($,x,B,e,t,n,r)}),!1,!1);async function Jn(t,n,r,s,o,i=(e=>e)){const c=my.env.srcBy$src,l=c.get(t.$src.parentNode),a=void 0!==l?l.scopeCache:{},d=T(t.$src,t.str,t.expr,ot(c.get(t.$src),a),t.sync);let u=i(n);if(u){const t=d.reqCmd.args[0];void 0!==t&&""!==t&&(d.scope[e][xn(t)]=se(n))}let[f,y,m]=tr(d,d.$src,d.str,u);const v=er(d.$src,c.get(d.$src),d.str,r);if(-1===v)return D(""===m,y,f,y,m);for(let r=f.nextSibling;null!==r;r=r.nextSibling){const l=c.get(r);if(void 0===l)continue;if(!l.isCmd)break;let d=!0,h=0;for(const[c,p]of l.descr.attr){if(h++<v)continue;const g=my.env.reqCmd.get(c);if(g.cmdName!==s&&g.cmdName!==o)break;const w=T(r,c,p,ot(l,a),t.sync);if(d=!1,u){[f]=tr(w,r,c,!1),r=f;break}if(g.cmdName===o){[f,y,m]=tr(w,r,c,!0),r=f;break}if(n=await Tt(w,r,!0),u=i(n)){const t=w.reqCmd.args[0];void 0!==t&&""!==t&&(w.scope[e][xn(t)]=se(n)),[f,y,m]=tr(w,r,c,!0),r=f,n=!0;break}[f,y,m]=tr(w,r,c,!1),r=f;break}if(d)break}return D(""===m,y,f,y,m)}function Qn(e,t,n,r){for(const t of my.env.srcBy$src.get(e.$src).descr.attr.keys())if(t===e.str)break;const s=Yn(t,n,r,e.$src,e.str,e.expr);if(my.env.reqCmd.get(e.str).cmdName!==t)for(const[n,r]of my.env.srcBy$src.get(s).descr.attr){const o=my.env.reqCmd.get(n);if(o.cmdName===t)return e.reqCmd=o,e.str=n,e.expr=r,void(e.$src=s)}else e.$src=s}function Yn(e,t,n,r,s,o,i,c){const l=""!==s&&my.env.reqCmd.get(s).cmdName===e,a=my.env.srcBy$src;for(let o=r;null!==o;o=o.previousSibling){const i=a.get(o);if(void 0===i)continue;if(!i.isCmd)break;let d=!0,u=0;for(const f of i.descr.attr.keys()){const y=my.env.reqCmd.get(f);if(y.cmdName===C){u=0;continue}if(u++,l){if(f!==s)continue}else{if(y.cmdName===t||y.cmdName===n){if(1!==u)throw _e(new Error(">>>mw if:make$first:01 Invalid structure: elseif and else command can be first in this attributes"),o);d=!1;break}if(y.cmdName!==e)continue}c&&(c.str=f);let m,h=0,p=[],g="";const w=i.descr.attr.keys();for(let e=w.next();!e.done;e=w.next()){if(0===h){const t=e.value;my.env.reqCmd.get(t).cmdName===v&&p.push([t,et(i,t)])}if(e.value===s){for(e=w.next();!e.done;e=w.next()){const t=e.value,n=my.env.reqCmd.get(t);""===g&&n.cmdName===C?void 0!==et(i,t)&&h++:0===h&&""===g&&n.cmdName===v&&(m=et(i,t),void 0!==m&&(g=t))}break}}if(0!==h){for(o=o.previousSibling;null!==o;o=o.previousSibling)if(8===o.nodeType&&"inc_begin"===o.textContent){if(--h)continue;for(o=o.nextSibling;null!==o;o=o.nextSibling){const e=a.get(o);if(void 0!==e&&e.isCmd)return o}}throw _e(new Error(">>>mw if:make$first:02 Invalid structure: inc_begin not found"),r)}if(""!==g){const e=p.length;for(let t=o.previousSibling;null!==t;t=t.previousSibling){const n=a.get(t);if(void 0===n||!n.isCmd)continue;const r=et(n,g);if(void 0===r||m<r)return o;if(e>0)for(let t=0;t<e;t++){const e=p[t];if(et(n,e[0])!==e[1])return o}o=t,m=r}return o}return o}if(d)break}throw _e(new Error(`>>>mw if:ifGet$first:02 Invalid structure: if-command not found - str => "${s}"`),r)}function Zn(e,t,n,r,s,o,i){const c=my.env.srcBy$src,l={str:""};let a=Yn(e,t,n,r,s,0,0,l);for(let e=c.get(a);void 0!==e&&!e.isCmd&&null!==a;a=a.nextSibling,e=c.get(a))a=a.nextSibling;const d=c.get(a),u=nr(d,l.str),f=""!==u?O(a,d.descr.get$elsByStr,u):[a],y=er(a,d,l.str,e);if(-1===y)return f;""!==u&&(a=f[f.length-1]);let m=[];for(a=a.nextSibling;null!==a;a=a.nextSibling){const e=c.get(a);if(void 0===e){m.push(a);continue}if(!e.isCmd)return f;let r=!0,s=0;const o=e.descr;for(const i of o.attr.keys()){if(s++<y)continue;const l=my.env.reqCmd.get(i);if(l.cmdName!==t&&l.cmdName!==n)break;r=!1;const d=nr(e,i),u=""!==d?O(a,o.get$elsByStr,d):[a];if(1===u.length){0!==m.length&&(f.push(...m),m=[]),f.push(a);break}for(a=u[0].previousSibling,m=[];;){if(void 0===c.get(a))break;m.push(a),a=a.previousSibling}const v=m.length;if(0!==v){for(let e=v-1;e>-1;e--)f.push(m[e]);m=[]}a=f[f.push(...u)-1];break}if(r)return f}return f}function er(e,t,n,r){let s=0,o=!1;for(const e of t.descr.attr.keys()){if(e===n)break;const t=my.env.reqCmd.get(e).cmdName;if(r!==$||t!==$)switch(s++,t){case r:case b:case I:case v:case x:case B:o=!0;break;case C:o=!1}}return o?-1:s}function tr(e,t,n,r){const s=my.env.srcBy$src,o=s.get(t),i=nr(o,n),c=""!==i?O(t,o.descr.get$elsByStr,i):[t],l=c.length,a=c[l-1];if(!r){for(let t=0;t<l;t++)Ue(e,c[t]);return[a,null,""]}let d=null,u="",f=!0;for(let r=0;r<l;r++){t=c[r];const o=s.get(t);void 0!==o?(null===d&&(d=t,u=n),o.isHide&&(Ke(e,t),f=!1)):1===t.nodeType&&(Ke(e,t),f=!1)}if(f)return[a,d,u];const y=s.get(d).id;return e.sync.afterAnimations.add(H((()=>it(my.env.$srcById.get(y),e.scope,n,e.sync)),e.sync.local,0)),[a,null,""]}function nr(e,t){return V(e,t!==$?t:V(e,t))}var rr=X((function(e){return or(e,e.$src),null}),(function(e,t,n){const r=t.length;for(let s=0;s<r;s++)n.has(s)||or(e,t[s].$src);return null}),null,null,!1,!1);const sr=new WeakMap;function or(t,n){const r=t.reqCmd.args[0];if(!r)throw _e(new Error(">>>mw on:render:01: Need set action name"),n,t);const s=my.env.srcBy$src.get(n).cache;if(s.isInits.has(t.str))return;s.isInits.add(t.str);const o=sr.get(n);if(void 0!==o&&o.has(t.str))return void o.delete(t.str);const i={capture:!1,once:!1,passive:!1};for(let e=t.reqCmd.args.length-1;e>0;e--)switch(t.reqCmd.args[e]){case"capture":i.capture=!0;continue;case"once":i.once=!0;continue;case"passive":i.passive=!0;continue}n.addEventListener(xn(r),(r=>function(t,n,r){const s=t.reqCmd.args.length,o=new Set;for(let e=1;e<s;e++){const s=t.reqCmd.args[e];switch(s){case"":case"capture":case"once":case"passive":continue;case A:r.preventDefault();continue;case N:r.stopPropagation();continue;case _:if(r.target===n)continue;return;case"ctrl":if(r.ctrlKey){o.add("ctrl");continue}return;case"alt":if(r.altKey){o.add("alt");continue}return;case"shift":if(r.shiftKey){o.add("shift");continue}return;case"meta":if(r.metaKey){o.add("meat");continue}return;case P:for(const e of ir)if(!o.has(e))switch(e){case"ctrl":if(r.ctrlKey)return;continue;case"alt":if(r.altKey)return;continue;case"shift":if(r.shiftKey)return;continue;case"meta":if(r.metaKey)return;continue}continue}if("input"===r.type){if(null!==r.data&&s===r.data.toLowerCase())continue;return}if(0===r.type.indexOf("key")){if(s===r.key.toLowerCase())continue;return}if(0===r.type.indexOf("mouse")&&!isNaN(s)){if(Number(s)===r.button)continue;return}}const i=my.env.srcBy$src.get(n),c=i.scopeCache;c[e].evt=r,i.cache.value=G(),Tt(T(n,t.str,t.expr,c,null),n,!1)}(t,n,r)),i)}const ir=new Set(["ctrl","alt","shift","meta"]);var cr=X((function(t){return t.scope[e][lr(t)]=t.scope,null}),(function(t,n,r){const s=lr(t),o=n.length;for(let t=0;t<o;t++)r.has(t)||(n[t].scope[e][s]=n[t].scope);return null}),null,null,!1,!1);function lr(e){const t=e.reqCmd.args[0];if(void 0!==t&&""!==t)return xn(t);throw _e(new Error(">>>mw scope:render: Need set scope name"),e.$src,e)}var ar=X((function(e){return qe(e.$src,(()=>Tt(e,e.$src,!0)),e.reqCmd.args[0],e.reqCmd.args[1]).then((()=>null))}),null,null,null,!1,!1);var dr=X((function(e){return Tt(e,e.$src,!0).then((t=>fr(e,e.scope,ur(e),t)))}),(function(e,t,n){return Rt(e,t,n).then((r=>{const s=ur(e),o=t.length,i=new Array(o);for(let c=0;c<o;c++)n.has(c)||(i[c]=fr(e,t[c].scope,s,r[c]));return i}))}),null,null,!1,!1);function ur(e){const t=e.reqCmd.args[0];if(void 0!==t&&""!==t)return xn(t)}function fr(t,n,r,s){const o=my.env.srcBy$src.get(t.$src),i=o.cache;i.current.has(t.str)||i.current.set(t.str,{watch:void 0});const c=i.current.get(t.str);if(t.sync.renderParam.isLinking)return i.isInits.add(t.str),c.watch=s,D(!0);if(i.isInits.has(t.str)){if(s===c.watch){if(null===o.descr.get$elsByStr)return D(!0);const e=O(t.$src,o.descr.get$elsByStr,t.str);return D(!0,e[e.length-1])}t.sync.onreadies.add((()=>{c.watch=s}))}else t.sync.onreadies.add((()=>{i.isInits.add(t.str),c.watch=s}));return void 0!==r&&(n[e][r]=se(s)),null}!function(){self.my||(self.my={}),my.document=document,my.rootElement=document.documentElement,my.env={cmd:new Map,reqCmd:new Map,$srcById:new Map,srcById:new Map,srcBy$src:new WeakMap,descrById:new Map,idCurVal:0,varIdByVar:new Map,varById:new Map,varIdByVarIdByProp:new Map,srcIdsByVarId:new Map,_func:new Map},J("attr",kn),J("exec",_n),J("fetch",qn),J(v,Ln),J(p,Un),J(w,Gn),J(b,Gn),J(I,Gn),J($,Xn),J(x,Xn),J(B,Xn),J(C,rn),J(S,rr),J("scope",cr),J("filling",ar),J("watch",dr);const e=document.currentScript&&document.currentScript.src||new URL("myweb.min.js",document.baseURI).href;if(my.debugLevel=-1!==e.indexOf("debug=1")?1:-1!==e.indexOf("debug=2")?2:0,self.glob=se(self.glob||{}),self.loc=se($n(location.href)),self.view=se(Sn(document)),-1!==e.indexOf("load=skip"))return void(0!==my.debugLevel&&import(e.replace(/([^\/]+?\.js)/,"getlineno.js")));const t=()=>{-1!==e.indexOf("line=1")?import(e.replace(/([^\/]+?\.js)/,"getlineno.js")).then((e=>e.default)).then((()=>Bt(void 0,void 0,void 0,-1!==e.indexOf("linking=1")))):Bt(void 0,void 0,void 0,-1!==e.indexOf("linking=1"))};if(-1===e.indexOf("load=onload"))return"interactive"===document.readyState||"complete"===document.readyState?void t():void document.addEventListener("DOMContentLoaded",t,{once:!0});if("complete"===document.readyState)return void t();self.addEventListener("load",t,{once:!0});const n=self.view,r=document.scrollingElement,s={passive:!0};980===r.clientWidth&&setTimeout((()=>Cn(document)),500),self.addEventListener("scroll",(()=>{Pt(),Ct(10,(()=>{n.scrollTop=r.scrollTop,n.scrollLeft=r.scrollLeft}))}),s),self.addEventListener("resize",(()=>{Ct(10,(()=>Cn(document)))}),s),self.addEventListener("popstate",(()=>{In(location.href)}),s)}()}();
//# sourceMappingURL=myweb.min.js.map
